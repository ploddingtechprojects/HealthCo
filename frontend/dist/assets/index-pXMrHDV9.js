const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DyR0ftVW.js","assets/index-Bs-55i82.css"])))=>i.map(i=>d[i]);
import{c as e,g as i,a8 as n,f as t,a9 as a,_ as s,m as c,r,aa as l,ab as o,y as d,j as u,p as m,F as h,T as x,ac as p,o as C,ad as g,ae as f,a as y,k as j,P as b,e as v,af as w,ag as A,ah as I,ai as N,C as E,aj as S,S as L,ak as q,V as M,X as P,al as Z,am as T}from"./index-DyR0ftVW.js";import{M as W}from"./ManagementHeader-ym6m9w7H.js";import{u as k}from"./useProvinces-BxWqgMCH.js";import{A as z}from"./Autocomplete-7SfYvhTE.js";import{D}from"./DeleteConfirmationDialog-DKqJK7p7.js";import{T as _}from"./TableWithSearchAndPagination-DhcMeN2g.js";import{T as B}from"./Tooltip-Cof9Jr1h.js";import{R as F,a as V}from"./EditOutlined-CjO-a_sD.js";import"./WarningOutlined-Pm6jC2mV.js";import"./AntdIcon-2OxomVw-.js";import"./DialogActions-BmwBtQrJ.js";import"./InputAdornment-BBfdgTpM.js";const R=/^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,O=/^[\w\s-]{2,20}$/,$=e({clinicAdminName:t().trim().required("Clinic admin name is required").min(2,"At least 2 characters required").test("no-space-second-char","2nd character can't be a space",function(e){return!e||e.length<2||" "!==e[1]}).test("min-2-non-space","At least 2 characters required",function(e){return!e||e.replace(/\s/g,"").length>=2}),clinicName:t().trim().required("Clinic name is required").min(2,"At least 2 characters required"),countryId:a().required("Country is required").positive("Please select a valid country"),address:t().trim().required("Address is required"),city:t().trim().required("City is required"),state:t().trim().required("Province is required"),zipCode:t().required("Postal Code is required").when("countryId",{is:e=>1===Number(e),then:e=>e.matches(R,"Invalid Postal Code (e.g., K1A0B1)"),otherwise:e=>e.matches(O,"Invalid postal/zip code")}),timeZoneId:t().required("Time zone is required"),contactNo:n({requiredMessage:"Admin contact number is required",invalidMessage:"Enter a valid Canadian phone number"}),email:i({requiredMessage:"Admin email is required",invalidMessage:"Must be a valid email"}).test("admin-email-not-clinic","Admin email cannot be the same as clinic email",function(e){const i=this.resolve(s("clinicEmail"));return!e||!i||e.toLowerCase()!==i.toLowerCase()}),clinicContactNo:n({requiredMessage:"Clinic contact number is required",invalidMessage:"Enter a valid Canadian phone number"}),clinicEmail:i({requiredMessage:"Clinic email is required",invalidMessage:"Must be a valid email"}).test("clinic-email-not-admin","Clinic email cannot be the same as admin email",function(e){const i=this.resolve(s("email"));return!e||!i||e.toLowerCase()!==i.toLowerCase()})}),H=async()=>{var e,i;try{return(e=>{const{data:i}=e;if(!i.success&&void 0!==i.success)throw new Error(i.message||"An error occurred");return i.data||i})(await c.get("https://healthco.clinic/api/api/countries"))}catch(n){const t=(null==(i=null==(e=n.response)?void 0:e.data)?void 0:i.message)||n.message||"Failed to fetch countries";throw new Error(t)}},K=()=>{const[e,i]=r.useState([]),[n,t]=r.useState(!0),[a,s]=r.useState(null),c=r.useCallback(async()=>{t(!0),s(null);try{const e="https://healthco.clinic/api/api/timezones",n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch time zones");const t=await n.json();i(t)}catch(e){s(e.message),i([])}finally{t(!1)}},[]);return r.useEffect(()=>{c()},[c]),{timeZones:e,isLoading:n,error:a,refetch:c}},U=()=>{const[e,i]=r.useState([]),[n,t]=r.useState(!0),[a,s]=r.useState(null),c=r.useCallback(async()=>{t(!0),s(null);try{const e=await l.getAllClinics();i(e)}catch(e){s(e.message)}finally{t(!1)}},[]);return r.useEffect(()=>{c()},[c]),{clinics:e,isLoading:n,error:a,refetch:c}},X=r.forwardRef(({onClinicAdded:e,clinicToEdit:i,isEditing:n,onCancelEdit:t,onFormStateChange:a},s)=>{const{createClinic:c,isLoading:b}=(()=>{const[e,i]=r.useState(!1),[n,t]=r.useState(null);return{createClinic:r.useCallback(async e=>{var n,a;i(!0),t(null);try{const c={ClinicName:e.clinicName,ClinicMasterAdminName:e.clinicAdminName,ClinicMasterAdminEmail:e.email,ClinicMasterAdminContactNo:e.contactNo,Email:e.clinicEmail,ContactNo:e.clinicContactNo,Address:e.address,City:e.city,State:e.state,ZipCode:e.zipCode,CountryId:e.countryId,TimeZoneId:e.timeZoneId},r=await l.createClinic(c);if(r.isError){const e=(null==(a=null==(n=null==r?void 0:r.errors)?void 0:n[0])?void 0:a.description)||"Something went wrong";throw t(e),i(!1),new Error(e)}try{const{refreshAvailableClinics:e}=await o(async()=>{const{refreshAvailableClinics:e}=await import("./index-DyR0ftVW.js").then(e=>e.d3);return{refreshAvailableClinics:e}},__vite__mapDeps([0,1]));await e()}catch(s){}return i(!1),r}catch(c){const e=(null==c?void 0:c.message)||"Something went wrong";throw t(e),i(!1),c}},[]),isLoading:e,error:n}})(),{updateClinic:v,isLoading:w}=(()=>{const[e,i]=r.useState(!1),[n,t]=r.useState(null);return{updateClinic:r.useCallback(async(e,n)=>{i(!0),t(null);try{const t=await l.updateClinic(e,n);try{const{refreshAvailableClinics:e}=await o(async()=>{const{refreshAvailableClinics:e}=await import("./index-DyR0ftVW.js").then(e=>e.d3);return{refreshAvailableClinics:e}},__vite__mapDeps([0,1]));await e()}catch(a){}return i(!1),t}catch(s){throw t(s.message),i(!1),s}},[]),isLoading:e,error:n}})(),{clinics:A}=U(),{countries:I}=(()=>{const[e,i]=r.useState([]),[n,t]=r.useState(!0),[a,s]=r.useState(null),c=r.useCallback(async()=>{t(!0),s(null);try{const e=await H();i(e)}catch(e){s(e.message)}finally{t(!1)}},[]);return r.useEffect(()=>{c()},[c]),{countries:e,isLoading:n,error:a,refetch:c}})(),N=r.useRef(),[E,S]=r.useState((null==i?void 0:i.countryId)??1),{provinces:L,isLoading:q}=k(E),M=$,P=r.useMemo(()=>i?{clinicAdminName:i.clinicMasterAdminName??"",clinicName:i.clinicName??"",countryId:i.countryId??"",address:i.address??"",city:i.city??"",state:i.state??"",zipCode:i.zipCode??"",timeZoneId:i.timeZoneId??"",contactNo:i.clinicMasterAdminContactNo??"",email:i.clinicMasterAdminEmail??"",clinicEmail:i.email??i.clinicEmail??"",clinicContactNo:i.contactNo??i.clinicContactNo??""}:{clinicAdminName:"",clinicName:"",countryId:1,address:"",city:"",state:"",zipCode:"",timeZoneId:"",contactNo:"",email:"",clinicEmail:"",clinicContactNo:""},[i]),{timeZones:Z,isLoading:T,error:W}=K();r.useEffect(()=>{W&&d.error(`Failed to load time zones: ${W}`)},[W]);const D=b||w;return r.useImperativeHandle(s,()=>{var e,i,n;return{submitForm:()=>{N.current&&N.current.submitForm()},resetForm:()=>{N.current&&N.current.resetForm()},isValid:(null==(e=N.current)?void 0:e.isValid)||!1,isDirty:(null==(i=N.current)?void 0:i.dirty)||!1,isSubmitting:(null==(n=N.current)?void 0:n.isSubmitting)||!1}}),u.jsx(m,{sx:{maxWidth:700,mx:"auto",width:"100%"},children:u.jsx(h,{innerRef:N,initialValues:P,validationSchema:M,onSubmit:async(t,{resetForm:a,setFieldError:s})=>{A.find(e=>e.clinicName.toLowerCase()===(t.clinicName||"").toLowerCase()&&(!n||e.clinicId!==(null==i?void 0:i.clinicId)))&&s("clinicName","Clinic name already exists");try{if(n){await v(i.clinicId,t);d.success("Clinic updated successfully!")}else{await c(t);d.success("Clinic created successfully!")}a(),e&&e()}catch(r){const e=r.message||`Failed to ${n?"update":"create"} clinic`;d.error(e)}},enableReinitialize:!0,validateOnMount:!1,children:({errors:e,handleBlur:i,handleChange:t,handleSubmit:s,isSubmitting:c,touched:l,submitCount:o,isValid:d,dirty:h,values:b,resetForm:v,setFieldValue:w})=>(r.useEffect(()=>{S(b.countryId),b.countryId!==E&&b.state&&w("state","")},[b.countryId,w,E]),r.useEffect(()=>{a&&a({isValid:d,isDirty:h,isSubmitting:c,isLoading:D,submitLabel:D?"Processing...":n?"Update Clinic":"Add Clinic"})},[d,h,c,D]),u.jsx("form",{noValidate:!0,onSubmit:s,children:u.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:[u.jsxs(m,{children:[u.jsx(x,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:"Clinic Master Admin Details"}),u.jsxs(m,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Master Admin Name",required:!0,value:b.clinicAdminName,onChange:t,onBlur:i,name:"clinicAdminName",error:(l.clinicAdminName||o>0)&&e.clinicAdminName?e.clinicAdminName:"",sx:{width:"100%"}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Master Admin Phone No.",required:!0,value:b.contactNo,onChange:e=>{const i=(e.target.value||"").replace(/\D/g,"").slice(0,10);w("contactNo",i)},onBlur:i,name:"contactNo",error:(l.contactNo||o>0)&&e.contactNo?e.contactNo:"",sx:{width:"100%"},inputProps:{maxLength:25}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Master Admin Email",required:!0,type:"email",value:b.email,onChange:t,onBlur:i,name:"email",error:(l.email||o>0)&&e.email?e.email:"",disabled:n,InputProps:{readOnly:n},sx:{width:"100%","& .MuiOutlinedInput-root.Mui-disabled":{backgroundColor:"#f3f4f6",cursor:"not-allowed"}}})})]})]}),u.jsxs(m,{children:[u.jsx(x,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:"Clinic Details"}),u.jsxs(m,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:[u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Name",required:!0,value:b.clinicName,onChange:t,onBlur:i,name:"clinicName",error:(l.clinicName||o>0)&&e.clinicName?e.clinicName:"",sx:{width:"100%"}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Phone No.",required:!0,value:b.clinicContactNo,onChange:e=>{const i=(e.target.value||"").replace(/\D/g,"").slice(0,10);w("clinicContactNo",i)},onBlur:i,name:"clinicContactNo",error:(l.clinicContactNo||o>0)&&e.clinicContactNo?e.clinicContactNo:"",sx:{width:"100%"},inputProps:{maxLength:25}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Clinic Email",required:!0,type:"email",value:b.clinicEmail,onChange:t,onBlur:i,name:"clinicEmail",error:(l.clinicEmail||o>0)&&e.clinicEmail?e.clinicEmail:"",disabled:n,InputProps:{readOnly:n},sx:{width:"100%","& .MuiOutlinedInput-root.Mui-disabled":{backgroundColor:"#f3f4f6",cursor:"not-allowed"}}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Country",required:!0,sx:{width:"100%"},children:u.jsxs(C,{fullWidth:!0,error:Boolean((l.countryId||o>0)&&e.countryId),children:[u.jsxs(g,{id:"countryId",name:"countryId",value:b.countryId,onBlur:i,onChange:t,displayEmpty:!0,fullWidth:!0,sx:{borderRadius:"8px",backgroundColor:"#ffffff"},children:[u.jsx(f,{value:"",disabled:!0,children:u.jsx("span",{style:{color:"#9ca3af"},children:"Select a Country"})}),I.filter(e=>e.isActive).map(e=>u.jsx(f,{value:e.countryId,children:e.countryName},e.countryId))]}),(l.countryId||o>0)&&e.countryId&&u.jsx(y,{sx:{mt:1},children:e.countryId})]})})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Province",required:!0,sx:{width:"100%"},children:u.jsxs(C,{fullWidth:!0,error:Boolean((l.state||o>0)&&e.state),children:[u.jsxs(g,{id:"state",name:"state",value:b.state,onBlur:i,onChange:t,displayEmpty:!0,disabled:q||!b.countryId,fullWidth:!0,sx:{borderRadius:"8px",backgroundColor:"#ffffff"},children:[u.jsx(f,{value:"",disabled:!0,children:u.jsx("span",{style:{color:"#9ca3af"},children:q?"Loading provinces...":"Select a Province"})}),L.map(e=>u.jsx(f,{value:e.provinceName,children:e.provinceName},e.provinceId))]}),(l.state||o>0)&&e.state&&u.jsx(y,{sx:{mt:1},children:e.state})]})})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Time Zone",required:!0,sx:{width:"100%"},error:(l.timeZoneId||o>0)&&e.timeZoneId?e.timeZoneId:"",children:u.jsx(z,{id:"timeZoneId",options:Z,getOptionLabel:e=>e.displayName||"",loading:T,value:Z.find(e=>e.timeZoneId===b.timeZoneId)||null,onChange:(e,i)=>{t({target:{name:"timeZoneId",value:i?i.timeZoneId:""}})},onBlur:i,isOptionEqualToValue:(e,i)=>e.timeZoneId===i.timeZoneId,disabled:T,sx:{width:"100%","& .MuiInputBase-root":{borderRadius:"8px",backgroundColor:"#ffffff",height:"40px",boxSizing:"border-box"}},renderInput:n=>u.jsx(j,{...n,name:"timeZoneId",required:!0,onBlur:i,error:Boolean((l.timeZoneId||o>0)&&e.timeZoneId),variant:"outlined",fullWidth:!0,sx:{width:"100%","& .MuiInputBase-root":{height:"40px"},"& .MuiInputBase-input":{py:.75,height:"1.4375em"}}})})})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"City",required:!0,value:b.city,onChange:t,onBlur:i,name:"city",error:(l.city||o>0)&&e.city?e.city:"",sx:{width:"100%"}})}),u.jsx(m,{sx:{flex:{xs:"1 0 100%",sm:"1 0 calc(33.333% - 16px)"}},children:u.jsx(p,{label:"Zip Code / Postal Code",required:!0,value:b.zipCode,onChange:t,onBlur:i,name:"zipCode",error:(l.zipCode||o>0)&&e.zipCode?e.zipCode:"",sx:{width:"100%"},inputProps:{maxLength:6}})})]}),u.jsx(m,{sx:{mt:2},children:u.jsx(p,{label:"Address",required:!0,value:b.address,onChange:t,onBlur:i,name:"address",error:(l.address||o>0)&&e.address?e.address:"",inputProps:{maxLength:150},sx:{width:"100%"}})})]})]})}))})})});X.propTypes={onClinicAdded:b.func,clinicToEdit:b.object,isEditing:b.bool,onCancelEdit:b.func,onFormStateChange:b.func},X.defaultProps={isEditing:!1};const G=({refreshTrigger:e,onEdit:i})=>{const{clinics:n,isLoading:t,refetch:a}=U(),{getTimeZoneDisplayName:s,isLoading:c}=function(){const{timeZones:e,isLoading:i,error:n,refetch:t}=K();return{getTimeZoneDisplayName:r.useMemo(()=>i=>{const n=null==e?void 0:e.find(e=>String(e.timeZoneId)===String(i));return n?n.displayName:i},[e]),isLoading:i,timeZones:e,error:n,refetch:t}}(),{toggleActive:h,isLoading:p}=(()=>{const[e,i]=r.useState(!1),[n,t]=r.useState(null);return{toggleActive:r.useCallback(async(e,n)=>{i(!0),t(null);try{const t=await l.toggleClinicStatus(e,n);try{const{refreshAvailableClinics:e}=await o(async()=>{const{refreshAvailableClinics:e}=await import("./index-DyR0ftVW.js").then(e=>e.d3);return{refreshAvailableClinics:e}},__vite__mapDeps([0,1]));await e()}catch(a){}return i(!1),t}catch(s){throw t(s.message),i(!1),s}},[]),isLoading:e,error:n}})(),[C,g]=r.useState({}),[f,y]=r.useState([]),[j,b]=r.useState({open:!1,clinicId:null,clinicName:""}),[M,P]=r.useState(!1);r.useEffect(()=>{a()},[e,a]),r.useEffect(()=>{y(n)},[n]);const Z=(e,i=20)=>e?e.split(/\s+/).map(e=>{if(!e||e.length<=i)return e;const n=[];for(let t=0;t<e.length;t+=i)n.push(e.slice(t,t+i));return n.join("Â­")}).join(" "):"",T=async e=>{try{const n=await l.getClinicById(e);i&&i(n)}catch(n){d.error(`Failed to fetch clinic details: ${n.message}`)}};return t||c?u.jsx(m,{sx:{p:3,textAlign:"center"},children:u.jsx(v,{})}):u.jsxs(u.Fragment,{children:[u.jsx(_,{data:f,customFilter:(e,i)=>{const n=e.clinicName??"",t=e.countryName??"",a=e.address??"",s=e.city??"",c=e.state??"",r=e.email??"",l=e.clinicMasterAdminEmail??"",o=e.contactNo??"",d=e.clinicMasterAdminContactNo??"";return n.toLowerCase().includes(i)||t.toLowerCase().includes(i)||a.toLowerCase().includes(i)||s.toLowerCase().includes(i)||c.toLowerCase().includes(i)||r.toLowerCase().includes(i)||l.toLowerCase().includes(i)||o.toLowerCase().includes(i)||d.toLowerCase().includes(i)},searchPlaceholder:"Search by clinic name, country, address, city, province, email, or contact...",totalLabel:"Total Clinics",defaultRowsPerPage:10,children:({paginatedData:e,page:i,rowsPerPage:n})=>u.jsxs(u.Fragment,{children:[u.jsx(w,{children:u.jsxs(A,{children:[u.jsx(I,{children:"S.No"}),u.jsx(I,{children:"Name"}),u.jsx(I,{children:"Clinic Master Admin Name"}),u.jsx(I,{children:"Time Zone"}),u.jsx(I,{children:"Country"}),u.jsx(I,{children:"Address"}),u.jsx(I,{children:"City"}),u.jsx(I,{children:"Province"}),u.jsx(I,{children:"ZIP Code"}),u.jsx(I,{children:"Clinic Master Admin Phone No."}),u.jsx(I,{children:"Clinic Admin Email"}),u.jsx(I,{align:"center",children:"Active"}),u.jsx(I,{align:"center",children:"Actions"})]})}),u.jsx(N,{children:0===e.length?u.jsx(A,{children:u.jsx(I,{colSpan:13,align:"center",children:u.jsx(x,{variant:"body2",color:"text.secondary",sx:{py:3},children:"No clinics found matching your search"})})}):e.map((e,t)=>{const a=C[e.clinicId]||!1;return u.jsxs(A,{sx:{"&:last-child td, &:last-child th":{border:0},cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>T(e.clinicId),children:[u.jsx(I,{children:i*n+t+1}),u.jsx(I,{sx:{minWidth:200},children:e.clinicName}),u.jsx(I,{sx:{minWidth:150},children:e.clinicMasterAdminName??""}),u.jsx(I,{sx:{minWidth:180},children:s(e.timeZoneId)}),u.jsx(I,{sx:{minWidth:150},children:e.countryName}),u.jsx(I,{sx:{minWidth:200},children:u.jsx(m,{component:"span",sx:{display:"inline-block",wordBreak:"break-word",overflowWrap:"break-word",WebkitHyphens:"auto",msHyphens:"auto",hyphens:"auto"},children:Z(e.address)})}),u.jsx(I,{sx:{minWidth:120},children:e.city}),u.jsx(I,{sx:{minWidth:100},children:e.state}),u.jsx(I,{sx:{minWidth:100},children:e.zipCode}),u.jsx(I,{sx:{minWidth:120},children:e.clinicMasterAdminContactNo??""}),u.jsx(I,{sx:{minWidth:200},children:e.clinicMasterAdminEmail??""}),u.jsx(I,{align:"center",sx:{minWidth:100},onClick:e=>e.stopPropagation(),children:u.jsx(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:a?u.jsx(E,{size:20}):u.jsx(S,{checked:e.isActive,onChange:()=>{(async(e,i)=>{const n=!i;y(i=>i.map(i=>i.clinicId===e?{...i,isActive:n}:i)),g(i=>({...i,[e]:!0}));try{await h(e,n),d.success(`Clinic ${n?"activated":"deactivated"} successfully!`);try{const{refreshAvailableClinics:e}=await o(async()=>{const{refreshAvailableClinics:e}=await import("./index-DyR0ftVW.js").then(e=>e.d3);return{refreshAvailableClinics:e}},__vite__mapDeps([0,1]));await e()}catch(t){}}catch(a){y(n=>n.map(n=>n.clinicId===e?{...n,isActive:i}:n)),d.error(`Failed to ${n?"activate":"deactivate"} clinic: ${a.message}`)}finally{g(i=>({...i,[e]:!1}))}})(e.clinicId,e.isActive)},color:"primary",size:"small",disabled:p})})}),u.jsx(I,{align:"center",sx:{minWidth:120},onClick:e=>e.stopPropagation(),children:u.jsxs(L,{direction:"row",spacing:1,justifyContent:"center",children:[u.jsx(B,{title:"Edit",children:u.jsx(q,{color:"primary",size:"small",onClick:()=>T(e.clinicId),children:u.jsx(F,{})})}),u.jsx(B,{title:"Delete",children:u.jsx(q,{color:"error",size:"small",onClick:()=>(e=>{const i=f.find(i=>i.clinicId===e);b({open:!0,clinicId:e,clinicName:(null==i?void 0:i.clinicName)||"this clinic"})})(e.clinicId),children:u.jsx(V,{})})})]})})]},e.clinicId)})})]})}),u.jsx(D,{open:j.open,onClose:()=>{b({open:!1,clinicId:null,clinicName:""})},onConfirm:async()=>{if(j.clinicId){P(!0);try{await l.deleteClinic(j.clinicId),d.success("Clinic deleted successfully!");try{const{refreshAvailableClinics:e}=await o(async()=>{const{refreshAvailableClinics:e}=await import("./index-DyR0ftVW.js").then(e=>e.d3);return{refreshAvailableClinics:e}},__vite__mapDeps([0,1]));await e()}catch(e){}await a()}catch(i){d.error(`${i.message}`)}finally{P(!1),b({open:!1,clinicId:null,clinicName:""})}}},title:"Delete Clinic",message:`Are you sure you want to delete clinic "${j.clinicName}"? This action cannot be undone. To confirm, type DELETE below.`,loading:M})]})};G.propTypes={refreshTrigger:b.number,onEdit:b.func};const J=()=>{const[e,i]=r.useState(0),[n,t]=r.useState(null),[a,s]=r.useState(!1),[c,l]=r.useState(!1),[o,d]=r.useState({isValid:!1,isDirty:!1,isSubmitting:!1,isLoading:!1,submitLabel:"Add Clinic"}),h=r.useRef(),x=M(),p=P(x.breakpoints.down("sm"));return u.jsxs(m,{children:[u.jsx(W,{icon:Z.Clinic,title:"Clinic Management",description:"Manage your clinics efficiently with our intuitive interface",addButtonLabel:"Create Clinic",onAdd:()=>{l(!0)},hideClinicDropdown:!0}),u.jsx(m,{sx:{mt:3},children:u.jsx(G,{refreshTrigger:e,onEdit:e=>{t(e),s(!0),l(!0)}})}),u.jsx(T,{open:c,onClose:()=>{l(!1),s(!1),t(null),d({isValid:!1,isDirty:!1,isSubmitting:!1,isLoading:!1,submitLabel:"Add Clinic"})},title:a?"Edit Clinic":"Add New Clinic",maxWidth:"sm",...p?{}:{customWidth:"700px"},onSubmit:()=>{h.current&&h.current.submitForm()},submitLabel:o.submitLabel,loading:o.isLoading||o.isSubmitting,disableSubmit:!o.isValid,showActions:!0,children:u.jsx(X,{ref:h,onClinicAdded:()=>{i(e=>e+1),t(null),s(!1),l(!1)},clinicToEdit:n,isEditing:a,onCancelEdit:()=>{t(null),s(!1),l(!1)},onFormStateChange:e=>{d(e)}})})]})};export{J as default};
