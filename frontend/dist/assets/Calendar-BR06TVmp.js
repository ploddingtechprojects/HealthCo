import{r as e,aT as t,aU as n,aV as r,aW as a,aX as i,aY as o,aZ as l,a_ as s,a$ as c,b0 as d,b1 as u,b2 as p,b3 as f,b4 as h,b5 as b,b6 as g,b7 as x,b8 as m,b9 as v,ba as y,bb as w,bc as S,bd as j,be as C,bf as E,aG as k,j as R,S as B,p as M,T as _,ak as I,P as A,bg as O,C as T,az as D,aP as P,aI as F,ac as N,k as z,B as q,bh as H,s as L,v as W,R as G,bi as V,bj as $,bk as U,bl as X,bm as Y,bn as K,aj as J,ad as Z,ae as Q,a3 as ee,O as te,bo as ne,bp as re,bq as ae,br as ie,bs as oe,bt as le,aq as se,bu as ce,m as de,aR as ue,bv as pe,am as fe,F as he,U as be,c as ge,f as xe,y as me,D as ve,h as ye,i as we,A as Se,al as je,e as Ce,aQ as Ee}from"./index-DyR0ftVW.js";import{C as ke,D as Re,a as Be}from"./CommonCard-C_xn2Pzb.js";import{M as Me}from"./ManagementHeader-ym6m9w7H.js";import{u as _e}from"./useClinicSync-pPWROp7F.js";import{c as Ie}from"./calendarService-uG1S5kl9.js";import{C as Ae,T as Oe,S as Te}from"./TruncateTooltip-BVddiBa5.js";import{f as De,S as Pe}from"./displayDate-BRGhvOnj.js";import{T as Fe}from"./Tooltip-Cof9Jr1h.js";import{R as Ne}from"./EditOutlined-CjO-a_sD.js";import{I as ze}from"./AntdIcon-2OxomVw-.js";import{C as qe}from"./CommonCheckbox-aJ2wZ0C8.js";import{A as He}from"./AddRuleButton-CNq58Mhk.js";import{g as Le}from"./technician-CQyKWYBS.js";import{W as We}from"./WorkingHoursSelector-DrZf68YU.js";import{I as Ge}from"./InputAdornment-BBfdgTpM.js";import{D as Ve}from"./DialogActions-BmwBtQrJ.js";const $e=0,Ue=3;var Xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}const Ke=(t,n)=>e.createElement(ze,Ye({},t,{ref:n,icon:Xe})),Je=e.forwardRef(Ke);var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"};function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}const et=(t,n)=>e.createElement(ze,Qe({},t,{ref:n,icon:Ze})),tt=e.forwardRef(et);var nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/;function at(e,r){if(t(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!n(e))||(rt.test(e)||!nt.test(e)||null!=r&&e in Object(r))}function it(e,n){return t(e)?e:at(e,n)?[e]:r(a(e))}function ot(e,t){for(var n=0,r=(t=it(t,e)).length;null!=e&&n<r;)e=e[i(t[n++])];return n&&n==r?e:void 0}function lt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}lt.prototype.add=lt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},lt.prototype.has=function(e){return this.__data__.has(e)};function ct(e,t,n,r,a,i){var o=1&n,l=e.length,s=t.length;if(l!=s&&!(o&&s>l))return!1;var c=i.get(e),d=i.get(t);if(c&&d)return c==t&&d==e;var u=-1,p=!0,f=2&n?new lt:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var h=e[u],b=t[u];if(r)var g=o?r(b,h,u,t,e,i):r(h,b,u,e,t,i);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!st(t,function(e,t){if(o=t,!f.has(o)&&(h===e||a(h,e,n,r,i)))return f.push(t);var o})){p=!1;break}}else if(h!==b&&!a(h,b,n,r,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function dt(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function ut(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var pt=l?l.prototype:void 0,ft=pt?pt.valueOf:void 0;var ht=Object.prototype.hasOwnProperty;var bt="[object Arguments]",gt="[object Array]",xt="[object Object]",mt=Object.prototype.hasOwnProperty;function vt(e,n,r,a,i,o){var l=t(e),b=t(n),g=l?gt:u(e),x=b?gt:u(n),m=(g=g==bt?xt:g)==xt,v=(x=x==bt?xt:x)==xt,y=g==x;if(y&&p(e)){if(!p(n))return!1;l=!0,m=!1}if(y&&!m)return o||(o=new f),l||h(e)?ct(e,n,r,a,i,o):function(e,t,n,r,a,i,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new c(e),new c(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=dt;case"[object Set]":var d=1&r;if(l||(l=ut),e.size!=t.size&&!d)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var p=ct(l(e),l(t),r,a,i,o);return o.delete(e),p;case"[object Symbol]":if(ft)return ft.call(e)==ft.call(t)}return!1}(e,n,g,r,a,i,o);if(!(1&r)){var w=m&&mt.call(e,"__wrapped__"),S=v&&mt.call(n,"__wrapped__");if(w||S){var j=w?e.value():e,C=S?n.value():n;return o||(o=new f),i(j,C,r,a,o)}}return!!y&&(o||(o=new f),function(e,t,n,r,a,i){var o=1&n,l=d(e),s=l.length;if(s!=d(t).length&&!o)return!1;for(var c=s;c--;){var u=l[c];if(!(o?u in t:ht.call(t,u)))return!1}var p=i.get(e),f=i.get(t);if(p&&f)return p==t&&f==e;var h=!0;i.set(e,t),i.set(t,e);for(var b=o;++c<s;){var g=e[u=l[c]],x=t[u];if(r)var m=o?r(x,g,u,t,e,i):r(g,x,u,e,t,i);if(!(void 0===m?g===x||a(g,x,n,r,i):m)){h=!1;break}b||(b="constructor"==u)}if(h&&!b){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h}(e,n,r,a,i,o))}function yt(e,t,n,r,a){return e===t||(null==e||null==t||!b(e)&&!b(t)?e!=e&&t!=t:vt(e,t,n,r,yt,a))}function wt(e){return e==e&&!g(e)}function St(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function jt(e){var t=function(e){for(var t=x(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,wt(a)]}return t}(e);return 1==t.length&&t[0][2]?St(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var a=n.length,i=a;if(null==e)return!i;for(e=Object(e);a--;){var o=n[a];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<i;){var l=(o=n[a])[0],s=e[l],c=o[1];if(o[2]){if(void 0===s&&!(l in e))return!1}else if(!yt(c,s,3,r,new f))return!1}return!0}(n,0,t)}}function Ct(e,t){return null!=e&&t in Object(e)}function Et(e,n){return null!=e&&function(e,n,r){for(var a=-1,o=(n=it(n,e)).length,l=!1;++a<o;){var s=i(n[a]);if(!(l=null!=e&&r(e,s)))break;e=e[s]}return l||++a!=o?l:!!(o=null==e?0:e.length)&&m(o)&&v(s,o)&&(t(e)||y(e))}(e,n,Ct)}function kt(e,t){return at(e)&&wt(t)?St(i(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:ot(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?Et(n,e):yt(t,r,3)}}function Rt(e){return at(e)?(t=i(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ot(t,e)}}(e);var t}var Bt,Mt=(Bt=function(e,t){return e&&S(e,t,x)},function(e,t){if(null==e)return e;if(!j(e))return Bt(e,t);for(var n=e.length,r=-1,a=Object(e);++r<n&&!1!==t(a[r],r,a););return e});function _t(e,n){var r;return(t(e)?C:Mt)(e,"function"==typeof(r=n)?r:w)}function It(e,t){var n=-1,r=j(e)?Array(e.length):[];return Mt(e,function(e,a,i){r[++n]=t(e,a,i)}),r}function At(e,n){var r;return(t(e)?E:It)(e,"function"==typeof(r=n)?r:null==r?w:"object"==typeof r?t(r)?kt(r[0],r[1]):jt(r):Rt(r))}function Ot(e){return void 0===e}const Tt=k(R.jsx("path",{d:"M15 20H5V7c0-.55-.45-1-1-1s-1 .45-1 1v13c0 1.1.9 2 2 2h10c.55 0 1-.45 1-1s-.45-1-1-1m5-4V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2m-2 0H9V4h9z"})),Dt=({calendar:t=null,sx:n={},onEdit:r,onShare:a,onPreview:i,onDelete:o,serviceMap:l={},servicesLoading:s=!1,isFullDataLoaded:c=!1,isLoadingFullData:d=!1})=>{const[u,p]=e.useState(!1),f=t,h=!0===(null==f?void 0:f.isLightweight),b={name:f.title||f.name||"Untitled Calendar",services:f.availableServices||[],logicModules:f.rules?f.rules.filter(e=>{var t;return!0===(null==(t=e.config)?void 0:t.enabled)}).reduce((e,t)=>{const n=t.ruleCode||t.RuleCode;return n&&!e.some(e=>e.ruleCode===n)&&e.push({ruleName:t.ruleName||t.RuleName,ruleCode:n}),e},[]).map(e=>e.ruleName):[],createdDate:f.createdOn||f.createdDate},g=e=>{if(!e&&0!==e)return"";if("string"==typeof e)return e;if("number"==typeof e){const t=String(e);return l&&l[t]?l[t]:String(e)}const t=e.serviceId??e.ServiceId??e.id??e.service_id;if(null!=t){const e=l&&l[String(t)];if(e)return e}return e.serviceName||e.name||e.title||(e.serviceId?`Service ${e.serviceId}`:JSON.stringify(e))};return R.jsx(ke,{sx:{...n,maxWidth:"420px",minWidth:"320px",height:"fit-content",transition:"all 0.2s ease-in-out",cursor:c?"pointer":"default","@keyframes pulse":{"0%":{opacity:.6},"50%":{opacity:1},"100%":{opacity:.6}}},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>{c&&r&&r(t)},children:R.jsxs(B,{spacing:1,sx:{height:"100%"},children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[R.jsx(M,{sx:{display:"flex",alignItems:"center",gap:1},children:R.jsx(_,{variant:"h6",sx:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.4,color:"text.primary"},children:b.name})}),R.jsxs(_,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.75rem",fontWeight:400},children:["Created: ",De(b.createdDate)]})]}),R.jsxs(M,{children:[R.jsx(_,{variant:"subtitle2",sx:{mb:1,fontWeight:600,fontSize:"0.875rem",color:"text.primary"},children:"Services"}),R.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Array.isArray(b.services)&&b.services.length>0?!h&&(s||b.services.length>0&&0===Object.keys(l).length)?b.services.slice(0,4).map((e,t)=>R.jsx(Pe,{variant:"rounded",width:90,height:28,sx:{borderRadius:"20px"}},`svc-skel-${t}`)):b.services.map((e,t)=>R.jsx(Ae,{sx:{backgroundColor:"#f8fafc",color:"#334155",fontWeight:500,border:"1px solid #e2e8f0",maxWidth:140,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",transition:"all 0.15s ease","&:hover":{backgroundColor:"#e2e8f0",transform:"translateY(-1px)"}},title:g(e),children:g(e)},"string"==typeof e?e:(null==e?void 0:e.serviceId)||(null==e?void 0:e.id)||(null==e?void 0:e.name)||(null==e?void 0:e.serviceName)||t)):s&&!h?R.jsx(Pe,{variant:"text",width:120}):R.jsx(_,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:"No services"})})]}),R.jsxs(M,{children:[R.jsx(_,{variant:"subtitle2",sx:{mb:1,fontWeight:600,fontSize:"0.875rem",color:"text.primary"},children:"Logic Modules"}),R.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Array.isArray(b.logicModules)&&b.logicModules.length>0?b.logicModules.map((e,t)=>R.jsx(Ae,{sx:{color:"#1565c0",backgroundColor:"#e3f2fd",border:"1px solid #bbdefb",fontWeight:500,transition:"all 0.15s ease","&:hover":{backgroundColor:"#bbdefb",transform:"translateY(-1px)"}},children:"string"==typeof e?e:String(e)},e||t)):R.jsx(_,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:"No logic modules"})})]}),R.jsx(M,{sx:{flexGrow:1}}),R.jsxs(M,{sx:{display:"flex",justifyContent:"flex-end",gap:.5,pt:1},onClick:e=>e.stopPropagation(),children:[R.jsx(Fe,{title:d?"Loading calendar details...":c?"Edit":"Loading complete data required for editing...",placement:"top",children:R.jsx("span",{children:R.jsx(I,{size:"small",disabled:!c,onClick:()=>r&&c&&r(t),sx:{color:c?"text.secondary":"text.disabled",p:1,borderRadius:1.5,transition:"all 0.15s ease","&:hover":c?{color:"primary.main",backgroundColor:"primary.50"}:{},"&.Mui-disabled":{color:"text.disabled"}},children:R.jsx(Ne,{style:{fontSize:18}})})})}),R.jsx(Fe,{title:"Share",placement:"top",children:R.jsx(I,{size:"small",onClick:e=>{e.stopPropagation(),a&&a(t)},sx:{color:"text.secondary",p:1,borderRadius:1.5,transition:"all 0.15s ease","&:hover":{color:"info.main",backgroundColor:"info.50"}},children:R.jsx(tt,{style:{fontSize:18}})})}),R.jsx(Fe,{title:"Preview",placement:"top",children:R.jsx(I,{size:"small",onClick:e=>{e.stopPropagation(),i&&i(t)},sx:{color:"text.secondary",p:1,borderRadius:1.5,transition:"all 0.15s ease","&:hover":{color:"success.main",backgroundColor:"success.50"}},children:R.jsx(Je,{style:{fontSize:18}})})})]})]})})};Dt.propTypes={calendar:A.shape({name:A.string,title:A.string,availableServices:A.array,rules:A.array,createdDate:A.oneOfType([A.string,A.instanceOf(Date)]),createdOn:A.oneOfType([A.string,A.instanceOf(Date)])}),sx:A.object,onEdit:A.func,onShare:A.func,onPreview:A.func,onDelete:A.func,serviceMap:A.object,servicesLoading:A.bool,isFullDataLoaded:A.bool,isLoadingFullData:A.bool};const Pt=({icon:e,title:t,subtitle:n})=>R.jsxs(M,{sx:{mb:2,textAlign:"left"},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[R.jsx(e,{size:24,style:{color:"#3b82f6"}}),R.jsx(_,{variant:"h5",sx:{fontWeight:600,color:"#1f2937",fontSize:"1.5rem"},children:t})]}),n&&R.jsx(_,{variant:"body1",sx:{color:"#6b7280",fontSize:"0.95rem",lineHeight:1.6,mt:.5,ml:0},children:n})]});Pt.propTypes={icon:A.elementType.isRequired,title:A.string.isRequired,subtitle:A.string};const Ft=({service:e,checkedService:t,onToggleService:n,checkedScanTypes:r,onToggleScanType:a,viewOnly:i=!1})=>{var o;return R.jsxs(D,{variant:"outlined",sx:{padding:"20px",borderRadius:"12px",border:"1.5px solid #e5e7eb",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)",backgroundColor:"#fff",width:"100%",maxWidth:"100%",minWidth:0,overflow:"hidden",display:"flex",flexDirection:"column",flex:1,height:"100%",transition:"box-shadow 0.35s cubic-bezier(.4,0,.2,1), border-color 0.35s cubic-bezier(.4,0,.2,1), transform 0.35s cubic-bezier(.4,0,.2,1)",cursor:"pointer","&:hover":{boxShadow:"0 16px 48px 0 rgba(60,72,88,0.30)",borderColor:"#2563eb",transform:"translateY(-2px)"},"&:active":{boxShadow:"0 4px 12px 0 rgba(60,72,88,0.12)",borderColor:"#3b82f6"}},children:[R.jsx(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,minWidth:0},children:R.jsx(qe,{checked:t,onChange:()=>n(),boxSize:22,marginTop:3,sx:{minWidth:0,flex:1},disabled:i,label:R.jsxs(M,{sx:{minWidth:0,flex:1},children:[R.jsx(_,{sx:{fontWeight:700,wordBreak:"break-word",overflowWrap:"anywhere"},children:e.serviceName}),e.description&&R.jsx(Oe,{title:e.description,children:R.jsx(_,{variant:"caption",sx:{color:"#6b7280",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",lineHeight:1.2,maxHeight:"2.4em"},children:e.description})})]})})}),R.jsx(P,{sx:{mb:1}}),R.jsx(Te,{maxHeight:200,sx:{display:"flex",flexDirection:"column",gap:1,minWidth:0},children:(null==(o=e.scanTypes)?void 0:o.length)>0?e.scanTypes.map(t=>R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",columnGap:1,minWidth:0},children:[R.jsx(qe,{checked:r.includes(t.scanTypeId),onChange:()=>a(e,t),disabled:i,label:R.jsx(_,{sx:{fontWeight:600,mr:2,whiteSpace:"normal",wordBreak:"break-word",overflowWrap:"anywhere"},children:t.name}),marginTop:3}),R.jsx(M,{sx:{ml:1,whiteSpace:"nowrap",justifySelf:"end"},children:R.jsxs(Ae,{color:"#666",backgroundColor:"#f5f5f5",px:.5,py:.25,children:[t.durationMinutes,"m"]})})]},t.scanTypeId)):R.jsx(_,{variant:"body2",sx:{color:"#9ca3af"},children:"No scan types for this service."})})]})},Nt=({formikProps:t,clinicId:n,services:r=[],loading:a=!1,error:i=null,viewOnly:o=!1})=>{const l=t.values.selectedScanTypeIds||[],s=e.useMemo(()=>Array.isArray(r)?r:[],[r]),c=e=>{const t=(e.scanTypes||[]).map(e=>e.scanTypeId);return 0!==t.length&&t.every(e=>l.includes(e))},d=(e,n)=>{const r=new Set(l);r.has(n.scanTypeId)?r.delete(n.scanTypeId):r.add(n.scanTypeId),t.setFieldValue("selectedScanTypeIds",Array.from(r))};return R.jsxs(M,{children:[R.jsx(Pt,{icon:O,title:"Available Services",subtitle:"Select which services and scan types patients can book through this calendar"}),a?R.jsx(M,{sx:{display:"flex",justifyContent:"center",py:6},children:R.jsx(T,{})}):i?R.jsx(_,{color:"error",children:i}):0===s.length?R.jsx(_,{sx:{color:"#6b7280",py:6},children:"No services available for this clinic"}):R.jsxs(M,{sx:{mt:2,display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)"},gap:{xs:2,md:2},alignItems:"stretch"},children:[void 0===t.values.selectedScanTypeIds&&t.setFieldValue("selectedScanTypeIds",[]),s.map(e=>R.jsx(M,{sx:{minWidth:0,display:"flex",flexDirection:"column"},children:R.jsx(Ft,{service:e,checkedService:c(e),onToggleService:()=>(e=>{const n=(e.scanTypes||[]).map(e=>e.scanTypeId),r=new Set(l);n.every(e=>r.has(e))?n.forEach(e=>r.delete(e)):n.forEach(e=>r.add(e));const a=Array.from(r);t.setFieldValue("selectedScanTypeIds",a)})(e),checkedScanTypes:l,onToggleScanType:d,viewOnly:o},e.serviceId)},e.serviceId))]})]})};Nt.propTypes={formikProps:A.object.isRequired,clinicId:A.oneOfType([A.string,A.number]),services:A.array,loading:A.bool,error:A.oneOfType([A.string,A.bool,A.object]),viewOnly:A.bool};const zt=({formikProps:t,viewOnly:n=!1})=>{const[r,a]=e.useState(null),[i,o]=e.useState(null),l=e.useRef();e.useEffect(()=>{t.values.logoUrl&&!r&&o(t.values.logoUrl)},[t.values.logoUrl,r]);const s=()=>{var e;n||null==(e=l.current)||e.click()};return R.jsxs(M,{children:[R.jsx(Pt,{icon:F,title:"Basic Information"}),R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 200px"},gap:2,alignItems:"flex-start"},children:[R.jsxs(M,{sx:{gridColumn:"1 / 2"},children:[R.jsx(N,{label:"Calendar Name",required:!0,error:t.touched.calendarName&&t.errors.calendarName,children:R.jsx(z,{fullWidth:!0,size:"small",margin:"dense",placeholder:"e.g. Main Clinic Calendar",value:t.values.calendarName,onChange:t.handleChange,onBlur:t.handleBlur,name:"calendarName",InputProps:{readOnly:n}})}),R.jsx(N,{label:"Description",children:R.jsx(z,{fullWidth:!0,size:"small",margin:"dense",multiline:!0,minRows:2,maxRows:4,placeholder:"Brief description of this calendar",value:t.values.description,onChange:t.handleChange,name:"description",InputProps:{readOnly:n}})})]}),R.jsx(M,{sx:{width:{xs:"100%",sm:200},gridColumn:{xs:"1 / 2",sm:"2 / 3"}},children:R.jsxs(N,{label:"Logo Upload",error:t.touched.logo&&t.errors.logo,children:[R.jsx(M,{onClick:s,sx:{mt:1,width:"100%",height:140,border:"1.5px dashed #d1d5db",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:"transparent",transition:"all 0.3s ease","&:hover":{borderColor:"#3b82f6",backgroundColor:"#eff6ff"}},children:i?R.jsxs(M,{sx:{textAlign:"center",position:"relative",width:"100%",height:"100%"},children:[R.jsx("img",{src:i,alt:"Logo preview",style:{maxWidth:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:"4px"}}),R.jsxs(M,{sx:{position:"absolute",bottom:0,left:0,right:0,display:"flex",gap:.5,justifyContent:"center",p:.5},children:[R.jsx(q,{variant:"outlined",size:"small",sx:{fontSize:"0.75rem",py:.25,px:1,backgroundColor:"white","&:hover":{backgroundColor:"#3b82f6",color:"white"}},onClick:e=>{e.stopPropagation(),s()},children:"Change"}),R.jsx(q,{variant:"outlined",size:"small",color:"error",sx:{fontSize:"0.75rem",py:.25,px:1,backgroundColor:"white","&:hover":{backgroundColor:"#ef4444",color:"white",borderColor:"#ef4444"}},onClick:e=>{e.stopPropagation(),a(null),o(null),t.setFieldValue("logo",null),t.setFieldValue("logoUrl",null)},children:"Remove"})]})]}):R.jsxs(R.Fragment,{children:[R.jsx(H,{size:28,color:"#9ca3af"}),R.jsx(_,{variant:"body2",sx:{mt:1.5,textAlign:"center",color:"#6b7280"},children:"Click to upload logo"}),R.jsx(_,{variant:"caption",sx:{color:"#9ca3af",textAlign:"center"},children:"PNG, JPG, GIF up to 5MB"})]})}),R.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:e=>{const n=e.target.files[0];if(n){if(t.setFieldError("logo",""),!n.type.startsWith("image/"))return t.setFieldError("logo","Please select an image file"),void t.setFieldTouched("logo",!0,!1);if(n.size>5242880)return t.setFieldError("logo","File size should be less than 5MB"),void t.setFieldTouched("logo",!0,!1);a(n),t.setFieldValue("logo",n);const e=new FileReader;e.onload=e=>{o(e.target.result)},e.readAsDataURL(n)}},style:{display:"none"}})]})}),R.jsxs(M,{sx:{gridColumn:"1 / 3"},children:[R.jsx(N,{label:"Welcome Message",children:R.jsx(z,{fullWidth:!0,size:"small",margin:"dense",multiline:!0,minRows:2,maxRows:4,placeholder:"Welcome! Please select your preferred appointment time.",value:t.values.welcomeMessage,onChange:t.handleChange,name:"welcomeMessage",InputProps:{readOnly:n}})}),R.jsx(N,{label:"Thank You Message",children:R.jsx(z,{fullWidth:!0,size:"small",margin:"dense",multiline:!0,minRows:2,maxRows:4,placeholder:"Thank you for booking with us. We look forward to seeing you!",value:t.values.thankYouMessage,onChange:t.handleChange,name:"thankYouMessage",InputProps:{readOnly:n}})})]})]})]})};zt.propTypes={formikProps:A.object.isRequired,viewOnly:A.bool};var qt,Ht,Lt,Wt,Gt,Vt,$t,Ut,Xt,Yt,Kt,Jt,Zt,Qt,en,tn,nn,rn,an,on,ln,sn,cn,dn,un,pn,fn,hn,bn={},gn={};function xn(){if(Ht)return qt;Ht=1;var e="object"==typeof window&&window&&window.Object===Object&&window;return qt=e}function mn(){if(Wt)return Lt;Wt=1;var e=xn(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Lt=n}function vn(){if(Vt)return Gt;Vt=1;var e=mn().Symbol;return Gt=e}function yn(){if(Jt)return Kt;Jt=1;var e=vn(),t=function(){if(Ut)return $t;Ut=1;var e=vn(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,a=e?e.toStringTag:void 0;return $t=function(e){var t=n.call(e,a),i=e[a];try{e[a]=void 0;var o=!0}catch(s){}var l=r.call(e);return o&&(t?e[a]=i:delete e[a]),l}}(),n=function(){if(Yt)return Xt;Yt=1;var e=Object.prototype.toString;return Xt=function(t){return e.call(t)}}(),r=e?e.toStringTag:void 0;return Kt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function wn(){if(Qt)return Zt;Qt=1;var e=Array.isArray;return Zt=e}function Sn(){if(tn)return en;return tn=1,en=function(e){return null!=e&&"object"==typeof e}}function jn(){if(sn)return ln;sn=1;var e=(on?an:(on=1,an=function(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var s=o[e?l:++a];if(!1===n(i[s],s,i))break}return t}}))();return ln=e}function Cn(){if(hn)return fn;hn=1;var e=function(){if(pn)return un;pn=1;var e=yn(),t=Sn();return un=function(n){return t(n)&&"[object Arguments]"==e(n)}}(),t=Sn(),n=Object.prototype,r=n.hasOwnProperty,a=n.propertyIsEnumerable,i=e(function(){return arguments}())?e:function(e){return t(e)&&r.call(e,"callee")&&!a.call(e,"callee")};return fn=i}var En,kn,Rn,Bn,Mn,_n,In,An,On,Tn,Dn,Pn={exports:{}};function Fn(){return Rn||(Rn=1,e=Pn,t=Pn.exports,n=mn(),r=kn?En:(kn=1,En=function(){return!1}),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||r,e.exports=l),Pn.exports;var e,t,n,r,a,i,o,l}function Nn(){if(Mn)return Bn;Mn=1;var e=/^(?:0|[1-9]\d*)$/;return Bn=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}}function zn(){if(In)return _n;In=1;return _n=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function qn(){if(Dn)return Tn;return Dn=1,Tn=function(e){return function(t){return e(t)}}}var Hn,Ln,Wn,Gn,Vn,$n,Un,Xn,Yn,Kn,Jn,Zn,Qn,er,tr,nr,rr,ar,ir,or,lr,sr,cr,dr,ur,pr,fr,hr,br,gr,xr,mr,vr,yr,wr,Sr,jr,Cr,Er,kr,Rr,Br,Mr,_r,Ir,Ar,Or,Tr,Dr,Pr,Fr,Nr,zr,qr,Hr,Lr,Wr,Gr,Vr,$r,Ur,Xr,Yr,Kr,Jr,Zr,Qr,ea,ta,na,ra,aa,ia,oa,la,sa,ca,da,ua,pa,fa,ha,ba,ga,xa,ma,va,ya,wa,Sa,ja,Ca,Ea,ka,Ra,Ba,Ma,_a,Ia,Aa,Oa,Ta,Da,Pa,Fa,Na,za,qa,Ha,La,Wa,Ga,Va,$a,Ua,Xa,Ya,Ka,Ja,Za,Qa,ei,ti,ni,ri,ai,ii,oi,li,si,ci,di,ui,pi,fi,hi,bi,gi,xi,mi,vi,yi,wi,Si,ji,Ci,Ei,ki,Ri,Bi,Mi,_i,Ii,Ai,Oi,Ti,Di,Pi,Fi,Ni,zi,qi,Hi,Li,Wi,Gi,Vi,$i,Ui,Xi,Yi,Ki,Ji,Zi,Qi,eo,to,no,ro,ao,io,oo,lo,so,co,uo,po,fo,ho,bo,go,xo,mo,vo,yo,wo,So,jo,Co,Eo,ko,Ro,Bo,Mo,_o,Io,Ao,Oo,To,Do,Po,Fo,No={exports:{}};function zo(){return Hn||(Hn=1,e=No,t=No.exports,n=xn(),r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,i=a&&a.exports===r&&n.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}(),e.exports=o),No.exports;var e,t,n,r,a,i,o}function qo(){if(Wn)return Ln;Wn=1;var e=function(){if(On)return An;On=1;var e=yn(),t=zn(),n=Sn(),r={};return r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,An=function(a){return n(a)&&t(a.length)&&!!r[e(a)]}}(),t=qn(),n=zo(),r=n&&n.isTypedArray,a=r?t(r):e;return Ln=a}function Ho(){if(Vn)return Gn;Vn=1;var e=dn?cn:(dn=1,cn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}),t=Cn(),n=wn(),r=Fn(),a=Nn(),i=qo(),o=Object.prototype.hasOwnProperty;return Gn=function(l,s){var c=n(l),d=!c&&t(l),u=!c&&!d&&r(l),p=!c&&!d&&!u&&i(l),f=c||d||u||p,h=f?e(l.length,String):[],b=h.length;for(var g in l)!s&&!o.call(l,g)||f&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,b))||h.push(g);return h}}function Lo(){if(Un)return $n;Un=1;var e=Object.prototype;return $n=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}}function Wo(){if(Yn)return Xn;return Yn=1,Xn=function(e,t){return function(n){return e(t(n))}}}function Go(){if(Qn)return Zn;Qn=1;var e=Lo(),t=function(){if(Jn)return Kn;Jn=1;var e=Wo()(Object.keys,Object);return Kn=e}(),n=Object.prototype.hasOwnProperty;return Zn=function(r){if(!e(r))return t(r);var a=[];for(var i in Object(r))n.call(r,i)&&"constructor"!=i&&a.push(i);return a}}function Vo(){if(tr)return er;return tr=1,er=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function $o(){if(rr)return nr;rr=1;var e=yn(),t=Vo();return nr=function(n){if(!t(n))return!1;var r=e(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}}function Uo(){if(ir)return ar;ir=1;var e=$o(),t=zn();return ar=function(n){return null!=n&&t(n.length)&&!e(n)}}function Xo(){if(lr)return or;lr=1;var e=Ho(),t=Go(),n=Uo();return or=function(r){return n(r)?e(r):t(r)}}function Yo(){if(cr)return sr;cr=1;var e=jn(),t=Xo();return sr=function(n,r){return n&&e(n,r,t)}}function Ko(){if(ur)return dr;return ur=1,dr=function(e){return e}}function Jo(){if(br)return hr;br=1;var e=Yo(),t=function(){if(fr)return pr;fr=1;var e=Ko();return pr=function(t){return"function"==typeof t?t:e}}();return hr=function(n,r){return n&&e(n,t(r))}}function Zo(){if(xr)return gr;xr=1;var e=Wo()(Object.getPrototypeOf,Object);return gr=e}function Qo(){if(wr)return yr;return wr=1,yr=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}}function el(){if(Er)return Cr;return Er=1,Cr=function(e,t){return e===t||e!=e&&t!=t}}function tl(){if(Rr)return kr;Rr=1;var e=el();return kr=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}}function nl(){if(Fr)return Pr;Fr=1;var e=jr?Sr:(jr=1,Sr=function(){this.__data__=[],this.size=0}),t=function(){if(Mr)return Br;Mr=1;var e=tl(),t=Array.prototype.splice;return Br=function(n){var r=this.__data__,a=e(r,n);return!(a<0||(a==r.length-1?r.pop():t.call(r,a,1),--this.size,0))}}(),n=function(){if(Ir)return _r;Ir=1;var e=tl();return _r=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}}(),r=function(){if(Or)return Ar;Or=1;var e=tl();return Ar=function(t){return e(this.__data__,t)>-1}}(),a=function(){if(Dr)return Tr;Dr=1;var e=tl();return Tr=function(t,n){var r=this.__data__,a=e(r,t);return a<0?(++this.size,r.push([t,n])):r[a][1]=n,this}}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,Pr=i}function rl(){if(Yr)return Xr;Yr=1;var e,t=function(){if(Ur)return $r;Ur=1;var e=mn()["__core-js_shared__"];return $r=e}(),n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return Xr=function(e){return!!n&&n in e}}function al(){if(Jr)return Kr;Jr=1;var e=Function.prototype.toString;return Kr=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}}function il(){if(ra)return na;ra=1;var e=function(){if(Qr)return Zr;Qr=1;var e=$o(),t=rl(),n=Vo(),r=al(),a=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,l=i.toString,s=o.hasOwnProperty,c=RegExp("^"+l.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Zr=function(i){return!(!n(i)||t(i))&&(e(i)?c:a).test(r(i))}}(),t=ta?ea:(ta=1,ea=function(e,t){return null==e?void 0:e[t]});return na=function(n,r){var a=t(n,r);return e(a)?a:void 0}}function ol(){if(ia)return aa;ia=1;var e=il()(mn(),"Map");return aa=e}function ll(){if(la)return oa;la=1;var e=il()(Object,"create");return oa=e}function sl(){if(va)return ma;va=1;var e=function(){if(ca)return sa;ca=1;var e=ll();return sa=function(){this.__data__=e?e(null):{},this.size=0}}(),t=ua?da:(ua=1,da=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),n=function(){if(fa)return pa;fa=1;var e=ll(),t=Object.prototype.hasOwnProperty;return pa=function(n){var r=this.__data__;if(e){var a=r[n];return"__lodash_hash_undefined__"===a?void 0:a}return t.call(r,n)?r[n]:void 0}}(),r=function(){if(ba)return ha;ba=1;var e=ll(),t=Object.prototype.hasOwnProperty;return ha=function(n){var r=this.__data__;return e?void 0!==r[n]:t.call(r,n)}}(),a=function(){if(xa)return ga;xa=1;var e=ll();return ga=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this}}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,ma=i}function cl(){if(Ea)return Ca;Ea=1;var e=ja?Sa:(ja=1,Sa=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return Ca=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}}function dl(){if(Da)return Ta;Da=1;var e=function(){if(wa)return ya;wa=1;var e=sl(),t=nl(),n=ol();return ya=function(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}(),t=function(){if(Ra)return ka;Ra=1;var e=cl();return ka=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}}(),n=function(){if(Ma)return Ba;Ma=1;var e=cl();return Ba=function(t){return e(this,t).get(t)}}(),r=function(){if(Ia)return _a;Ia=1;var e=cl();return _a=function(t){return e(this,t).has(t)}}(),a=function(){if(Oa)return Aa;Oa=1;var e=cl();return Aa=function(t,n){var r=e(this,t),a=r.size;return r.set(t,n),this.size+=r.size==a?0:1,this}}();function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=n,i.prototype.has=r,i.prototype.set=a,Ta=i}function ul(){if(za)return Na;za=1;var e=nl(),t=function(){if(zr)return Nr;zr=1;var e=nl();return Nr=function(){this.__data__=new e,this.size=0}}(),n=Hr?qr:(Hr=1,qr=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}),r=Wr?Lr:(Wr=1,Lr=function(e){return this.__data__.get(e)}),a=Vr?Gr:(Vr=1,Gr=function(e){return this.__data__.has(e)}),i=function(){if(Fa)return Pa;Fa=1;var e=nl(),t=ol(),n=dl();return Pa=function(r,a){var i=this.__data__;if(i instanceof e){var o=i.__data__;if(!t||o.length<199)return o.push([r,a]),this.size=++i.size,this;i=this.__data__=new n(o)}return i.set(r,a),this.size=i.size,this}}();function o(t){var n=this.__data__=new e(t);this.size=n.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=a,o.prototype.set=i,Na=o}function pl(){if(Va)return Ga;Va=1;var e=dl(),t=Ha?qa:(Ha=1,qa=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),n=Wa?La:(Wa=1,La=function(e){return this.__data__.has(e)});function r(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new e;++n<r;)this.add(t[n])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Ga=r}function fl(){if(Ja)return Ka;Ja=1;var e=pl(),t=Ua?$a:(Ua=1,$a=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}),n=Ya?Xa:(Ya=1,Xa=function(e,t){return e.has(t)});return Ka=function(r,a,i,o,l,s){var c=1&i,d=r.length,u=a.length;if(d!=u&&!(c&&u>d))return!1;var p=s.get(r),f=s.get(a);if(p&&f)return p==a&&f==r;var h=-1,b=!0,g=2&i?new e:void 0;for(s.set(r,a),s.set(a,r);++h<d;){var x=r[h],m=a[h];if(o)var v=c?o(m,x,h,a,r,s):o(x,m,h,r,a,s);if(void 0!==v){if(v)continue;b=!1;break}if(g){if(!t(a,function(e,t){if(!n(g,t)&&(x===e||l(x,e,i,o,s)))return g.push(t)})){b=!1;break}}else if(x!==m&&!l(x,m,i,o,s)){b=!1;break}}return s.delete(r),s.delete(a),b}}function hl(){if(Qa)return Za;Qa=1;var e=mn().Uint8Array;return Za=e}function bl(){if(ii)return ai;ii=1;var e=vn(),t=hl(),n=el(),r=fl(),a=ti?ei:(ti=1,ei=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}),i=ri?ni:(ri=1,ni=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}),o=e?e.prototype:void 0,l=o?o.valueOf:void 0;return ai=function(e,o,s,c,d,u,p){switch(s){case"[object DataView]":if(e.byteLength!=o.byteLength||e.byteOffset!=o.byteOffset)return!1;e=e.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=o.byteLength||!u(new t(e),new t(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+o);case"[object Error]":return e.name==o.name&&e.message==o.message;case"[object RegExp]":case"[object String]":return e==o+"";case"[object Map]":var f=a;case"[object Set]":var h=1&c;if(f||(f=i),e.size!=o.size&&!h)return!1;var b=p.get(e);if(b)return b==o;c|=2,p.set(e,o);var g=r(f(e),f(o),c,d,u,p);return p.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(o)}return!1}}function gl(){if(li)return oi;return li=1,oi=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}}function xl(){if(ci)return si;ci=1;var e=gl(),t=wn();return si=function(n,r,a){var i=r(n);return t(n)?i:e(i,a(n))}}function ml(){if(fi)return pi;return fi=1,pi=function(){return[]}}function vl(){if(bi)return hi;bi=1;var e=ui?di:(ui=1,di=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}),t=ml(),n=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols;return hi=r?function(t){return null==t?[]:(t=Object(t),e(r(t),function(e){return n.call(t,e)}))}:t}function yl(){if(xi)return gi;xi=1;var e=xl(),t=vl(),n=Xo();return gi=function(r){return e(r,n,t)}}function wl(){if(Mi)return Bi;Mi=1;var e=function(){if(wi)return yi;wi=1;var e=il()(mn(),"DataView");return yi=e}(),t=ol(),n=function(){if(ji)return Si;ji=1;var e=il()(mn(),"Promise");return Si=e}(),r=function(){if(Ei)return Ci;Ei=1;var e=il()(mn(),"Set");return Ci=e}(),a=function(){if(Ri)return ki;Ri=1;var e=il()(mn(),"WeakMap");return ki=e}(),i=yn(),o=al(),l="[object Map]",s="[object Promise]",c="[object Set]",d="[object WeakMap]",u="[object DataView]",p=o(e),f=o(t),h=o(n),b=o(r),g=o(a),x=i;return(e&&x(new e(new ArrayBuffer(1)))!=u||t&&x(new t)!=l||n&&x(n.resolve())!=s||r&&x(new r)!=c||a&&x(new a)!=d)&&(x=function(e){var t=i(e),n="[object Object]"==t?e.constructor:void 0,r=n?o(n):"";if(r)switch(r){case p:return u;case f:return l;case h:return s;case b:return c;case g:return d}return t}),Bi=x}function Sl(){if(Ii)return _i;Ii=1;var e=ul(),t=fl(),n=bl(),r=function(){if(vi)return mi;vi=1;var e=yl(),t=Object.prototype.hasOwnProperty;return mi=function(n,r,a,i,o,l){var s=1&a,c=e(n),d=c.length;if(d!=e(r).length&&!s)return!1;for(var u=d;u--;){var p=c[u];if(!(s?p in r:t.call(r,p)))return!1}var f=l.get(n),h=l.get(r);if(f&&h)return f==r&&h==n;var b=!0;l.set(n,r),l.set(r,n);for(var g=s;++u<d;){var x=n[p=c[u]],m=r[p];if(i)var v=s?i(m,x,p,r,n,l):i(x,m,p,n,r,l);if(!(void 0===v?x===m||o(x,m,a,i,l):v)){b=!1;break}g||(g="constructor"==p)}if(b&&!g){var y=n.constructor,w=r.constructor;y==w||!("constructor"in n)||!("constructor"in r)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(b=!1)}return l.delete(n),l.delete(r),b}}(),a=wl(),i=wn(),o=Fn(),l=qo(),s="[object Arguments]",c="[object Array]",d="[object Object]",u=Object.prototype.hasOwnProperty;return _i=function(p,f,h,b,g,x){var m=i(p),v=i(f),y=m?c:a(p),w=v?c:a(f),S=(y=y==s?d:y)==d,j=(w=w==s?d:w)==d,C=y==w;if(C&&o(p)){if(!o(f))return!1;m=!0,S=!1}if(C&&!S)return x||(x=new e),m||l(p)?t(p,f,h,b,g,x):n(p,f,y,h,b,g,x);if(!(1&h)){var E=S&&u.call(p,"__wrapped__"),k=j&&u.call(f,"__wrapped__");if(E||k){var R=E?p.value():p,B=k?f.value():f;return x||(x=new e),g(R,B,h,b,x)}}return!!C&&(x||(x=new e),r(p,f,h,b,g,x))}}function jl(){if(Oi)return Ai;Oi=1;var e=Sl(),t=Sn();return Ai=function n(r,a,i,o,l){return r===a||(null==r||null==a||!t(r)&&!t(a)?r!=r&&a!=a:e(r,a,i,o,n,l))},Ai}function Cl(){if(Fi)return Pi;Fi=1;var e=Vo();return Pi=function(t){return t==t&&!e(t)}}function El(){if(Hi)return qi;return Hi=1,qi=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}}function kl(){if(Wi)return Li;Wi=1;var e=function(){if(Di)return Ti;Di=1;var e=ul(),t=jl();return Ti=function(n,r,a,i){var o=a.length,l=o,s=!i;if(null==n)return!l;for(n=Object(n);o--;){var c=a[o];if(s&&c[2]?c[1]!==n[c[0]]:!(c[0]in n))return!1}for(;++o<l;){var d=(c=a[o])[0],u=n[d],p=c[1];if(s&&c[2]){if(void 0===u&&!(d in n))return!1}else{var f=new e;if(i)var h=i(u,p,d,n,r,f);if(!(void 0===h?t(p,u,3,i,f):h))return!1}}return!0}}(),t=function(){if(zi)return Ni;zi=1;var e=Cl(),t=Xo();return Ni=function(n){for(var r=t(n),a=r.length;a--;){var i=r[a],o=n[i];r[a]=[i,o,e(o)]}return r}}(),n=El();return Li=function(r){var a=t(r);return 1==a.length&&a[0][2]?n(a[0][0],a[0][1]):function(t){return t===r||e(t,r,a)}}}function Rl(){if(Vi)return Gi;Vi=1;var e=yn(),t=Sn();return Gi=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}function Bl(){if(Ui)return $i;Ui=1;var e=wn(),t=Rl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;return $i=function(a,i){if(e(a))return!1;var o=typeof a;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=a&&!t(a))||(r.test(a)||!n.test(a)||null!=i&&a in Object(i))}}function Ml(){if(Ji)return Ki;Ji=1;var e=function(){if(Yi)return Xi;Yi=1;var e=dl();function t(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var a=function(){var e=arguments,t=r?r.apply(this,e):e[0],i=a.cache;if(i.has(t))return i.get(t);var o=n.apply(this,e);return a.cache=i.set(t,o)||i,o};return a.cache=new(t.Cache||e),a}return t.Cache=e,Xi=t}();return Ki=function(t){var n=e(t,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n}}function _l(){if(ro)return no;ro=1;var e=function(){if(to)return eo;to=1;var e=vn(),t=Qo(),n=wn(),r=Rl(),a=e?e.prototype:void 0,i=a?a.toString:void 0;return eo=function e(a){if("string"==typeof a)return a;if(n(a))return t(a,e)+"";if(r(a))return i?i.call(a):"";var o=a+"";return"0"==o&&1/a==-1/0?"-0":o},eo}();return no=function(t){return null==t?"":e(t)}}function Il(){if(io)return ao;io=1;var e=wn(),t=Bl(),n=function(){if(Qi)return Zi;Qi=1;var e=Ml(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(t,function(e,t,a,i){r.push(a?i.replace(n,"$1"):t||e)}),r});return Zi=r}(),r=_l();return ao=function(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}}function Al(){if(lo)return oo;lo=1;var e=Rl();return oo=function(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}}function Ol(){if(co)return so;co=1;var e=Il(),t=Al();return so=function(n,r){for(var a=0,i=(r=e(r,n)).length;null!=n&&a<i;)n=n[t(r[a++])];return a&&a==i?n:void 0}}function Tl(){if(mo)return xo;mo=1;var e=ho?fo:(ho=1,fo=function(e,t){return null!=e&&t in Object(e)}),t=function(){if(go)return bo;go=1;var e=Il(),t=Cn(),n=wn(),r=Nn(),a=zn(),i=Al();return bo=function(o,l,s){for(var c=-1,d=(l=e(l,o)).length,u=!1;++c<d;){var p=i(l[c]);if(!(u=null!=o&&s(o,p)))break;o=o[p]}return u||++c!=d?u:!!(d=null==o?0:o.length)&&a(d)&&r(p,d)&&(n(o)||t(o))}}();return xo=function(n,r){return null!=n&&t(n,r,e)}}function Dl(){if(yo)return vo;yo=1;var e=jl(),t=function(){if(po)return uo;po=1;var e=Ol();return uo=function(t,n,r){var a=null==t?void 0:e(t,n);return void 0===a?r:a}}(),n=Tl(),r=Bl(),a=Cl(),i=El(),o=Al();return vo=function(l,s){return r(l)&&a(s)?i(o(l),s):function(r){var a=t(r,l);return void 0===a&&a===s?n(r,l):e(s,a,3)}}}function Pl(){if(ko)return Eo;ko=1;var e=So?wo:(So=1,wo=function(e){return function(t){return null==t?void 0:t[e]}}),t=function(){if(Co)return jo;Co=1;var e=Ol();return jo=function(t){return function(n){return e(n,t)}}}(),n=Bl(),r=Al();return Eo=function(a){return n(a)?e(r(a)):t(a)}}function Fl(){if(Ao)return Io;Ao=1;var e=Yo(),t=function(){if(_o)return Mo;_o=1;var e=Uo();return Mo=function(t,n){return function(r,a){if(null==r)return r;if(!e(r))return t(r,a);for(var i=r.length,o=n?i:-1,l=Object(r);(n?o--:++o<i)&&!1!==a(l[o],o,l););return r}},Mo}(),n=t(e);return Io=n}function Nl(){if(Po)return Do;Po=1;var e=Qo(),t=function(){if(Bo)return Ro;Bo=1;var e=kl(),t=Dl(),n=Ko(),r=wn(),a=Pl();return Ro=function(i){return"function"==typeof i?i:null==i?n:"object"==typeof i?r(i)?t(i[0],i[1]):e(i):a(i)}}(),n=function(){if(To)return Oo;To=1;var e=Fl(),t=Uo();return Oo=function(n,r){var a=-1,i=t(n)?Array(n.length):[];return e(n,function(e,t,n){i[++a]=r(e,t,n)}),i}}(),r=wn();return Do=function(a,i){return(r(a)?e:n)(a,t(i,3))}}function zl(){if(Fo)return gn;Fo=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.flattenNames=void 0;var e=a(function(){if(rn)return nn;rn=1;var e=yn(),t=wn(),n=Sn();return nn=function(r){return"string"==typeof r||!t(r)&&n(r)&&"[object String]"==e(r)}}()),t=a(Jo()),n=a(function(){if(vr)return mr;vr=1;var e=yn(),t=Zo(),n=Sn(),r=Function.prototype,a=Object.prototype,i=r.toString,o=a.hasOwnProperty,l=i.call(Object);return mr=function(r){if(!n(r)||"[object Object]"!=e(r))return!1;var a=t(r);if(null===a)return!0;var s=o.call(a,"constructor")&&a.constructor;return"function"==typeof s&&s instanceof s&&i.call(s)==l}}()),r=a(Nl());function a(e){return e&&e.__esModule?e:{default:e}}var i=gn.flattenNames=function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=[];return(0,r.default)(i,function(r){Array.isArray(r)?a(r).map(function(e){return o.push(e)}):(0,n.default)(r)?(0,t.default)(r,function(e,t){!0===e&&o.push(t),o.push(t+"-"+e)}):(0,e.default)(r)&&o.push(r)}),o};return gn.default=i,gn}var ql,Hl,Ll,Wl,Gl,Vl,$l,Ul,Xl,Yl,Kl,Jl,Zl,Ql,es,ts,ns,rs,as,is,os={};function ls(){if(Vl)return Gl;Vl=1;var e=function(){if(Wl)return Ll;Wl=1;var e=il(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(n){}}();return Ll=t}();return Gl=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}}function ss(){if(Ul)return $l;Ul=1;var e=ls(),t=el(),n=Object.prototype.hasOwnProperty;return $l=function(r,a,i){var o=r[a];n.call(r,a)&&t(o,i)&&(void 0!==i||a in r)||e(r,a,i)}}function cs(){if(Yl)return Xl;Yl=1;var e=ss(),t=ls();return Xl=function(n,r,a,i){var o=!a;a||(a={});for(var l=-1,s=r.length;++l<s;){var c=r[l],d=i?i(a[c],n[c],c,a,n):void 0;void 0===d&&(d=n[c]),o?t(a,c,d):e(a,c,d)}return a}}function ds(){if(ts)return es;ts=1;var e=Vo(),t=Lo(),n=Ql?Zl:(Ql=1,Zl=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}),r=Object.prototype.hasOwnProperty;return es=function(a){if(!e(a))return n(a);var i=t(a),o=[];for(var l in a)("constructor"!=l||!i&&r.call(a,l))&&o.push(l);return o}}function us(){if(rs)return ns;rs=1;var e=Ho(),t=ds(),n=Uo();return ns=function(r){return n(r)?e(r,!0):t(r)}}var ps,fs,hs,bs,gs,xs,ms,vs,ys,ws,Ss,js,Cs,Es,ks,Rs,Bs,Ms,_s,Is,As,Os,Ts,Ds,Ps,Fs,Ns,zs,qs,Hs,Ls,Ws,Gs,Vs,$s,Us,Xs,Ys,Ks,Js,Zs,Qs,ec={exports:{}};function tc(){if(ms)return xs;ms=1;var e=gl(),t=Zo(),n=vl(),r=ml(),a=Object.getOwnPropertySymbols;return xs=a?function(r){for(var a=[];r;)e(a,n(r)),r=t(r);return a}:r}function nc(){if(ks)return Es;ks=1;var e=hl();return Es=function(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}}function rc(){if(Ps)return Ds;Ps=1;var e=nc(),t=function(){if(Bs)return Rs;Bs=1;var e=nc();return Rs=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}}(),n=function(){if(_s)return Ms;_s=1;var e=/\w*$/;return Ms=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}}(),r=function(){if(As)return Is;As=1;var e=vn(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;return Is=function(e){return n?Object(n.call(e)):{}}}(),a=function(){if(Ts)return Os;Ts=1;var e=nc();return Os=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}}();return Ds=function(i,o,l){var s=i.constructor;switch(o){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return t(i,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(i,l);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return n(i);case"[object Symbol]":return r(i)}}}function ac(){if(qs)return zs;qs=1;var e=function(){if(Ns)return Fs;Ns=1;var e=Vo(),t=Object.create;return Fs=function(){function n(){}return function(r){if(!e(r))return{};if(t)return t(r);n.prototype=r;var a=new n;return n.prototype=void 0,a}}()}(),t=Zo(),n=Lo();return zs=function(r){return"function"!=typeof r.constructor||n(r)?{}:e(t(r))}}function ic(){if(Gs)return Ws;Gs=1;var e=function(){if(Ls)return Hs;Ls=1;var e=wl(),t=Sn();return Hs=function(n){return t(n)&&"[object Map]"==e(n)}}(),t=qn(),n=zo(),r=n&&n.isMap,a=r?t(r):e;return Ws=a}function oc(){if(Xs)return Us;Xs=1;var e=function(){if($s)return Vs;$s=1;var e=wl(),t=Sn();return Vs=function(n){return t(n)&&"[object Set]"==e(n)}}(),t=qn(),n=zo(),r=n&&n.isSet,a=r?t(r):e;return Us=a}function lc(){if(Ks)return Ys;Ks=1;var e,t,n,r,a,i,o,l=ul(),s=Hl?ql:(Hl=1,ql=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}),c=ss(),d=function(){if(Jl)return Kl;Jl=1;var e=cs(),t=Xo();return Kl=function(n,r){return n&&e(r,t(r),n)}}(),u=function(){if(is)return as;is=1;var e=cs(),t=us();return as=function(n,r){return n&&e(r,t(r),n)}}(),p=(ps||(ps=1,e=ec,t=ec.exports,n=mn(),r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,i=a&&a.exports===r?n.Buffer:void 0,o=i?i.allocUnsafe:void 0,e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}),ec.exports),f=hs?fs:(hs=1,fs=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}),h=function(){if(gs)return bs;gs=1;var e=cs(),t=vl();return bs=function(n,r){return e(n,t(n),r)}}(),b=function(){if(ys)return vs;ys=1;var e=cs(),t=tc();return vs=function(n,r){return e(n,t(n),r)}}(),g=yl(),x=function(){if(Ss)return ws;Ss=1;var e=xl(),t=tc(),n=us();return ws=function(r){return e(r,n,t)}}(),m=wl(),v=function(){if(Cs)return js;Cs=1;var e=Object.prototype.hasOwnProperty;return js=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}}(),y=rc(),w=ac(),S=wn(),j=Fn(),C=ic(),E=Vo(),k=oc(),R=Xo(),B=us(),M="[object Arguments]",_="[object Function]",I="[object Object]",A={};return A[M]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[I]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[_]=A["[object WeakMap]"]=!1,Ys=function e(t,n,r,a,i,o){var O,T=1&n,D=2&n,P=4&n;if(r&&(O=i?r(t,a,i,o):r(t)),void 0!==O)return O;if(!E(t))return t;var F=S(t);if(F){if(O=v(t),!T)return f(t,O)}else{var N=m(t),z=N==_||"[object GeneratorFunction]"==N;if(j(t))return p(t,T);if(N==I||N==M||z&&!i){if(O=D||z?{}:w(t),!T)return D?b(t,u(O,t)):h(t,d(O,t))}else{if(!A[N])return i?t:{};O=y(t,N,T)}}o||(o=new l);var q=o.get(t);if(q)return q;o.set(t,O),k(t)?t.forEach(function(a){O.add(e(a,n,r,a,t,o))}):C(t)&&t.forEach(function(a,i){O.set(i,e(a,n,r,i,t,o))});var H=F?void 0:(P?D?x:g:D?B:R)(t);return s(H||t,function(a,i){H&&(a=t[i=a]),c(O,i,e(a,n,r,i,t,o))}),O},Ys}function sc(){if(Qs)return os;Qs=1,Object.defineProperty(os,"__esModule",{value:!0}),os.mergeClasses=void 0;var e=r(Jo()),t=r(function(){if(Zs)return Js;Zs=1;var e=lc();return Js=function(t){return e(t,5)}}()),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function r(e){return e&&e.__esModule?e:{default:e}}var a=os.mergeClasses=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=r.default&&(0,t.default)(r.default)||{};return a.map(function(t){var a=r[t];return a&&(0,e.default)(a,function(e,t){i[t]||(i[t]={}),i[t]=n({},i[t],a[t])}),t}),i};return os.default=a,os}var cc,dc={};var uc,pc={};function fc(){if(uc)return pc;uc=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.hover=void 0;var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=L(),r=(e=n)&&e.__esModule?e:{default:e};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=pc.hover=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(i){function o(){var i,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=a(this,(i=o.__proto__||Object.getPrototypeOf(o)).call.apply(i,[this].concat(d))),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return r.default.createElement(n,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},r.default.createElement(e,t({},s.props,s.state)))},a(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o}(r.default.Component)};return pc.default=i,pc}var hc,bc={};function gc(){if(hc)return bc;hc=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.active=void 0;var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=L(),r=(e=n)&&e.__esModule?e:{default:e};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=bc.active=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(i){function o(){var i,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=a(this,(i=o.__proto__||Object.getPrototypeOf(o)).call.apply(i,[this].concat(d))),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return r.default.createElement(n,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},r.default.createElement(e,t({},s.props,s.state)))},a(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),o}(r.default.Component)};return bc.default=i,bc}var xc,mc,vc={};var yc=function(){if(mc)return bn;mc=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.ReactCSS=bn.loop=bn.handleActive=bn.handleHover=bn.hover=void 0;var e=o(zl()),t=o(sc()),n=o(function(){if(cc)return dc;cc=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.autoprefix=void 0;var e,t=Jo(),n=(e=t)&&e.__esModule?e:{default:e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},i=dc.autoprefix=function(e){var t={};return(0,n.default)(e,function(e,i){var o={};(0,n.default)(e,function(e,t){var n=a[t];n?o=r({},o,n(e)):o[t]=e}),t[i]=o}),t};return dc.default=i,dc}()),r=o(fc()),a=o(gc()),i=o((xc||(xc=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}),vc));function o(e){return e&&e.__esModule?e:{default:e}}bn.hover=r.default,bn.handleHover=r.default,bn.handleActive=a.default,bn.loop=i.default;var l=bn.ReactCSS=function(r){for(var a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var l=(0,e.default)(i),s=(0,t.default)(r,l);return(0,n.default)(s)};return bn.default=l,bn}();const wc=W(yc);var Sc={},jc=function(e,t,n,r){var a=e+"-"+t+"-"+n+(r?"-server":"");if(Sc[a])return Sc[a];var i=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var a=r?new r:document.createElement("canvas");a.width=2*n,a.height=2*n;var i=a.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,a.width,a.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),a.toDataURL()):null}(e,t,n,r);return Sc[a]=i,i},Cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ec=function(t){var n=t.white,r=t.grey,a=t.size,i=t.renderers,o=t.borderRadius,l=t.boxShadow,s=t.children,c=wc({default:{grid:{borderRadius:o,boxShadow:l,absolute:"0px 0px 0px 0px",background:"url("+jc(n,r,a,i.canvas)+") center left"}}});return e.isValidElement(s)?G.cloneElement(s,Cc({},s.props,{style:Cc({},s.props.style,c.grid)})):G.createElement("div",{style:c.grid})};Ec.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Bc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Mc=function(){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=Bc(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r,a){var i=a.clientWidth,o=a.clientHeight,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=l-(a.getBoundingClientRect().left+window.pageXOffset),d=s-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var u=void 0;if(u=d<0?0:d>o?1:Math.round(100*d/o)/100,t.a!==u)return{h:t.h,s:t.s,l:t.l,a:u,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>i?1:Math.round(100*c/i)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},Bc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e.PureComponent||e.Component),Rc(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=wc({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:kc({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return G.createElement("div",{style:n.alpha},G.createElement("div",{style:n.checkboard},G.createElement(Ec,{renderers:this.props.renderers})),G.createElement("div",{style:n.gradient}),G.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},G.createElement("div",{style:n.pointer},this.props.pointer?G.createElement(this.props.pointer,this.props):G.createElement("div",{style:n.slider}))))}}]),t}(),_c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ic=[38,40],Ac=1,Oc=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,Ic.indexOf(t)>-1)){var a=n.getArrowOffset(),i=38===e.keyCode?r+a:r-a;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+Ac++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e.PureComponent||e.Component),_c(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=wc({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return G.createElement("div",{style:t.wrap},G.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?G.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(),Tc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Dc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Pc=function(){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=Dc(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=function(e,t,n,r){var a=r.clientWidth,i=r.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=o-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var d=void 0;if(d=c<0?359:c>i?0:360*(-100*c/i+100)/100,n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var u=void 0;if(u=s<0?0:s>a?359:100*s/a*360/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Dc(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e.PureComponent||e.Component),Tc(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=wc({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return G.createElement("div",{style:r.hue},G.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},G.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),G.createElement("div",{style:r.pointer},this.props.pointer?G.createElement(this.props.pointer,this.props):G.createElement("div",{style:r.slider}))))}}]),t}(),Fc=function(e){var t=e.zDepth,n=e.radius,r=e.background,a=e.children,i=e.styles,o=wc(V({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===i?{}:i),{"zDepth-1":1===t});return G.createElement("div",{style:o.wrap},G.createElement("div",{style:o.bg}),G.createElement("div",{style:o.content},a))};Fc.propTypes={background:A.string,zDepth:A.oneOf([0,1,2,3,4,5]),radius:A.number,styles:A.object},Fc.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Nc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var zc=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),a=r.width,i=r.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=o-(n.getBoundingClientRect().left+window.pageXOffset),c=l-(n.getBoundingClientRect().top+window.pageYOffset);s<0?s=0:s>a&&(s=a),c<0?c=0:c>i&&(c=i);var d=s/a,u=1-c/i;return{h:t.h,s:d,v:u,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=$(function(e,t,n){e(t,n)},50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e.PureComponent||e.Component),Nc(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,a=t.black,i=t.pointer,o=t.circle,l=wc({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:a,pointer:i,circle:o}},{custom:!!this.props.style});return G.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},G.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),G.createElement("div",{style:l.white,className:"saturation-white"},G.createElement("div",{style:l.black,className:"saturation-black"}),G.createElement("div",{style:l.pointer},this.props.pointer?G.createElement(this.props.pointer,this.props):G.createElement("div",{style:l.circle}))))}}]),t}();function qc(e){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hc=/^\s+/,Lc=/\s+$/;function Wc(e,t){if(t=t||{},(e=e||"")instanceof Wc)return e;if(!(this instanceof Wc))return new Wc(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,l=!1;"string"==typeof e&&(e=function(e){e=e.replace(Hc,"").replace(Lc,"").toLowerCase();var t,n=!1;if(od[e])e=od[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=vd.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=vd.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=vd.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=vd.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=vd.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=vd.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=vd.hex8.exec(e))return{r:ud(t[1]),g:ud(t[2]),b:ud(t[3]),a:bd(t[4]),format:n?"name":"hex8"};if(t=vd.hex6.exec(e))return{r:ud(t[1]),g:ud(t[2]),b:ud(t[3]),format:n?"name":"hex"};if(t=vd.hex4.exec(e))return{r:ud(t[1]+""+t[1]),g:ud(t[2]+""+t[2]),b:ud(t[3]+""+t[3]),a:bd(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=vd.hex3.exec(e))return{r:ud(t[1]+""+t[1]),g:ud(t[2]+""+t[2]),b:ud(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==qc(e)&&(yd(e.r)&&yd(e.g)&&yd(e.b)?(s=e.r,c=e.g,d=e.b,t={r:255*cd(s,255),g:255*cd(c,255),b:255*cd(d,255)},o=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):yd(e.h)&&yd(e.s)&&yd(e.v)?(r=fd(e.s),a=fd(e.v),t=function(e,t,n){e=6*cd(e,360),t=cd(t,100),n=cd(n,100);var r=Math.floor(e),a=e-r,i=n*(1-t),o=n*(1-a*t),l=n*(1-(1-a)*t),s=r%6,c=[n,o,i,i,l,n][s],d=[l,n,n,o,i,i][s],u=[i,i,l,n,n,o][s];return{r:255*c,g:255*d,b:255*u}}(e.h,r,a),o=!0,l="hsv"):yd(e.h)&&yd(e.s)&&yd(e.l)&&(r=fd(e.s),i=fd(e.l),t=function(e,t,n){var r,a,i;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=cd(e,360),t=cd(t,100),n=cd(n,100),0===t)r=a=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;r=o(s,l,e+1/3),a=o(s,l,e),i=o(s,l,e-1/3)}return{r:255*r,g:255*a,b:255*i}}(e.h,r,i),o=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a));var s,c,d;return n=sd(n),{ok:o,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Gc(e,t,n){e=cd(e,255),t=cd(t,255),n=cd(n,255);var r,a,i=Math.max(e,t,n),o=Math.min(e,t,n),l=(i+o)/2;if(i==o)r=a=0;else{var s=i-o;switch(a=l>.5?s/(2-i-o):s/(i+o),i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:a,l:l}}function Vc(e,t,n){e=cd(e,255),t=cd(t,255),n=cd(n,255);var r,a,i=Math.max(e,t,n),o=Math.min(e,t,n),l=i,s=i-o;if(a=0===i?0:s/i,i==o)r=0;else{switch(i){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:a,v:l}}function $c(e,t,n,r){var a=[pd(Math.round(e).toString(16)),pd(Math.round(t).toString(16)),pd(Math.round(n).toString(16))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Uc(e,t,n,r){return[pd(hd(r)),pd(Math.round(e).toString(16)),pd(Math.round(t).toString(16)),pd(Math.round(n).toString(16))].join("")}function Xc(e,t){t=0===t?0:t||10;var n=Wc(e).toHsl();return n.s-=t/100,n.s=dd(n.s),Wc(n)}function Yc(e,t){t=0===t?0:t||10;var n=Wc(e).toHsl();return n.s+=t/100,n.s=dd(n.s),Wc(n)}function Kc(e){return Wc(e).desaturate(100)}function Jc(e,t){t=0===t?0:t||10;var n=Wc(e).toHsl();return n.l+=t/100,n.l=dd(n.l),Wc(n)}function Zc(e,t){t=0===t?0:t||10;var n=Wc(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Wc(n)}function Qc(e,t){t=0===t?0:t||10;var n=Wc(e).toHsl();return n.l-=t/100,n.l=dd(n.l),Wc(n)}function ed(e,t){var n=Wc(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Wc(n)}function td(e){var t=Wc(e).toHsl();return t.h=(t.h+180)%360,Wc(t)}function nd(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Wc(e).toHsl(),r=[Wc(e)],a=360/t,i=1;i<t;i++)r.push(Wc({h:(n.h+i*a)%360,s:n.s,l:n.l}));return r}function rd(e){var t=Wc(e).toHsl(),n=t.h;return[Wc(e),Wc({h:(n+72)%360,s:t.s,l:t.l}),Wc({h:(n+216)%360,s:t.s,l:t.l})]}function ad(e,t,n){t=t||6,n=n||30;var r=Wc(e).toHsl(),a=360/n,i=[Wc(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(Wc(r));return i}function id(e,t){t=t||6;for(var n=Wc(e).toHsv(),r=n.h,a=n.s,i=n.v,o=[],l=1/t;t--;)o.push(Wc({h:r,s:a,v:i})),i=(i+l)%1;return o}Wc.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=sd(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Vc(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Vc(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Gc(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Gc(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return $c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,a){var i=[pd(Math.round(e).toString(16)),pd(Math.round(t).toString(16)),pd(Math.round(n).toString(16)),pd(hd(r))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*cd(this._r,255))+"%",g:Math.round(100*cd(this._g,255))+"%",b:Math.round(100*cd(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*cd(this._r,255))+"%, "+Math.round(100*cd(this._g,255))+"%, "+Math.round(100*cd(this._b,255))+"%)":"rgba("+Math.round(100*cd(this._r,255))+"%, "+Math.round(100*cd(this._g,255))+"%, "+Math.round(100*cd(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(ld[$c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Uc(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var a=Wc(e);n="#"+Uc(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Wc(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Jc,arguments)},brighten:function(){return this._applyModification(Zc,arguments)},darken:function(){return this._applyModification(Qc,arguments)},desaturate:function(){return this._applyModification(Xc,arguments)},saturate:function(){return this._applyModification(Yc,arguments)},greyscale:function(){return this._applyModification(Kc,arguments)},spin:function(){return this._applyModification(ed,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(ad,arguments)},complement:function(){return this._applyCombination(td,arguments)},monochromatic:function(){return this._applyCombination(id,arguments)},splitcomplement:function(){return this._applyCombination(rd,arguments)},triad:function(){return this._applyCombination(nd,[3])},tetrad:function(){return this._applyCombination(nd,[4])}},Wc.fromRatio=function(e,t){if("object"==qc(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:fd(e[r]));e=n}return Wc(e,t)},Wc.equals=function(e,t){return!(!e||!t)&&Wc(e).toRgbString()==Wc(t).toRgbString()},Wc.random=function(){return Wc.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Wc.mix=function(e,t,n){n=0===n?0:n||50;var r=Wc(e).toRgb(),a=Wc(t).toRgb(),i=n/100;return Wc({r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a})},Wc.readability=function(e,t){var n=Wc(e),r=Wc(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Wc.isReadable=function(e,t,n){var r,a,i=Wc.readability(e,t);switch(a=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7}return a},Wc.mostReadable=function(e,t,n){var r,a,i,o,l=null,s=0;a=(n=n||{}).includeFallbackColors,i=n.level,o=n.size;for(var c=0;c<t.length;c++)(r=Wc.readability(e,t[c]))>s&&(s=r,l=Wc(t[c]));return Wc.isReadable(e,l,{level:i,size:o})||!a?l:(n.includeFallbackColors=!1,Wc.mostReadable(e,["#fff","#000"],n))};var od=Wc.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ld=Wc.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(od);function sd(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function cd(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function dd(e){return Math.min(1,Math.max(0,e))}function ud(e){return parseInt(e,16)}function pd(e){return 1==e.length?"0"+e:""+e}function fd(e){return e<=1&&(e=100*e+"%"),e}function hd(e){return Math.round(255*parseFloat(e)).toString(16)}function bd(e){return ud(e)/255}var gd,xd,md,vd=(xd="[\\s|\\(]+("+(gd="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+gd+")[,|\\s]+("+gd+")\\s*\\)?",md="[\\s|\\(]+("+gd+")[,|\\s]+("+gd+")[,|\\s]+("+gd+")[,|\\s]+("+gd+")\\s*\\)?",{CSS_UNIT:new RegExp(gd),rgb:new RegExp("rgb"+xd),rgba:new RegExp("rgba"+md),hsl:new RegExp("hsl"+xd),hsla:new RegExp("hsla"+md),hsv:new RegExp("hsv"+xd),hsva:new RegExp("hsva"+md),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function yd(e){return!!vd.CSS_UNIT.exec(e)}var wd=function(e){var t=0,n=0;return _t(["r","g","b","a","h","s","l","v"],function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}}),t===n&&e},Sd=function(e,t){var n=e.hex?Wc(e.hex):Wc(e),r=n.toHsl(),a=n.toHsv(),i=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,a.h=t||0),{hsl:r,hex:"000000"===o&&0===i.a?"transparent":"#"+o,rgb:i,hsv:a,oldHue:e.h||t||r.h,source:e.source}},jd=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&Wc(e).isValid()},Cd=function(e){if(!e)return"#fff";var t=Sd(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Ed=function(e,t){return Wc(t+" ("+e.replace("","")+")")._ok},kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Bd=function(t){var n=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(wd(e)){var r=Sd(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(wd(e)){var r=Sd(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=kd({},Sd(e.color,0)),t.debounce=U(function(e,t,n){e(t,n)},100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e.PureComponent||e.Component),Rd(n,[{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),G.createElement(t,kd({},this.props,this.state,{onChange:this.handleChange},e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return kd({},Sd(e.color,t.oldHue))}}]),n}();return n.propTypes=kd({},t.propTypes),n.defaultProps=kd({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},Md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Id(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const Od=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=r=Id(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),r.state={focus:!1},r.handleFocus=function(){return r.setState({focus:!0})},r.handleBlur=function(){return r.setState({focus:!1})},Id(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,G.Component),_d(n,[{key:"render",value:function(){return G.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},G.createElement(e,Md({},this.props,this.state)))}}]),n}()}(function(e){var t=e.color,n=e.style,r=e.onClick,a=void 0===r?function(){}:r,i=e.onHover,o=e.title,l=void 0===o?t:o,s=e.children,c=e.focus,d=e.focusStyle,u="transparent"===t,p=wc({default:{swatch:Ad({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?void 0===d?{}:d:{})}}),f={};return i&&(f.onMouseOver=function(e){return i(t,e)}),G.createElement("div",Ad({style:p.swatch,onClick:function(e){return a(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&a(t,e)}},f),s,u&&G.createElement(Ec,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))});var Td=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dd=function(e){var t=e.rgb,n=e.hsl,r=e.width,a=e.height,i=e.onChange,o=e.direction,l=e.style,s=e.renderers,c=e.pointer,d=e.className,u=void 0===d?"":d,p=wc({default:{picker:{position:"relative",width:r,height:a},alpha:{radius:"2px",style:l}}});return G.createElement("div",{style:p.picker,className:"alpha-picker "+u},G.createElement(Mc,Td({},p.alpha,{rgb:t,hsl:n,pointer:c,renderers:s,onChange:i,direction:o})))};Dd.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=wc({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return G.createElement("div",{style:n.picker})}},Bd(Dd);var Pd=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,a=wc({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return G.createElement("div",{style:a.swatches},At(t,function(e){return G.createElement(Od,{key:e,color:e,style:a.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})}),G.createElement("div",{style:a.clear}))},Fd=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,a=e.colors,i=e.width,o=e.triangle,l=e.styles,s=void 0===l?{}:l,c=e.className,d=void 0===c?"":c,u="transparent"===r,p=function(e,n){jd(e)&&t({hex:e,source:"hex"},n)},f=wc(V({default:{card:{width:i,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Cd(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},s),{"hide-triangle":"hide"===o});return G.createElement("div",{style:f.card,className:"block-picker "+d},G.createElement("div",{style:f.triangle}),G.createElement("div",{style:f.head},u&&G.createElement(Ec,{borderRadius:"6px 6px 0 0"}),G.createElement("div",{style:f.label},r)),G.createElement("div",{style:f.body},G.createElement(Pd,{colors:a,onClick:p,onSwatchHover:n}),G.createElement(Oc,{style:{input:f.input},value:r,onChange:p})))};Fd.propTypes={width:A.oneOfType([A.string,A.number]),colors:A.arrayOf(A.string),triangle:A.oneOf(["top","hide"]),styles:A.object},Fd.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},Bd(Fd);var Nd="#ffcdd2",zd="#e57373",qd="#f44336",Hd="#d32f2f",Ld="#b71c1c",Wd="#f8bbd0",Gd="#f06292",Vd="#e91e63",$d="#c2185b",Ud="#880e4f",Xd="#e1bee7",Yd="#ba68c8",Kd="#9c27b0",Jd="#7b1fa2",Zd="#4a148c",Qd="#d1c4e9",eu="#9575cd",tu="#673ab7",nu="#512da8",ru="#311b92",au="#c5cae9",iu="#7986cb",ou="#3f51b5",lu="#303f9f",su="#1a237e",cu="#bbdefb",du="#64b5f6",uu="#2196f3",pu="#1976d2",fu="#0d47a1",hu="#b3e5fc",bu="#4fc3f7",gu="#03a9f4",xu="#0288d1",mu="#01579b",vu="#b2ebf2",yu="#4dd0e1",wu="#00bcd4",Su="#0097a7",ju="#006064",Cu="#b2dfdb",Eu="#4db6ac",ku="#009688",Ru="#00796b",Bu="#004d40",Mu="#c8e6c9",_u="#81c784",Iu="#4caf50",Au="#388e3c",Ou="#dcedc8",Tu="#aed581",Du="#8bc34a",Pu="#689f38",Fu="#33691e",Nu="#f0f4c3",zu="#dce775",qu="#cddc39",Hu="#afb42b",Lu="#827717",Wu="#fff9c4",Gu="#fff176",Vu="#ffeb3b",$u="#fbc02d",Uu="#f57f17",Xu="#ffecb3",Yu="#ffd54f",Ku="#ffc107",Ju="#ffa000",Zu="#ff6f00",Qu="#ffe0b2",ep="#ffb74d",tp="#ff9800",np="#f57c00",rp="#e65100",ap="#ffccbc",ip="#ff8a65",op="#ff5722",lp="#e64a19",sp="#bf360c",cp="#d7ccc8",dp="#a1887f",up="#795548",pp="#5d4037",fp="#3e2723",hp="#cfd8dc",bp="#90a4ae",gp="#607d8b",xp="#455a64",mp="#263238",vp=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,a=e.hover,i=e.active,o=e.circleSize,l=e.circleSpacing,s=wc({default:{swatch:{width:o,height:o,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:a,active:i});return G.createElement("div",{style:s.swatch},G.createElement(Od,{style:s.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:s.Swatch.boxShadow+", 0 0 5px "+t}}))};vp.defaultProps={circleSize:28,circleSpacing:14};const yp=yc.handleHover(vp);var wp=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,a=e.colors,i=e.hex,o=e.circleSize,l=e.styles,s=void 0===l?{}:l,c=e.circleSpacing,d=e.className,u=void 0===d?"":d,p=wc(V({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},s)),f=function(e,t){return n({hex:e,source:"hex"},t)};return G.createElement("div",{style:p.card,className:"circle-picker "+u},At(a,function(e){return G.createElement(yp,{key:e,color:e,onClick:f,onSwatchHover:r,active:i===e.toLowerCase(),circleSize:o,circleSpacing:c})}))};wp.propTypes={width:A.oneOfType([A.string,A.number]),circleSize:A.number,circleSpacing:A.number,styles:A.object},wp.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[qd,Vd,Kd,tu,ou,uu,gu,wu,ku,Iu,Du,qu,Vu,Ku,tp,op,up,gp],styles:{}},Bd(wp);var Sp,jp={};const Cp=W(function(){if(Sp)return jp;Sp=1,Object.defineProperty(jp,"__esModule",{value:!0});var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=L(),r=(e=n)&&e.__esModule?e:{default:e};return jp.default=function(e){var n=e.fill,a=void 0===n?"currentColor":n,i=e.width,o=void 0===i?24:i,l=e.height,s=void 0===l?24:l,c=e.style,d=void 0===c?{}:c,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 24 24",style:t({fill:a,width:o,height:s},d)},u),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},jp}());var Ep=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var kp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?jd(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(Ot(e.s)?n.props.hsl.s:e.s),l:Number(Ot(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==t.hsl.a&&"hex"===t.view?n.state={view:"rgb"}:n.state={view:t.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,G.Component),Ep(e,[{key:"render",value:function(){var e=this,t=wc({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=G.createElement("div",{style:t.fields,className:"flexbox-fix"},G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=G.createElement("div",{style:t.fields,className:"flexbox-fix"},G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),G.createElement("div",{style:t.alpha},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=G.createElement("div",{style:t.fields,className:"flexbox-fix"},G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),G.createElement("div",{style:t.field},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),G.createElement("div",{style:t.alpha},G.createElement(Oc,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),G.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,G.createElement("div",{style:t.toggle},G.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},G.createElement(Cp,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),e}();kp.defaultProps={view:"hex"};var Rp=function(){var e=wc({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return G.createElement("div",{style:e.picker})},Bp=function(){var e=wc({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return G.createElement("div",{style:e.picker})},Mp=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,a=e.rgb,i=e.hsl,o=e.hsv,l=e.hex,s=e.renderers,c=e.styles,d=void 0===c?{}:c,u=e.className,p=void 0===u?"":u,f=e.defaultView,h=wc(V({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},d),{disableAlpha:r});return G.createElement("div",{style:h.picker,className:"chrome-picker "+p},G.createElement("div",{style:h.saturation},G.createElement(zc,{style:h.Saturation,hsl:i,hsv:o,pointer:Bp,onChange:n})),G.createElement("div",{style:h.body},G.createElement("div",{style:h.controls,className:"flexbox-fix"},G.createElement("div",{style:h.color},G.createElement("div",{style:h.swatch},G.createElement("div",{style:h.active}),G.createElement(Ec,{renderers:s}))),G.createElement("div",{style:h.toggles},G.createElement("div",{style:h.hue},G.createElement(Pc,{style:h.Hue,hsl:i,pointer:Rp,onChange:n})),G.createElement("div",{style:h.alpha},G.createElement(Mc,{style:h.Alpha,rgb:a,hsl:i,pointer:Rp,renderers:s,onChange:n})))),G.createElement(kp,{rgb:a,hsl:i,hex:l,view:f,onChange:n,disableAlpha:r})))};Mp.propTypes={width:A.oneOfType([A.string,A.number]),disableAlpha:A.bool,styles:A.object,defaultView:A.oneOf(["hex","rgb","hsl"])},Mp.defaultProps={width:225,disableAlpha:!1,styles:{}},Bd(Mp);var _p=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,a=e.onSwatchHover,i=e.active,o=wc({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Cd(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:i,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return G.createElement(Od,{style:o.color,color:t,onClick:r,onHover:a,focusStyle:{boxShadow:"0 0 4px "+t}},G.createElement("div",{style:o.dot}))},Ip=function(e){var t=e.hex,n=e.rgb,r=e.onChange,a=wc({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),i=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return G.createElement("div",{style:a.fields,className:"flexbox-fix"},G.createElement("div",{style:a.active}),G.createElement(Oc,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"hex",value:t,onChange:i}),G.createElement(Oc,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:i}),G.createElement(Oc,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:i}),G.createElement(Oc,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:i}))},Ap=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,a=e.hex,i=e.rgb,o=e.styles,l=void 0===o?{}:o,s=e.className,c=void 0===s?"":s,d=wc(V({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),u=function(e,n){e.hex?jd(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return G.createElement(Fc,{style:d.Compact,styles:l},G.createElement("div",{style:d.compact,className:"compact-picker "+c},G.createElement("div",null,At(r,function(e){return G.createElement(_p,{key:e,color:e,active:e.toLowerCase()===a,onClick:u,onSwatchHover:n})}),G.createElement("div",{style:d.clear})),G.createElement(Ip,{hex:a,rgb:i,onChange:u})))};Ap.propTypes={colors:A.arrayOf(A.string),styles:A.object},Ap.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},Bd(Ap);const Op=yc.handleHover(function(e){var t=e.hover,n=e.color,r=e.onClick,a=e.onSwatchHover,i={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=wc({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:i}},{hover:t});return G.createElement("div",{style:o.swatch},G.createElement(Od,{color:n,onClick:r,onHover:a,focusStyle:i}))});var Tp=function(e){var t=e.width,n=e.colors,r=e.onChange,a=e.onSwatchHover,i=e.triangle,o=e.styles,l=void 0===o?{}:o,s=e.className,c=void 0===s?"":s,d=wc(V({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===i,"top-left-triangle":"top-left"===i,"top-right-triangle":"top-right"===i,"bottom-left-triangle":"bottom-left"===i,"bottom-right-triangle":"bottom-right"===i}),u=function(e,t){return r({hex:e,source:"hex"},t)};return G.createElement("div",{style:d.card,className:"github-picker "+c},G.createElement("div",{style:d.triangleShadow}),G.createElement("div",{style:d.triangle}),At(n,function(e){return G.createElement(Op,{color:e,key:e,onClick:u,onSwatchHover:a})}))};Tp.propTypes={width:A.oneOfType([A.string,A.number]),colors:A.arrayOf(A.string),triangle:A.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:A.object},Tp.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},Bd(Tp);var Dp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pp=function(e){var t=e.width,n=e.height,r=e.onChange,a=e.hsl,i=e.direction,o=e.pointer,l=e.styles,s=void 0===l?{}:l,c=e.className,d=void 0===c?"":c,u=wc(V({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},s));return G.createElement("div",{style:u.picker,className:"hue-picker "+d},G.createElement(Pc,Dp({},u.hue,{hsl:a,pointer:o,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:i})))};Pp.propTypes={styles:A.object},Pp.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=wc({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return G.createElement("div",{style:n.picker})},styles:{}},Bd(Pp);Bd(function(e){var t=e.onChange,n=e.hex,r=e.rgb,a=e.styles,i=void 0===a?{}:a,o=e.className,l=void 0===o?"":o,s=wc(V({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},i)),c=function(e,n){e.hex?jd(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return G.createElement(Fc,{styles:i},G.createElement("div",{style:s.material,className:"material-picker "+l},G.createElement(Oc,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:n,onChange:c}),G.createElement("div",{style:s.split,className:"flexbox-fix"},G.createElement("div",{style:s.third},G.createElement(Oc,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:c})),G.createElement("div",{style:s.third},G.createElement(Oc,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:c})),G.createElement("div",{style:s.third},G.createElement(Oc,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:c})))))});var Fp=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,a=e.hex,i=wc({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,a){e["#"]?jd(e["#"])&&t({hex:e["#"],source:"hex"},a):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},a):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},a)};return G.createElement("div",{style:i.fields},G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"h",value:Math.round(r.h),onChange:o}),G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:o}),G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:o}),G.createElement("div",{style:i.divider}),G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),G.createElement(Oc,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}),G.createElement("div",{style:i.divider}),G.createElement(Oc,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"#",value:a.replace("#",""),onChange:o}),G.createElement("div",{style:i.fieldSymbols},G.createElement("div",{style:i.symbol},""),G.createElement("div",{style:i.symbol},"%"),G.createElement("div",{style:i.symbol},"%")))},Np=function(e){var t=e.hsl,n=wc({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return G.createElement("div",{style:n.picker})},zp=function(){var e=wc({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return G.createElement("div",{style:e.pointer},G.createElement("div",{style:e.left},G.createElement("div",{style:e.leftInside})),G.createElement("div",{style:e.right},G.createElement("div",{style:e.rightInside})))},qp=function(e){var t=e.onClick,n=e.label,r=e.children,a=e.active,i=wc({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:a});return G.createElement("div",{style:i.button,onClick:t},n||r)},Hp=function(e){var t=e.rgb,n=e.currentColor,r=wc({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return G.createElement("div",null,G.createElement("div",{style:r.label},"new"),G.createElement("div",{style:r.swatches},G.createElement("div",{style:r.new}),G.createElement("div",{style:r.current})),G.createElement("div",{style:r.label},"current"))},Lp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Wp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,G.Component),Lp(e,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,a=void 0===r?"":r,i=wc(V({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return G.createElement("div",{style:i.picker,className:"photoshop-picker "+a},G.createElement("div",{style:i.head},this.props.header),G.createElement("div",{style:i.body,className:"flexbox-fix"},G.createElement("div",{style:i.saturation},G.createElement(zc,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Np,onChange:this.props.onChange})),G.createElement("div",{style:i.hue},G.createElement(Pc,{direction:"vertical",hsl:this.props.hsl,pointer:zp,onChange:this.props.onChange})),G.createElement("div",{style:i.controls},G.createElement("div",{style:i.top,className:"flexbox-fix"},G.createElement("div",{style:i.previews},G.createElement(Hp,{rgb:this.props.rgb,currentColor:this.state.currentColor})),G.createElement("div",{style:i.actions},G.createElement(qp,{label:"OK",onClick:this.props.onAccept,active:!0}),G.createElement(qp,{label:"Cancel",onClick:this.props.onCancel}),G.createElement(Fp,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}();Wp.propTypes={header:A.string,styles:A.object},Wp.defaultProps={header:"Color Picker",styles:{}},Bd(Wp);var Gp=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,a=e.hex,i=e.disableAlpha,o=wc({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:i}),l=function(e,a){e.hex?jd(e.hex)&&t({hex:e.hex,source:"hex"},a):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},a):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},a))};return G.createElement("div",{style:o.fields,className:"flexbox-fix"},G.createElement("div",{style:o.double},G.createElement(Oc,{style:{input:o.input,label:o.label},label:"hex",value:a.replace("#",""),onChange:l})),G.createElement("div",{style:o.single},G.createElement(Oc,{style:{input:o.input,label:o.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),G.createElement("div",{style:o.single},G.createElement(Oc,{style:{input:o.input,label:o.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),G.createElement("div",{style:o.single},G.createElement(Oc,{style:{input:o.input,label:o.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),G.createElement("div",{style:o.alpha},G.createElement(Oc,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))},Vp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$p=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,a=e.onSwatchHover,i=wc({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){r({hex:e,source:"hex"},t)};return G.createElement("div",{style:i.colors,className:"flexbox-fix"},t.map(function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return G.createElement("div",{key:n,style:i.swatchWrap},G.createElement(Od,Vp({},t,{style:i.swatch,onClick:o,onHover:a,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))}))};$p.propTypes={colors:A.arrayOf(A.oneOfType([A.string,A.shape({color:A.string,title:A.string})])).isRequired};var Up=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp=function(e){var t=e.width,n=e.rgb,r=e.hex,a=e.hsv,i=e.hsl,o=e.onChange,l=e.onSwatchHover,s=e.disableAlpha,c=e.presetColors,d=e.renderers,u=e.styles,p=void 0===u?{}:u,f=e.className,h=void 0===f?"":f,b=wc(V({default:Up({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:s});return G.createElement("div",{style:b.picker,className:"sketch-picker "+h},G.createElement("div",{style:b.saturation},G.createElement(zc,{style:b.Saturation,hsl:i,hsv:a,onChange:o})),G.createElement("div",{style:b.controls,className:"flexbox-fix"},G.createElement("div",{style:b.sliders},G.createElement("div",{style:b.hue},G.createElement(Pc,{style:b.Hue,hsl:i,onChange:o})),G.createElement("div",{style:b.alpha},G.createElement(Mc,{style:b.Alpha,rgb:n,hsl:i,renderers:d,onChange:o}))),G.createElement("div",{style:b.color},G.createElement(Ec,null),G.createElement("div",{style:b.activeColor}))),G.createElement(Gp,{rgb:n,hsl:i,hex:r,onChange:o,disableAlpha:s}),G.createElement($p,{colors:c,onClick:o,onSwatchHover:l}))};Xp.propTypes={disableAlpha:A.bool,width:A.oneOfType([A.string,A.number]),styles:A.object},Xp.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Yp=Bd(Xp);var Kp=function(e){var t=e.hsl,n=e.offset,r=e.onClick,a=void 0===r?function(){}:r,i=e.active,o=e.first,l=e.last,s=wc({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:i,first:o,last:l});return G.createElement("div",{style:s.swatch,onClick:function(e){return a({h:t.h,s:.5,l:n,source:"hsl"},e)}})},Jp=function(e){var t=e.onClick,n=e.hsl,r=wc({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),a=.1;return G.createElement("div",{style:r.swatches},G.createElement("div",{style:r.swatch},G.createElement(Kp,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<a&&Math.abs(n.s-.5)<a,onClick:t,first:!0})),G.createElement("div",{style:r.swatch},G.createElement(Kp,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<a&&Math.abs(n.s-.5)<a,onClick:t})),G.createElement("div",{style:r.swatch},G.createElement(Kp,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<a&&Math.abs(n.s-.5)<a,onClick:t})),G.createElement("div",{style:r.swatch},G.createElement(Kp,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<a&&Math.abs(n.s-.5)<a,onClick:t})),G.createElement("div",{style:r.swatch},G.createElement(Kp,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<a&&Math.abs(n.s-.5)<a,onClick:t,last:!0})),G.createElement("div",{style:r.clear}))},Zp=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,a=e.styles,i=void 0===a?{}:a,o=e.className,l=void 0===o?"":o,s=wc(V({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},i));return G.createElement("div",{style:s.wrap||{},className:"slider-picker "+l},G.createElement("div",{style:s.hue},G.createElement(Pc,{style:s.Hue,hsl:t,pointer:r,onChange:n})),G.createElement("div",{style:s.swatches},G.createElement(Jp,{hsl:t,onClick:n})))};Zp.propTypes={styles:A.object},Zp.defaultProps={pointer:function(){var e=wc({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return G.createElement("div",{style:e.picker})},styles:{}},Bd(Zp);var Qp,ef={};const tf=W(function(){if(Qp)return ef;Qp=1,Object.defineProperty(ef,"__esModule",{value:!0});var e,t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n=L(),r=(e=n)&&e.__esModule?e:{default:e};return ef.default=function(e){var n=e.fill,a=void 0===n?"currentColor":n,i=e.width,o=void 0===i?24:i,l=e.height,s=void 0===l?24:l,c=e.style,d=void 0===c?{}:c,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 24 24",style:t({fill:a,width:o,height:s},d)},u),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},ef}());var nf=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,a=e.onSwatchHover,i=e.first,o=e.last,l=e.active,s=wc({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Cd(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:i,last:o,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return G.createElement(Od,{color:t,style:s.color,onClick:r,onHover:a,focusStyle:{boxShadow:"0 0 4px "+t}},G.createElement("div",{style:s.check},G.createElement(tf,null)))},rf=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,a=e.active,i=wc({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return G.createElement("div",{style:i.group},At(r,function(e,i){return G.createElement(nf,{key:e,color:e,active:e.toLowerCase()===a,first:0===i,last:i===r.length-1,onClick:t,onSwatchHover:n})}))},af=function(e){var t=e.width,n=e.height,r=e.onChange,a=e.onSwatchHover,i=e.colors,o=e.hex,l=e.styles,s=void 0===l?{}:l,c=e.className,d=void 0===c?"":c,u=wc(V({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},s)),p=function(e,t){return r({hex:e,source:"hex"},t)};return G.createElement("div",{style:u.picker,className:"swatches-picker "+d},G.createElement(Fc,null,G.createElement("div",{style:u.overflow},G.createElement("div",{style:u.body},At(i,function(e){return G.createElement(rf,{key:e.toString(),group:e,active:o,onClick:p,onSwatchHover:a})}),G.createElement("div",{style:u.clear})))))};af.propTypes={width:A.oneOfType([A.string,A.number]),height:A.oneOfType([A.string,A.number]),colors:A.arrayOf(A.arrayOf(A.string)),styles:A.object},af.defaultProps={width:320,height:240,colors:[[Ld,Hd,qd,zd,Nd],[Ud,$d,Vd,Gd,Wd],[Zd,Jd,Kd,Yd,Xd],[ru,nu,tu,eu,Qd],[su,lu,ou,iu,au],[fu,pu,uu,du,cu],[mu,xu,gu,bu,hu],[ju,Su,wu,yu,vu],[Bu,Ru,ku,Eu,Cu],["#194D33",Au,Iu,_u,Mu],[Fu,Pu,Du,Tu,Ou],[Lu,Hu,qu,zu,Nu],[Uu,$u,Vu,Gu,Wu],[Zu,Ju,Ku,Yu,Xu],[rp,np,tp,ep,Qu],[sp,lp,op,ip,ap],[fp,pp,up,dp,cp],[mp,xp,gp,bp,hp],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},Bd(af);var of=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,a=e.colors,i=e.width,o=e.triangle,l=e.styles,s=void 0===l?{}:l,c=e.className,d=void 0===c?"":c,u=wc(V({default:{card:{width:i,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},s),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),p=function(e,n){jd(e)&&t({hex:e,source:"hex"},n)};return G.createElement("div",{style:u.card,className:"twitter-picker "+d},G.createElement("div",{style:u.triangleShadow}),G.createElement("div",{style:u.triangle}),G.createElement("div",{style:u.body},At(a,function(e,t){return G.createElement(Od,{key:t,color:e,hex:e,style:u.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})}),G.createElement("div",{style:u.hash},"#"),G.createElement(Oc,{label:null,style:{input:u.input},value:r.replace("#",""),onChange:p}),G.createElement("div",{style:u.clear})))};of.propTypes={width:A.oneOfType([A.string,A.number]),triangle:A.oneOf(["hide","top-left","top-right"]),colors:A.arrayOf(A.string),styles:A.object},of.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},Bd(of);var lf=function(e){var t=wc({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return G.createElement("div",{style:t.picker})};lf.propTypes={hsl:A.shape({h:A.number,s:A.number,l:A.number,a:A.number})},lf.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var sf=function(e){var t=wc({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return G.createElement("div",{style:t.picker})};sf.propTypes={hsl:A.shape({h:A.number,s:A.number,l:A.number,a:A.number})},sf.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var cf=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,a=e.hex,i=e.hsv,o=function(e,n){if(e.hex)jd(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");Ed(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var a=e.hsv.split(",");Ed(e.hsv,"hsv")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("",""),1==a[1]?a[1]=.01:1==a[2]&&(a[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsv"},n))}else if(e.hsl){var i=e.hsl.split(",");Ed(e.hsl,"hsl")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("",""),1==d[1]?d[1]=.01:1==d[2]&&(d[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsl"},n))}},l=wc({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),s=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+", "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",d=Math.round(i.h)+", "+Math.round(100*i.s)+"%, "+Math.round(100*i.v)+"%";return G.createElement("div",{style:l.wrap,className:"flexbox-fix"},G.createElement("div",{style:l.fields},G.createElement("div",{style:l.double},G.createElement(Oc,{style:{input:l.input,label:l.label},label:"hex",value:a,onChange:o})),G.createElement("div",{style:l.column},G.createElement("div",{style:l.single},G.createElement(Oc,{style:{input:l.input2,label:l.label2},label:"rgb",value:s,onChange:o})),G.createElement("div",{style:l.single},G.createElement(Oc,{style:{input:l.input2,label:l.label2},label:"hsv",value:d,onChange:o})),G.createElement("div",{style:l.single},G.createElement(Oc,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:o})))))},df=function(e){var t=e.width,n=e.onChange,r=e.rgb,a=e.hsl,i=e.hsv,o=e.hex,l=e.header,s=e.styles,c=void 0===s?{}:s,d=e.className,u=void 0===d?"":d,p=wc(V({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return G.createElement("div",{style:p.picker,className:"google-picker "+u},G.createElement("div",{style:p.head},l),G.createElement("div",{style:p.swatch}),G.createElement("div",{style:p.saturation},G.createElement(zc,{hsl:a,hsv:i,pointer:lf,onChange:n})),G.createElement("div",{style:p.body},G.createElement("div",{style:p.controls,className:"flexbox-fix"},G.createElement("div",{style:p.hue},G.createElement(Pc,{style:p.Hue,hsl:a,radius:"4px",pointer:sf,onChange:n}))),G.createElement(cf,{rgb:r,hsl:a,hex:o,hsv:i,onChange:n})))};df.propTypes={width:A.oneOfType([A.string,A.number]),styles:A.object,header:A.string},df.defaultProps={width:652,styles:{},header:"Color picker"},Bd(df);const uf=({open:t,onClose:n,color:r,onChangeComplete:a,anchorEl:i,title:o="Choose Color"})=>{const[l,s]=e.useState(r);e.useEffect(()=>{s(r)},[r]);return R.jsx(X,{open:t,anchorEl:i,onClose:n,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},slotProps:{paper:{sx:{borderRadius:"12px",overflow:"visible",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",mt:-1}}},children:R.jsxs(M,{sx:{p:2,minWidth:240},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[R.jsx(_,{sx:{fontSize:"16px",fontWeight:600},children:o}),R.jsx(I,{onClick:n,size:"small",children:R.jsx(Y,{size:18})})]}),R.jsx(Yp,{color:l,onChange:e=>{s(e.hex)},onChangeComplete:e=>{s(e.hex),a(e.hex)},disableAlpha:!0,presetColors:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6b7280","#1f2937","#000000"],styles:{default:{picker:{fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif",borderRadius:"8px",border:"none",boxShadow:"none"},saturation:{borderRadius:"4px 4px 0 0"},hue:{borderRadius:"0 0 4px 4px",height:"12px"},color:{borderRadius:"4px"},controls:{paddingTop:"16px"},sliders:{paddingTop:"4px"}}}})]})})};uf.propTypes={open:A.bool.isRequired,onClose:A.func.isRequired,color:A.string.isRequired,onChangeComplete:A.func.isRequired,anchorEl:A.any,title:A.string};const pf=({formikProps:t,viewOnly:n=!1})=>{const[r,a]=e.useState(!1),[i,o]=e.useState(null),[l,s]=e.useState(null),c=(e,t)=>{n||(o(t),s(e.currentTarget),a(!0))};return R.jsxs(M,{children:[R.jsx(Pt,{icon:K,title:"Design & Branding"}),R.jsxs(M,{sx:{display:"flex",gap:4,mb:4},children:[R.jsxs(M,{sx:{flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:500,mb:2,color:"#374151"},children:"Primary Color"}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[R.jsx(M,{onClick:e=>c(e,"primary"),sx:{width:40,height:40,backgroundColor:t.values.primaryColor,borderRadius:"6px",cursor:n?"default":"pointer",border:"2px solid #e5e7eb","&:hover":{transform:n?"none":"scale(1.05)",transition:"transform 0.2s ease"}}}),R.jsx(_,{variant:"body2",sx:{color:"#6b7280",fontFamily:"monospace"},children:t.values.primaryColor}),!n&&R.jsx(q,{sx:{minWidth:"auto",width:20,height:20,padding:1.5},onClick:e=>c(e,"primary"),children:R.jsx(Ne,{style:{fontSize:"15px",color:"#6b7280"}})})]})]}),R.jsxs(M,{sx:{flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:500,mb:2,color:"#374151"},children:"Secondary Color"}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[R.jsx(M,{onClick:e=>c(e,"secondary"),sx:{width:40,height:40,backgroundColor:t.values.secondaryColor,borderRadius:"6px",cursor:n?"default":"pointer",border:"2px solid #e5e7eb","&:hover":{transform:n?"none":"scale(1.05)",transition:"transform 0.2s ease"}}}),R.jsx(_,{variant:"body2",sx:{color:"#6b7280",fontFamily:"monospace"},children:t.values.secondaryColor}),!n&&R.jsx(q,{sx:{minWidth:"auto",width:20,height:20,padding:1.5},onClick:e=>c(e,"secondary"),children:R.jsx(Ne,{style:{fontSize:"15px",color:"#6b7280"}})})]})]})]}),R.jsxs(M,{sx:{mb:3},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:500,mb:2,color:"#374151"},children:"Live Preview"}),R.jsxs(M,{sx:{border:`2px solid ${t.values.primaryColor}`,borderRadius:"12px",padding:4,backgroundColor:"#f8fafc",textAlign:"center",minHeight:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[R.jsx(_,{variant:"h4",sx:{color:t.values.primaryColor,fontWeight:"bold",mb:3},children:t.values.calendarName||"Calendar Name"}),R.jsx(_,{variant:"body1",sx:{color:"#6b7280",mb:3,maxWidth:400},children:t.values.welcomeMessage||"Welcome! Please select your preferred appointment time."}),R.jsxs(M,{sx:{display:"flex",gap:2},children:[R.jsx(q,{variant:"contained",sx:{backgroundColor:t.values.primaryColor,textTransform:"none",px:3,py:1,borderRadius:"6px","&:hover":{backgroundColor:t.values.primaryColor,opacity:.9}},children:"Book Appointment"}),R.jsx(q,{variant:"outlined",sx:{borderColor:t.values.secondaryColor,color:t.values.secondaryColor,textTransform:"none",px:3,py:1,borderRadius:"6px","&:hover":{borderColor:t.values.secondaryColor,backgroundColor:"rgba(15, 23, 42, 0.04)",color:t.values.secondaryColor,transition:"background-color 150ms ease, color 150ms ease"}},children:"View Calendar"})]})]})]}),r&&R.jsx(uf,{open:r,onClose:()=>{a(!1),s(null),o(null)},color:"primary"===i?t.values.primaryColor:t.values.secondaryColor,onChangeComplete:e=>{const n="primary"===i?"primaryColor":"secondaryColor";t.setFieldValue(n,e)},anchorEl:l,title:"primary"===i?"Primary Color":"Secondary Color"})]})};pf.propTypes={formikProps:A.object.isRequired,viewOnly:A.bool};const ff=({icon:e,title:t,description:n,sx:r={},iconColor:a="#3b82f6",iconSize:i=24,enabled:o=!1,onToggle:l,expanded:s=!1,onCardClick:c,children:d,showToggle:u=!0,disabled:p=!1,...f})=>R.jsx(M,{children:R.jsxs(M,{sx:{padding:"16px 20px",borderRadius:"12px",backgroundColor:o?"#f0f9ff":"#f8fafc",border:o?"1.5px solid #3b82f6":"1.5px solid #e2e8f0",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:o?"#e0f2fe":"#f1f5f9",borderColor:o?"#2563eb":"#cbd5e1",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},...r},...f,children:[R.jsxs(M,{onClick:()=>null==c?void 0:c(),sx:{display:"flex",alignItems:"center",gap:3,cursor:"pointer",width:"100%"},children:[R.jsx(M,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:"50%",backgroundColor:o?"#3b82f6":"#dbeafe",color:o?"#ffffff":a,flexShrink:0},children:e&&R.jsx(e,{size:i})}),R.jsxs(M,{sx:{flex:1,minWidth:0},children:[R.jsx(_,{variant:"h6",sx:{fontSize:"16px",fontWeight:600,color:"#1e293b",marginBottom:"4px",lineHeight:1.3},children:t}),R.jsx(_,{variant:"body2",sx:{fontSize:"14px",color:"#64748b",lineHeight:1.4,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:n})]}),u&&R.jsx(M,{sx:{flexShrink:0},children:R.jsx(J,{checked:o,disabled:p,onChange:e=>{e.stopPropagation(),null==l||l(e.target.checked)},sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#3b82f6","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.04)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#3b82f6"}}})})]}),s&&d&&R.jsx(M,{sx:{mt:2,marginX:"auto",width:"calc(100% - 48px)",boxSizing:"border-box"},children:d})]})});ff.propTypes={icon:A.elementType.isRequired,title:A.string.isRequired,description:A.string.isRequired,sx:A.object,iconColor:A.string,iconSize:A.number,enabled:A.bool,onToggle:A.func,expanded:A.bool,onCardClick:A.func,children:A.node,showToggle:A.bool,disabled:A.bool};const hf=({options:e=[],value:t=[],onChange:n,sx:r={},idKey:a="id",labelKey:i="name",displayEmpty:o=!1,logicalOperator:l="AND",disabled:s=!1})=>{const c=e=>e[a]??e.value,d=e=>e[i]??e.label??String(c(e)),u=t=>{const n=(e||[]).find(e=>c(e)===t||e.value===t);return n?d(n):t};return R.jsx(Z,{multiple:!0,value:t||[],onChange:n,input:R.jsx(te,{}),disabled:s,renderValue:e=>{const t=[];return(e||[]).forEach((e,n)=>{n>0&&t.push(R.jsx(M,{component:"span",sx:{mx:.5,color:"#64748b",fontSize:12,fontWeight:500,alignSelf:"center"},children:l},`sep-${n}`)),t.push(R.jsx(ee,{label:u(e)},`chip-${e}`))}),R.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:.5,alignItems:"center"},children:t})},sx:{minWidth:320,...r||{}},displayEmpty:o,children:(e||[]).map(e=>R.jsx(Q,{value:c(e),children:d(e)},c(e)))})};hf.propTypes={options:A.array,value:A.array,onChange:A.func,sx:A.object,idKey:A.string,labelKey:A.string,displayEmpty:A.bool,logicalOperator:A.oneOf(["AND","OR"]),disabled:A.bool};const bf=999,gf=e=>{const t={};if(!e)return t;if(e.separateByServicesEnabled){const n=(e=>{const t=[];if(!e||!Array.isArray(e))return t;if(0===e.length)return t.push({ruleIndex:0,message:"Please add at least one separation rule between services."}),t;const n=new Set;return e.forEach((e,r)=>{const{service1:a,service2:i}=e;if(!a||!i)return void t.push({ruleIndex:r,message:"Select both services for this rule."});const o=a<i?`${a}-${i}`:`${i}-${a}`;n.has(o)?t.push({ruleIndex:r,message:"This service combination is already configured. Duplicate rules are not allowed."}):n.add(o)}),t})(e.separateByServicesRules||[]);n.length>0&&(t.separateByServicesRules=n)}if(e.seqEnabled){const n=(e=>{const t=[];if(!e||!Array.isArray(e))return t;if(0===e.length)return t.push({ruleIndex:0,message:"Please add at least one sequential ordering rule."}),t;const n=new Set,r=new Map;return e.forEach((e,a)=>{const{primary:i,secondary:o}=e,l=Array.isArray(o)&&o.length>0?o[0]:null;if(!i||!l)return void t.push({ruleIndex:a,message:"Select both scans (primary and prerequisite) for this rule."});const s=`${i}-${l}`;n.has(s)?t.push({ruleIndex:a,message:"This sequential ordering rule is already configured. Duplicate rules are not allowed."}):n.add(s);const c=`${l}-${i}`;r.has(c)?(r.get(c),t.push({ruleIndex:a,message:'This rule conflicts with another rule. You cannot have both "A after B" and "B after A" ordering rules.'})):r.set(s,a)}),t})(e.seqRules||[]);n.length>0&&(t.seqRules=n)}if(e.efficiencyEnabled){const n=Number(e.defaultSameServiceEfficiencyBonus);!Number.isFinite(n)||n<0?t.defaultSameServiceEfficiencyBonus="Default same-service efficiency bonus cannot be negative.":n>=bf&&(t.defaultSameServiceEfficiencyBonus="Default same-service efficiency bonus must be less than 999 minutes.");const r=(e=>{const t=[];if(!e||!Array.isArray(e))return t;const n=new Set;return e.forEach((e,r)=>{const{leftServiceId:a,rightServiceId:i}=e;if(!a||!i)return void t.push({ruleIndex:r,message:"Select both services for this rule."});const o=a<i?`${a}-${i}`:`${i}-${a}`;n.has(o)?t.push({ruleIndex:r,message:"This service combination is already configured. Duplicate efficiency bonus rules are not allowed."}):n.add(o)}),t})(e.efficiencyRules);r.length>0&&(t.efficiencyRules=r)}if(e.patientCooldownEnabled){const n=Number(e.patientCooldownGlobalMinutes);!Number.isFinite(n)||n<0?t.patientCooldownGlobalMinutes="Global patient cooldown cannot be negative.":n>=bf&&(t.patientCooldownGlobalMinutes="Global patient cooldown must be less than 999 minutes.");const r=(e=>{const t=[];if(!e||!Array.isArray(e))return t;const n=new Set;return e.forEach((e,r)=>{const{leftScanId:a,rightScanId:i}=e;if(!a||!i)return void t.push({ruleIndex:r,message:"Select both scans for this rule."});const o=a<i?`${a}-${i}`:`${i}-${a}`;n.has(o)?t.push({ruleIndex:r,message:"This scan combination is already configured. Duplicate cooldown rules are not allowed."}):n.add(o)}),t})(e.patientCooldownRules);r.length>0&&(t.patientCooldownRules=r)}if(e.slotRangeEnabled){const n=Number(e.slotDisplayRangeDays);!Number.isFinite(n)||n<=0?t.slotDisplayRangeDays="Slot display range must be at least 1 day.":n>=bf&&(t.slotDisplayRangeDays="Slot display range must be less than 999 days.")}if(e.variableRescheduleEnabled){const n=e.variableRescheduleHours,r=Number(n);if(!Number.isFinite(r)||r<.25)t.variableRescheduleHours="Minimum advance time must be at least 0.25 hours (15 minutes).";else if(r>=bf)t.variableRescheduleHours="Minimum advance time must be less than 999 hours.";else{0!==100*(Math.round(100*r)/100)%25&&(t.variableRescheduleHours="Advance time must be in 0.25 hour (15 minute) increments.")}}if(e.preventBackToBack){const n=(e=>{const t=[];if(!e||!Array.isArray(e))return t;if(0===e.length)return t.push({ruleIndex:0,message:"Please add at least one back-to-back prevention rule."}),t;const n=new Set,r=new Set;return e.forEach((e,a)=>{const{leftScanId:i,rightScanIds:o,minutes:l}=e;if(!i)return void t.push({ruleIndex:a,message:"Select a scan for the single select input."});if(!o||!Array.isArray(o)||0===o.length)return void t.push({ruleIndex:a,message:"Select at least one scan for the multiselect input."});o.includes(i)&&t.push({ruleIndex:a,message:"The same scan cannot be selected in both inputs. Please choose different scans."}),o.forEach(e=>{const n=`${i}->${e}`,o=`${e}->${i}`;r.has(n)?t.push({ruleIndex:a,message:"This scan pair is already configured in another rule. Duplicate pairs are not allowed."}):r.has(o)&&t.push({ruleIndex:a,message:"The pair between these scans is already configured in another rule (in reverse). Each scan pair can only be configured once across all rules."}),r.add(n)});const s=Number(l);!Number.isFinite(s)||s<=0?t.push({ruleIndex:a,message:"Gap must be at least 1 minute."}):s>=bf&&t.push({ruleIndex:a,message:"Gap must be less than 999 minutes."});const c=[...o].sort(),d=`${i}-[${c.join(",")}]`;n.has(d)?t.push({ruleIndex:a,message:"This scan combination is already configured. Duplicate back-to-back prevention rules are not allowed."}):n.add(d)}),t})(e.preventBackToBackRules||[]);n.length>0&&(t.preventBackToBackRules=n)}if(e.separateCombinationEnabled){const n=(e=>{const t=[];if(!e||!Array.isArray(e))return t;if(0===e.length)return t.push({ruleIndex:0,message:"Please add at least one separate-day combination rule."}),t;const n=new Set;return e.forEach((e,r)=>{const{leftScanId:a,rightScanId:i}=e;if(!a||!i)return void t.push({ruleIndex:r,message:"Select two scans for this combination."});const o=a<i?`${a}-${i}`:`${i}-${a}`;n.has(o)?t.push({ruleIndex:r,message:"This scan combination is already configured. Duplicate separate-day combination rules are not allowed."}):n.add(o)}),t})(e.separateCombinations||[]);n.length>0&&(t.separateCombinations=n)}if(e.technicianBufferEnabled){const n=Number(e.technicianBufferGlobalMinutes);!Number.isFinite(n)||n<=0?t.technicianBufferGlobalMinutes="Technician buffer time must be at least 1 minute.":n>=bf&&(t.technicianBufferGlobalMinutes="Technician buffer time must be less than 999 minutes.")}return t},xf=({children:e,sx:t={}})=>R.jsx(_,{variant:"caption",sx:{display:"block",color:"#64748b",mt:1,...t},children:e}),mf=({children:e,sx:t={}})=>R.jsx(M,{sx:{display:"flex",flexDirection:"row",gap:1,mb:1,p:{xs:1,sm:1.5},borderRadius:2,bgcolor:"white",border:"1px solid rgba(225, 236, 255, 1)",...t},children:e}),vf=({error:e,sx:t={}})=>e?R.jsx(_,{variant:"caption",sx:{color:"#dc2626",display:"block",mt:.5,fontSize:"0.75rem",fontStyle:"italic",backgroundColor:"#fef2f2",padding:"4px 8px",borderRadius:"4px",border:"1px solid #fecaca",...t},children:e}):null,yf=({scanId:e,serviceId:t,type:n="scan",findNameById:r,sx:a={}})=>{if(!e&&!t)return null;const i=e||t,o=(r?r(i):null)||`Unknown ${n} (ID: ${i})`,l="service"===n?`Service "${o}" is no longer selected in Available Services step. Please update or remove this rule.`:`Scan "${o}" is no longer selected in Available Services step. Please update or remove this rule.`;return R.jsx(_,{variant:"caption",sx:{color:"#dc2626",display:"block",mt:.5,fontSize:"0.75rem",fontStyle:"italic",backgroundColor:"#fef2f2",padding:"4px 8px",borderRadius:"4px",border:"1px solid #fecaca",...a},children:l})},wf=({options:e=[],value:t=[],findNameById:n,type:r="scan",...a})=>{const i=[...e||[]];return(t||[]).forEach(e=>{if(!i.find(t=>t.id===e)&&n){const t=n(e);t&&i.push({id:e,name:` ${t}`,isDeselected:!0})}}),R.jsx(hf,{options:i,value:t,...a})},Sf=({value:t,onValueChange:n,min:r=0,max:a=Number.MAX_SAFE_INTEGER,step:i=1,label:o,sx:l,width:s=120,inputProps:c,instant:d=!0})=>{const[u,p]=e.useState(0===t||t?String(t):""),f=!Number.isInteger(i),h="number"==typeof r&&r<0;e.useEffect(()=>{const e=0===t||t?String(t):"";p(t=>t!==e?e:t)},[t]);const b=e=>{if(""===e||"-"===e||"."===e||"-."===e)return null;const t=Number(e);return Number.isNaN(t)?null:t},g=()=>{const e=(e=>{var t;if(null===e)return null;let n=e;if("number"==typeof r&&(n=Math.max(r,n)),"number"==typeof a&&(n=Math.min(a,n)),"number"==typeof i&&i>0)if(n=Math.round(n/i)*i,Number.isInteger(i))n=Math.round(n);else{const e=(null==(t=String(i).split(".")[1])?void 0:t.length)||3;n=Number(n.toFixed(Math.min(e,6)))}return n})(b(u)),o=null===e?"number"==typeof r?r:0:e,l=String(o);p(l),"function"==typeof n&&o!==t&&n(o)},x=!f&&!h;return R.jsx(z,{type:x?"number":"text",value:u,onChange:e=>{const t=(e=>{let t=e??"";const n=h?f?/[^0-9.-]/g:/[^0-9-]/g:f?/[^0-9.]/g:/[^0-9]/g;if(t=String(t).replace(n,""),f){const e=t.indexOf(".");if(-1!==e){const n=t.slice(0,e+1),r=t.slice(e+1).replace(/\./g,"");t=n+r}}return h||(t=t.replace(/-/g,"")),h&&t.includes("-")&&(t=t.replace(/(?!^)-/g,""),t.startsWith("-")||(t="-"+t.replace(/-/g,""))),t})(e.target.value??"");if(p(t),d){const e=b(t);null!==e&&"function"==typeof n&&n(e)}},onBlur:()=>g(),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),g())},onWheel:e=>{e.target.blur()},sx:{width:s,...l},label:o,inputProps:{inputMode:f?"decimal":"numeric",step:i,min:r,max:a,pattern:f?"[0-9]*[.]?[0-9]*":"[0-9]*",...c}})},jf=({formikProps:t,clinicId:n,editingCalendar:r,viewOnly:a=!1})=>{var i,o,l,s,c,d,u,p,f,h,b;const[g,x]=e.useState(!1),[m,v]=e.useState(null),[y,w]=e.useState(new Map),[S,j]=e.useState(new Map),C=(null==(i=null==t?void 0:t.values)?void 0:i.logicEngine)||{},E=((t,n=300)=>{const[r,a]=e.useState({}),i=e.useRef(null);return e.useEffect(()=>(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{var e,n,r,i,o,l;if(!((null==(e=t.separateByServicesRules)?void 0:e.length)>0||(null==(n=t.seqRules)?void 0:n.length)>0||(null==(r=t.efficiencyRules)?void 0:r.length)>0||(null==(i=t.patientCooldownRules)?void 0:i.length)>0||(null==(o=t.preventBackToBackRules)?void 0:o.length)>0||(null==(l=t.separateCombinations)?void 0:l.length)>0||t.technicianBufferEnabled||t.efficiencyEnabled||t.patientCooldownEnabled||t.separateByServicesEnabled||t.seqEnabled||t.sameDayPriority||t.separateCombinationEnabled||t.preventBackToBack||t.slotRangeEnabled||t.variableRescheduleEnabled))return void a({});const s=gf(t||{});a(s)},n),()=>{i.current&&clearTimeout(i.current)}),[t.separateByServicesRules,t.seqRules,t.efficiencyRules,t.efficiencyEnabled,t.defaultSameServiceEfficiencyBonus,t.patientCooldownRules,t.patientCooldownEnabled,t.patientCooldownGlobalMinutes,t.separateByServicesEnabled,t.seqEnabled,t.sameDayPriority,t.separateCombinationEnabled,t.separateCombinations,t.preventBackToBack,t.preventBackToBackRules,t.technicianBufferEnabled,t.technicianBufferGlobalMinutes,t.slotRangeEnabled,t.slotDisplayRangeDays,t.variableRescheduleEnabled,t.variableRescheduleHours,t.sameDayExceptions,n]),r})(C,500),k=!r,B=(null==(o=null==t?void 0:t.values)?void 0:o.selectedScanTypeIds)||[],I=(null==(l=null==t?void 0:t.values)?void 0:l.subServices)||[],A=(null==(s=null==t?void 0:t.values)?void 0:s.services)||[],O=I,T=A,D=e.useMemo(()=>O.filter(e=>e.isComplex),[O]),P=e.useCallback(e=>{const t=O.find(t=>t.id===e);return t?t.name:S.get(e)||null},[O,S]),F=e.useCallback(e=>!!e&&!O.find(t=>t.id===e),[O]),N=e.useCallback(e=>!!e&&!D.find(t=>t.id===e),[D]),z=e.useCallback(e=>!!e&&!T.find(t=>t.id===e),[T]),q=e.useCallback(e=>{const t=T.find(t=>t.id===e);return t?t.name:y.get(e)||null},[T,y]),H=e.useCallback((e,n)=>{(null==t?void 0:t.setFieldValue)&&t.setFieldValue(`logicEngine.${e}`,n)},[null==t?void 0:t.setFieldValue]),L=e.useCallback(()=>{const e=[...C.separateByServicesRules||[]];e.push({id:Date.now(),service1:"",service2:""}),H("separateByServicesRules",e)},[C.separateByServicesRules,H]),W=e.useCallback(()=>{const e=[...C.seqRules||[]];0===e.length&&(C.seqPrimary||C.seqSecondary&&C.seqSecondary.length>0)?e.push({id:Date.now(),primary:C.seqPrimary||"",secondary:Array.isArray(C.seqSecondary)?C.seqSecondary:[],enabled:!!C.seqEnabled}):e.push({id:Date.now(),primary:"",secondary:[],enabled:!0}),H("seqRules",e)},[C.seqRules,C.seqPrimary,C.seqSecondary,C.seqEnabled,H]),G=e.useCallback(()=>{const e=[...C.efficiencyRules||[]];e.push({id:Date.now(),leftServiceId:"",rightServiceId:"",minutes:0}),H("efficiencyRules",e)},[C.efficiencyRules,H]),V=e.useCallback(()=>{const e=[...C.patientCooldownRules||[]];e.push({id:Date.now(),leftScanId:"",rightScanId:"",minutes:0}),H("patientCooldownRules",e)},[C.patientCooldownRules,H]),$=e.useCallback(()=>{const e=[...C.sameDayExceptions||[]];e.push({id:Date.now(),leftScanId:"",rightScanId:""}),H("sameDayExceptions",e)},[C.sameDayExceptions,H]),U=e.useCallback(()=>{const e=[...C.preventBackToBackRules||[]];e.push({id:Date.now(),leftScanId:"",rightScanIds:[],rightScanId:"",minutes:0}),H("preventBackToBackRules",e)},[C.preventBackToBackRules,H]),X=e.useCallback(()=>{const e=[...C.separateCombinations||[],{id:Date.now(),leftScanId:"",rightScanId:"",enabled:!0}];H("separateCombinations",e)},[C.separateCombinations,H]);e.useEffect(()=>{(async()=>{if(!n||!B.length)return null==t||t.setFieldValue("subServices",[]),void(null==t||t.setFieldValue("services",[]));x(!0),v(null);try{const e=await de.get(`https://healthco.clinic/api/api/services/clinic/${n}`),r=(Array.isArray(e.data)?e.data:[]).filter(e=>e.entityState===$e||e.entityState===Ue),a=new Map(y);r.forEach(e=>{a.set(e.serviceId,e.serviceName||"Service")}),w(a);const i=new Map(S);r.forEach(e=>{const t=e.serviceName||"Service";(e.scanTypes||[]).filter(e=>e.entityState===$e||e.entityState===Ue).forEach(e=>{i.set(e.scanTypeId,`${t}  ${e.name}`)})}),j(i);const o=[];r.forEach(e=>{const t=e.serviceName||"Service";(e.scanTypes||[]).filter(e=>(e.entityState===$e||e.entityState===Ue)&&B.includes(e.scanTypeId)).forEach(e=>{o.push({id:e.scanTypeId,name:`${t}  ${e.name}`,requiresDedicatedTechnician:!!e.requiresDedicatedTechnician,isComplex:!!e.isComplex})})});const l=Array.from(new Map(o.map(e=>[e.id,e])).values());t.setFieldValue("subServices",l);const s=r.map(e=>({id:e.serviceId,name:e.serviceName||"Service",scans:(e.scanTypes||[]).filter(e=>(e.entityState===$e||e.entityState===Ue)&&B.includes(e.scanTypeId)).map(e=>({id:e.scanTypeId,name:e.name,requiresDedicatedTechnician:!!e.requiresDedicatedTechnician,isComplex:!!e.isComplex}))})).filter(e=>e.scans.length>0);t.setFieldValue("services",s)}catch(e){v("Failed to load scans")}finally{x(!1)}})()},[n,B]),e.useEffect(()=>{(async()=>{if(n&&(null==t?void 0:t.setFieldValue))try{const e=await Le(n),r=(Array.isArray(e.data)?e.data:[]).map(e=>({id:e.technicianId||e.id,name:e.fullName||`${e.firstName||""} ${e.lastName||""}`.trim()||e.name||"Technician"}));t.setFieldValue("technicians",r)}catch(e){t.setFieldValue("technicians",[])}})()},[n]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=(null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{},r=n.seqRules;Array.isArray(r)&&0!==r.length||(n.seqPrimary||Array.isArray(n.seqSecondary)&&n.seqSecondary.length>0||n.seqEnabled?t.setFieldValue("logicEngine.seqRules",[{id:Date.now(),primary:n.seqPrimary||"",secondary:n.seqSecondary||[],enabled:!!n.seqEnabled}]):k&&t.setFieldValue("logicEngine.seqRules",[{id:Date.now(),primary:"",secondary:[],enabled:!0}]))},[null==(c=null==t?void 0:t.values)?void 0:c.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=(null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{},r=n.separateByServiceRules;Array.isArray(r)&&0!==r.length||(Array.isArray(n.serviceScanSelectedIds)&&n.serviceScanSelectedIds.length>0?t.setFieldValue("logicEngine.separateByServiceRules",[{id:Date.now(),scans:n.serviceScanSelectedIds||[],enabled:!!n.separateByService}]):k&&t.setFieldValue("logicEngine.separateByServiceRules",[{id:Date.now(),scans:[],enabled:!!n.separateByService}]))},[null==(d=null==t?void 0:t.values)?void 0:d.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=(null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{},r=n.dailyLimits;Array.isArray(r)&&0!==r.length||k&&t.setFieldValue("logicEngine.dailyLimits",[{id:Date.now(),subServiceIds:[],max:1,enabled:!!n.dailyLimitsEnabled}])},[null==(u=null==t?void 0:t.values)?void 0:u.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=(null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{},r=n.separateCombinations;Array.isArray(r)&&0!==r.length||(n.separateCombinationEnabled||k)&&t.setFieldValue("logicEngine.separateCombinations",[{id:Date.now(),leftScanId:"",rightScanId:"",enabled:!!n.separateCombinationEnabled}])},[null==(p=null==t?void 0:t.values)?void 0:p.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=(null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{},r=n.separateByServicesRules;Array.isArray(r)&&0!==r.length||(n.separateByServicesEnabled||k)&&t.setFieldValue("logicEngine.separateByServicesRules",[{id:Date.now(),service1:"",service2:""}])},[null==(f=null==t?void 0:t.values)?void 0:f.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;void 0===((null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{}).defaultSameServiceEfficiencyBonus&&t.setFieldValue("logicEngine.defaultSameServiceEfficiencyBonus",0)},[null==(h=null==t?void 0:t.values)?void 0:h.logicEngine,k]),e.useEffect(()=>{var e;if(!(null==t?void 0:t.setFieldValue))return;const n=((null==(e=null==t?void 0:t.values)?void 0:e.logicEngine)||{}).preventBackToBackRules;Array.isArray(n)&&0!==n.length||k&&t.setFieldValue("logicEngine.preventBackToBackRules",[{id:Date.now(),leftScanId:"",rightScanIds:[],rightScanId:"",minutes:0}])},[null==(b=null==t?void 0:t.values)?void 0:b.logicEngine,k]);const Y=e.memo(({leftValue:e,rightValue:t,minutesValue:n,onLeftChange:r,onRightChange:a,onMinutesChange:i,onDelete:o,options:l,label:s="Cooldown (minutes)",validationError:c,viewOnly:d=!1})=>{const u=l.filter(t=>t.id!==e),p=F(e),f=F(t),h=p||f;return R.jsxs(mf,{sx:{flexDirection:"column",gap:1,border:h?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:h?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr auto"},gridTemplateRows:{xs:"repeat(4, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:e,onChange:r,displayEmpty:!0,disabled:d,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:p?"#dc2626":"inherit",fontStyle:p?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),p&&e&&R.jsxs(Q,{value:e,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(e)||`Deselected Scan (ID: ${e})`]}),l.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsxs(Z,{value:t,onChange:a,displayEmpty:!0,disabled:d,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:f?"#dc2626":"inherit",fontStyle:f?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),f&&t&&R.jsxs(Q,{value:t,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(t)||`Deselected Scan (ID: ${t})`]}),u.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),!d&&R.jsx(M,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-end"},gridColumn:{xs:"1",sm:"4"},gridRow:{xs:"4",sm:"1"}},children:R.jsx(Re,{onDelete:o,fontSize:18})})]}),R.jsxs(M,{sx:{display:"flex",gap:{xs:1,sm:1},alignItems:"center",justifyContent:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},width:"100%"},children:[R.jsx(_,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s}),R.jsx(Sf,{value:n||0,onValueChange:i,min:0,step:1,instant:!1,sx:{width:{xs:"100%",sm:"auto"}},inputProps:{readOnly:d}})]}),h&&R.jsx(yf,{scanId:p?e:t,type:"scan",findNameById:P}),c&&R.jsx(vf,{error:c})]})}),K=({leftValue:e,rightValue:t,minutesValue:n,onLeftChange:r,onRightChange:a,onMinutesChange:i,onDelete:o,options:l,label:s="Efficiency Bonus (minutes)",key:c,errorPath:d,formikProps:u,validationError:p,viewOnly:f=!1})=>{const h=l.filter(t=>t.id!==e),b=z(e),g=z(t),x=b||g;return R.jsxs(mf,{sx:{flexDirection:"column",gap:1,border:x?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:x?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr auto"},gridTemplateRows:{xs:"repeat(4, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:e,onChange:e=>{r(e)},displayEmpty:!0,disabled:f,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:b?"#dc2626":"inherit",fontStyle:b?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Service"})}),b&&e&&R.jsxs(Q,{value:e,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",q(e)||`Deselected Service (ID: ${e})`]}),l.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsxs(Z,{value:t,onChange:e=>{a(e)},displayEmpty:!0,disabled:f,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:g?"#dc2626":"inherit",fontStyle:g?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Service"})}),g&&t&&R.jsxs(Q,{value:t,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",q(t)||`Deselected Service (ID: ${t})`]}),h.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),!f&&R.jsx(M,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-end"},gridColumn:{xs:"1",sm:"4"},gridRow:{xs:"4",sm:"1"}},children:R.jsx(Re,{onDelete:o,fontSize:18})})]}),R.jsxs(M,{sx:{display:"flex",gap:{xs:1,sm:1},alignItems:"center",justifyContent:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},width:"100%"},children:[R.jsx(_,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s}),R.jsx(Sf,{value:n,onValueChange:e=>{i(e)},min:0,step:1,instant:!1,sx:{width:{xs:"100%",sm:"auto"}},inputProps:{readOnly:f}})]}),x&&R.jsx(yf,{serviceId:b?e:t,type:"service",findNameById:q}),p&&R.jsx(vf,{error:p})]},c)};return R.jsxs(M,{children:[R.jsx(Pt,{icon:ne,title:"Logic Engine Configuration"}),g&&R.jsx(M,{sx:{display:"flex",justifyContent:"center",p:3},children:R.jsx(_,{variant:"body2",sx:{color:"#64748b"},children:"Loading services and scans..."})}),m&&R.jsx(M,{sx:{p:2,mb:2,bgcolor:"#fee2e2",borderRadius:1,border:"1px solid #fecaca"},children:R.jsx(_,{variant:"body2",sx:{color:"#dc2626"},children:m})}),0===B.length&&!g&&R.jsxs(M,{sx:{p:3,mb:2,bgcolor:"#f8fafc",borderRadius:1,border:"1px solid #e2e8f0",textAlign:"center"},children:[R.jsx(_,{variant:"body2",sx:{color:"#64748b",mb:1},children:"No scans selected for logic engine configuration"}),R.jsx(_,{variant:"caption",sx:{color:"#94a3b8"},children:'Please go back to the "Available Services" step and select at least one scan type to configure logic engine rules.'})]}),R.jsx(M,{children:B.length>0&&R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:2,mb:4},children:[R.jsxs(ff,{icon:re,title:"Separate Appointments by Services",description:"Configure separation of appointments based on selected services",enabled:!!C.separateByServicesEnabled,onToggle:e=>H("separateByServicesEnabled",e),expanded:!!C.separateByServicesEnabled,disabled:a,children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[R.jsx(_,{variant:"body2",children:"Separation Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:L})]}),(C.separateByServicesRules||[]).map((e,t)=>{var n;const r=e.service1||"",i=e.service2||"",o=T.filter(e=>e.id!==r),l=z(r),s=z(i),c=l||s;return R.jsxs(mf,{sx:{gap:2,flexDirection:"column",alignItems:"flex-start",position:"relative",border:c?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:c?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr auto"},gridTemplateRows:{xs:"repeat(4, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:r,onChange:e=>{const n=[...C.separateByServicesRules||[]];n[t]={...n[t],service1:e.target.value},H("separateByServicesRules",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:z(r)?"#dc2626":"inherit",fontStyle:z(r)?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Service"})}),z(r)&&r&&R.jsxs(Q,{value:r,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",q(r)||`Deselected Service (ID: ${r})`]}),T.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsxs(Z,{value:i,onChange:e=>{const n=[...C.separateByServicesRules||[]];n[t]={...n[t],service2:e.target.value},H("separateByServicesRules",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:z(i)?"#dc2626":"inherit",fontStyle:z(i)?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Service"})}),z(i)&&i&&R.jsxs(Q,{value:i,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",q(i)||`Deselected Service (ID: ${i})`]}),o.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),!a&&R.jsx(M,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-end"},gridColumn:{xs:"1",sm:"4"},gridRow:{xs:"4",sm:"1"}},children:R.jsx(Re,{onDelete:()=>{const e=[...C.separateByServicesRules];e.length>1?(e.splice(t,1),H("separateByServicesRules",e)):(e[t].service1="",e[t].service2="",H("separateByServicesRules",e))},fontSize:18})})]}),c&&R.jsx(yf,{serviceId:l?r:i,type:"service",findNameById:q}),(null==(n=E.separateByServicesRules)?void 0:n.find(e=>e.ruleIndex===t))&&R.jsx(vf,{error:E.separateByServicesRules.find(e=>e.ruleIndex===t).message})]},e.id||t)}),R.jsx(xf,{children:"Example: if a patient books both Service A and Service B, schedule them on different days to prevent conflicts."})]}),R.jsxs(ff,{icon:ae,title:"Sequential Scan Ordering",description:"Enforce execution order when specific scans are booked together",enabled:!!C.seqEnabled,onToggle:e=>H("seqEnabled",e),expanded:!!C.seqEnabled,disabled:a,children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[R.jsx(_,{variant:"body2",children:"Prerequisite Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:W})]}),(C.seqRules||[]).map((e,t)=>{var n;const r=e.primary||"",i=Array.isArray(e.secondary)&&e.secondary[0]||"",o=O.filter(e=>e.id!==r),l=F(r),s=F(i),c=l||s;return R.jsxs(mf,{sx:{gap:2,flexDirection:"column",alignItems:"flex-start",position:"relative",border:c?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:c?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr auto"},gridTemplateRows:{xs:"repeat(4, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:r,onChange:e=>{const n=[...C.seqRules||[]];n[t]={...n[t],primary:e.target.value},H("seqRules",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:l?"#dc2626":"inherit",fontStyle:l?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),l&&r&&R.jsxs(Q,{value:r,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(r)||`Deselected Scan (ID: ${r})`]}),O.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:{xs:"normal",sm:"nowrap"},textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"must be performed AFTER"}),R.jsxs(Z,{value:i,onChange:e=>{const n=[...C.seqRules||[]];n[t]={...n[t],secondary:e.target.value?[e.target.value]:[]},H("seqRules",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:s?"#dc2626":"inherit",fontStyle:s?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),s&&i&&R.jsxs(Q,{value:i,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(i)||`Deselected Scan (ID: ${i})`]}),o.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),!a&&R.jsx(M,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-end"},gridColumn:{xs:"1",sm:"4"},gridRow:{xs:"4",sm:"1"}},children:R.jsx(Re,{onDelete:()=>{const e=[...C.seqRules||[]];e.splice(t,1),H("seqRules",e)},fontSize:18})})]}),c&&R.jsx(yf,{scanId:l?r:i,type:"scan",findNameById:P}),(null==(n=E.seqRules)?void 0:n.find(e=>e.ruleIndex===t))&&R.jsx(vf,{error:E.seqRules.find(e=>e.ruleIndex===t).message})]},e.id||t)}),R.jsx(xf,{children:"Example: Pelvis  Contrast must be performed after Abdomen  Non-contrast when both are booked."})]}),R.jsx(ff,{icon:ie,title:"Multi-Service Efficiency Bonus",description:"Reduce total appointment duration when scans from different services are booked together",enabled:!!C.efficiencyEnabled,onToggle:e=>{H("efficiencyEnabled",e),e&&void 0===C.defaultSameServiceEfficiencyBonus&&H("defaultSameServiceEfficiencyBonus",0)},expanded:!!C.efficiencyEnabled,disabled:a,children:R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:2},children:[R.jsx(_,{variant:"body2",children:"Default Bonus"}),R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:[R.jsxs(mf,{sx:{mb:0},children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:600},children:"Default Same Service Efficiency Bonus"}),R.jsx(_,{variant:"caption",sx:{color:"#64748b"},children:"Applied when multiple scans from the same service are booked together"})]}),R.jsx(Sf,{value:C.defaultSameServiceEfficiencyBonus??0,onValueChange:e=>H("defaultSameServiceEfficiencyBonus",Math.max(0,Number(e??0))),min:0,step:1,label:"Minutes",inputProps:{readOnly:a}})]}),C.efficiencyEnabled&&E.defaultSameServiceEfficiencyBonus&&R.jsx(vf,{error:E.defaultSameServiceEfficiencyBonus,sx:{mt:0}})]}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[R.jsx(_,{variant:"body2",children:"Per-Service Efficiency Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:G})]}),(C.efficiencyRules||[]).map((e,n)=>{var r,i;return R.jsx(K,{leftValue:e.leftServiceId||"",rightValue:e.rightServiceId||"",minutesValue:e.minutes||0,onLeftChange:e=>{const t=[...C.efficiencyRules||[]];t[n]={...t[n],leftServiceId:e.target.value},H("efficiencyRules",t)},onRightChange:e=>{const t=[...C.efficiencyRules||[]];t[n]={...t[n],rightServiceId:e.target.value},H("efficiencyRules",t)},onMinutesChange:e=>{const t=[...C.efficiencyRules||[]];t[n]={...t[n],minutes:Math.max(0,Number(e??0))},H("efficiencyRules",t)},onDelete:()=>{const e=[...C.efficiencyRules||[]];e.splice(n,1),H("efficiencyRules",e)},options:T,label:"Efficiency Bonus (minutes)",errorPath:`logicEngine.efficiencyRules[${n}]`,formikProps:t,validationError:null==(i=null==(r=E.efficiencyRules)?void 0:r.find(e=>e.ruleIndex===n))?void 0:i.message,viewOnly:a},e.id||n)}),R.jsx(xf,{children:"Example: Reduce appointment time by 5 minutes when booking scans from Service A and Service B together. The default bonus applies automatically when multiple scans from the same service are booked."})]})}),R.jsxs(ff,{icon:re,title:"Technician Buffer Time",description:"Require a global buffer time for technicians between scans",enabled:!!C.technicianBufferEnabled,onToggle:e=>{H("technicianBufferEnabled",e),!e||void 0!==C.technicianBufferGlobalMinutes&&null!==C.technicianBufferGlobalMinutes||H("technicianBufferGlobalMinutes",0)},expanded:!!C.technicianBufferEnabled,disabled:a,children:[R.jsxs(mf,{children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:600},children:"Global Buffer Time"}),R.jsx(_,{variant:"caption",sx:{color:"#64748b"},children:"Applied to all scans when enabled"})]}),R.jsx(Sf,{value:C.technicianBufferGlobalMinutes??0,onValueChange:e=>H("technicianBufferGlobalMinutes",Math.max(0,Number(e??0))),min:0,step:1,label:"Minutes",inputProps:{readOnly:a}})]}),C.technicianBufferEnabled&&E.technicianBufferGlobalMinutes&&R.jsx(vf,{error:E.technicianBufferGlobalMinutes}),R.jsx(xf,{children:"Example: require a 10-minute buffer for technicians between any scans for prep/reset."})]}),R.jsx(ff,{icon:re,title:"Patient Cooldown Time",description:"Require a rest/cooldown for the patient between two specific scans",enabled:!!C.patientCooldownEnabled,onToggle:e=>{H("patientCooldownEnabled",e),e&&(void 0===C.patientCooldownGlobalMinutes||null===C.patientCooldownGlobalMinutes||C.patientCooldownGlobalMinutes<0)&&H("patientCooldownGlobalMinutes",0)},expanded:!!C.patientCooldownEnabled,disabled:a,children:R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:[R.jsx(_,{variant:"body2",children:"Default Global Cooldown"}),R.jsxs(mf,{children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:600},children:"Global Patient Cooldown"}),R.jsx(_,{variant:"caption",sx:{color:"#64748b"},children:"Used unless an explicit cooldown is selected for the scan pair"})]}),R.jsx(Sf,{value:C.patientCooldownGlobalMinutes??0,onValueChange:e=>H("patientCooldownGlobalMinutes",Math.max(0,Number(e??0))),min:0,step:1,label:"Minutes",inputProps:{readOnly:a}})]}),C.patientCooldownEnabled&&E.patientCooldownGlobalMinutes&&R.jsx(vf,{error:E.patientCooldownGlobalMinutes,sx:{mt:-1}}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[R.jsx(_,{variant:"body2",children:"Per-Scan Cooldown Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:V})]}),(C.patientCooldownRules||[]).map((e,n)=>{var r,i;return R.jsx(Y,{leftValue:e.leftScanId||"",rightValue:e.rightScanId||"",minutesValue:e.minutes||0,onLeftChange:e=>{const t=[...C.patientCooldownRules||[]];t[n]={...t[n],leftScanId:e.target.value},H("patientCooldownRules",t)},onRightChange:e=>{const t=[...C.patientCooldownRules||[]];t[n]={...t[n],rightScanId:e.target.value},H("patientCooldownRules",t)},onMinutesChange:e=>{const t=[...C.patientCooldownRules||[]];t[n]={...t[n],minutes:Math.max(0,Number(e??0))},H("patientCooldownRules",t)},onDelete:()=>{const e=[...C.patientCooldownRules||[]];e.splice(n,1),H("patientCooldownRules",e)},options:O,label:"Cooldown (minutes)",errorPath:`logicEngine.patientCooldownRules[${n}]`,formikProps:t,validationError:null==(i=null==(r=E.patientCooldownRules)?void 0:r.find(e=>e.ruleIndex===n))?void 0:i.message,viewOnly:a},e.id||n)}),R.jsx(xf,{children:"Example: after a contrast scan, require the patient to rest before proceeding to the second specified scan."})]})}),R.jsx(ff,{icon:oe,title:"Prioritize Same-Day Bookings",description:"Prefer scheduling all scans on the same day when possible",enabled:!!C.sameDayPriority,expanded:!!C.sameDayPriority,onToggle:e=>H("sameDayPriority",e),disabled:a,children:R.jsx(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:R.jsxs(M,{children:[R.jsx(_,{variant:"body2",sx:{mb:2,fontWeight:600},children:"Exceptions"}),R.jsx(_,{variant:"caption",sx:{display:"block",color:"#64748b",mb:2},children:"Define scan pairs that should can be scheduled on different days even when same-day booking is prioritized."}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[R.jsx(_,{variant:"body2",children:"Exception Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:$})]}),(C.sameDayExceptions||[]).map((e,t)=>{var n,r;const i=e.leftScanId||"",o=e.rightScanId||"",l=O.filter(e=>e.id!==i),s=F(i),c=F(o),d=s||c,u=null==(r=null==(n=E.sameDayExceptions)?void 0:n.find(e=>e.ruleIndex===t))?void 0:r.message;return R.jsxs(mf,{sx:{gap:2,flexDirection:"column",alignItems:"stretch",position:"relative",p:2,border:d?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:d?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[R.jsxs(_,{variant:"body2",sx:{fontWeight:600},children:["Exception #",t+1]}),!a&&R.jsx(Re,{onDelete:()=>{const e=[...C.sameDayExceptions||[]];e.splice(t,1),H("sameDayExceptions",e)},fontSize:18})]}),R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr"},gridTemplateRows:{xs:"repeat(3, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:i,onChange:e=>{const n=[...C.sameDayExceptions||[]];n[t]={...n[t],leftScanId:e.target.value},H("sameDayExceptions",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:s?"#dc2626":"inherit",fontStyle:s?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),s&&i&&R.jsxs(Q,{value:i,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(i)||`Deselected Scan (ID: ${i})`]}),O.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsxs(Z,{value:o,onChange:e=>{const n=[...C.sameDayExceptions||[]];n[t]={...n[t],rightScanId:e.target.value},H("sameDayExceptions",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:c?"#dc2626":"inherit",fontStyle:c?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),c&&o&&R.jsxs(Q,{value:o,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(o)||`Deselected Scan (ID: ${o})`]}),l.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]})]}),d&&R.jsx(yf,{scanId:s?i:o,findNameById:P,sx:{mt:1}}),R.jsx(vf,{error:u})]},e.id||t)}),R.jsx(xf,{sx:{mt:2},children:'Example: Prevent "Stress Test" and "Resting ECG" from being scheduled on the same day due to patient fatigue. The patient can still book the scans on same day if they so desire.'})]})})}),R.jsx(ff,{icon:le,title:"Daily Complex Scan Limit per Technician",description:"Limit how many times a technician can perform a complex scan per day",enabled:!!C.dailyLimitsEnabled,expanded:!1,onToggle:e=>H("dailyLimitsEnabled",e),disabled:a}),R.jsx(ff,{icon:se,title:"Automatic Gender Matching",description:"Match patient gender to technician for sensitive scans",enabled:!!C.genderMatchingEnabled,onToggle:e=>H("genderMatchingEnabled",e),expanded:!1,disabled:a}),R.jsx(ff,{icon:re,title:"Dedicated Technicians for scans",description:"Assign specific technicians to specialized scans",enabled:!!C.dedicatedAssignmentsEnabled,onToggle:e=>H("dedicatedAssignmentsEnabled",e),expanded:!1,disabled:a,children:R.jsx(xf,{children:"Example: only allow Advanced Echo to be performed by Technician Alice or Bob."})}),R.jsx(ff,{icon:ce,title:"Prevent Back-to-Back Complex scans",description:"Enforce a minimum gap after long/complex appointments",enabled:!!C.preventBackToBack,expanded:!!C.preventBackToBack,onToggle:e=>{H("preventBackToBack",e),!e||C.preventBackToBackRules&&0!==C.preventBackToBackRules.length||H("preventBackToBackRules",[{id:Date.now(),leftScanId:"",rightScanIds:[],rightScanId:"",minutes:0}])},disabled:a,children:R.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[R.jsx(_,{variant:"body2",children:"Gap Rules"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:U})]}),(C.preventBackToBackRules||[]).map((e,t)=>{var n;const r=e.leftScanId||"",i=Array.isArray(e.rightScanIds)&&e.rightScanIds.length>0?e.rightScanIds:e.rightScanId?[e.rightScanId]:[],o=N(r),l=i.some(e=>N(e)),s=o||l;return R.jsxs(mf,{sx:{flexDirection:"column",gap:1,border:s?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:s?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr auto"},gridTemplateRows:{xs:"repeat(4, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:r,onChange:e=>{const n=[...C.preventBackToBackRules||[]];n[t]={...n[t],leftScanId:e.target.value},H("preventBackToBackRules",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:o?"#dc2626":"inherit",fontStyle:o?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Complex Scan"})}),o&&r&&R.jsxs(Q,{value:r,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(r)||`Deselected Complex Scan (ID: ${r})`]}),D.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsx(wf,{options:D.filter(e=>e.id!==r),value:i,findNameById:P,type:"scan",onChange:e=>{const n=e.target.value||[],r=[...C.preventBackToBackRules||[]];r[t]={...r[t],rightScanIds:n,rightScanId:n[0]||""},H("preventBackToBackRules",r)},logicalOperator:"OR",displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"}}}),!a&&R.jsx(M,{sx:{display:"flex",justifyContent:{xs:"center",sm:"flex-end"},gridColumn:{xs:"1",sm:"4"},gridRow:{xs:"4",sm:"1"}},children:R.jsx(Re,{onDelete:()=>{const e=[...C.preventBackToBackRules||[]];e.length>1?(e.splice(t,1),H("preventBackToBackRules",e)):e[0]?(e[0].leftScanId="",e[0].rightScanIds=[],e[0].rightScanId="",e[0].minutes=0,H("preventBackToBackRules",e)):H("preventBackToBackRules",[])},fontSize:18})})]}),R.jsxs(M,{sx:{display:"flex",gap:{xs:1,sm:1},alignItems:"center",justifyContent:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},width:"100%"},children:[R.jsx(_,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Gap (minutes)"}),R.jsx(Sf,{value:e.minutes||0,onValueChange:e=>{const n=[...C.preventBackToBackRules||[]];n[t]={...n[t],minutes:Math.max(0,Number(e??0))},H("preventBackToBackRules",n)},min:0,step:1,instant:!1,sx:{width:{xs:"100%",sm:"auto"}},inputProps:{readOnly:a}})]}),s&&R.jsx(yf,{scanId:o?r:i.find(e=>N(e)),type:"scan",findNameById:P}),(null==(n=E.preventBackToBackRules)?void 0:n.find(e=>e.ruleIndex===t))&&R.jsx(vf,{error:E.preventBackToBackRules.find(e=>e.ruleIndex===t).message})]},e.id||t)}),R.jsx(xf,{children:"Example: After a long or complex scan (e.g. MRI  Cardiac), require a 30-minute gap before scheduling another specific complex scan."})]})}),R.jsxs(ff,{icon:ce,title:"Slot Display Range",description:"Limit how far in advance slots are shown to patients",enabled:!!C.slotRangeEnabled,onToggle:e=>H("slotRangeEnabled",e),expanded:!!C.slotRangeEnabled,disabled:a,children:[R.jsxs(mf,{children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:600},children:"Slot Display Range"}),R.jsx(_,{variant:"caption",sx:{color:"#64748b"},children:"Display slots up to this many days in advance"})]}),R.jsx(Sf,{value:C.slotDisplayRangeDays||0,onValueChange:e=>H("slotDisplayRangeDays",Math.max(0,Number(e??0))),min:0,step:1,label:"Days",inputProps:{readOnly:a}})]}),E.slotDisplayRangeDays?R.jsx(vf,{error:E.slotDisplayRangeDays,sx:{mt:1}}):null,R.jsx(xf,{children:"Example: show appointments only up to 30 days in advance to manage demand."})]}),R.jsxs(ff,{icon:ne,title:"Variable Advance Time for Reschedule/Cancellation",description:"Require minimum hours in advance for reschedule/cancellation",enabled:!!C.variableRescheduleEnabled,expanded:!!C.variableRescheduleEnabled,onToggle:e=>H("variableRescheduleEnabled",e),disabled:a,children:[R.jsxs(mf,{children:[R.jsxs(M,{sx:{display:"flex",flexDirection:"column",flex:1},children:[R.jsx(_,{variant:"body2",sx:{fontWeight:600},children:"Minimum Advance Time"}),R.jsx(_,{variant:"caption",sx:{color:"#64748b"},children:"Required hours in advance for reschedule/cancellation"})]}),R.jsx(Sf,{value:C.variableRescheduleHours||0,onValueChange:e=>H("variableRescheduleHours",Math.max(0,Number(e??0))),min:0,step:.25,label:"Hours",inputProps:{placeholder:"e.g. 0.25, 0.5, 1, 2",readOnly:a}})]}),E.variableRescheduleHours?R.jsx(vf,{error:E.variableRescheduleHours,sx:{mt:1}}):null,R.jsx(xf,{children:"Examples: Require at least 24 hours notice to reschedule or cancel an appointment. Inputs can be in fractions with a step of 0.25 (15 minutes), e.g., 0.25 = 15 minutes, 0.5 = 30 minutes, 1 = 1 hour."})]}),R.jsxs(ff,{icon:se,title:"Separate-Day Scan Combinations",description:"Require certain combinations of scans to be booked on separate days",enabled:!!C.separateCombinationEnabled,onToggle:e=>H("separateCombinationEnabled",e),expanded:!!C.separateCombinationEnabled,disabled:a,children:[R.jsx(_,{variant:"body2",sx:{mb:1},children:"Define scan pairs that must be scheduled on different days. Choose two scans per rule."}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[R.jsx(_,{variant:"body2",children:"Combinations"}),!a&&R.jsx(He,{variant:"contained",label:"Add Rule",onClick:X})]}),(C.separateCombinations||[]).map((e,t)=>{var n,r;const i=e.leftScanId||"",o=e.rightScanId||"",l=O.filter(e=>e.id!==i),s=F(i),c=F(o),d=s||c,u=null==(r=null==(n=E.separateCombinations)?void 0:n.find(e=>e.ruleIndex===t))?void 0:r.message;return R.jsxs(mf,{sx:{gap:2,flexDirection:"column",alignItems:"stretch",position:"relative",p:2,border:d?"1px solid #dc2626":"1px solid rgba(225, 236, 255, 1)",bgcolor:d?"#fef2f2":"white"},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[R.jsxs(_,{variant:"body2",sx:{fontWeight:600},children:["Combination #",t+1]}),!a&&R.jsx(Re,{onDelete:()=>{const e=[...C.separateCombinations||[]];e.length>1?e.splice(t,1):e[t]={...e[t],leftScanId:"",rightScanId:"",enabled:!!C.separateCombinationEnabled},H("separateCombinations",e)},fontSize:18})]}),R.jsxs(M,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr auto 1fr"},gridTemplateRows:{xs:"repeat(3, auto)",sm:"1fr"},alignItems:"center",gap:2,width:"100%"},children:[R.jsxs(Z,{value:i,onChange:e=>{const n=[...C.separateCombinations||[]];n[t]={...n[t],leftScanId:e.target.value},H("separateCombinations",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"1"},gridRow:{xs:"1",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:s?"#dc2626":"inherit",fontStyle:s?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),s&&i&&R.jsxs(Q,{value:i,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(i)||`Deselected Scan (ID: ${i})`]}),O.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]}),R.jsx(_,{sx:{color:"#64748b",whiteSpace:"nowrap",textAlign:"center",gridColumn:{xs:"1",sm:"2"},gridRow:{xs:"2",sm:"1"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:{xs:600,sm:400}},children:"AND"}),R.jsxs(Z,{value:o,onChange:e=>{const n=[...C.separateCombinations||[]];n[t]={...n[t],rightScanId:e.target.value},H("separateCombinations",n)},displayEmpty:!0,disabled:a,sx:{width:"100%",minWidth:0,gridColumn:{xs:"1",sm:"3"},gridRow:{xs:"3",sm:"1"},"& .MuiSelect-select":{whiteSpace:"normal",lineHeight:1.3,py:1.25,display:"block",color:c?"#dc2626":"inherit",fontStyle:c?"italic":"normal"}},MenuProps:{PaperProps:{sx:{maxWidth:520,"& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"break-word",alignItems:"flex-start",lineHeight:1.3,py:1.25}}}},children:[R.jsx(Q,{value:"",disabled:!0,children:R.jsx("span",{style:{color:"#9ca3af"},children:"Select Scan"})}),c&&o&&R.jsxs(Q,{value:o,sx:{color:"#dc2626",fontStyle:"italic"},children:[" ",P(o)||`Deselected Scan (ID: ${o})`]}),l.map(e=>R.jsx(Q,{value:e.id,children:e.name},e.id))]})]}),d&&R.jsx(yf,{scanId:s?i:o,findNameById:P,sx:{mt:1}}),R.jsx(vf,{error:u})]},e.id||t)}),R.jsx(xf,{children:"Example: mark [Arterial Extremity + Venous Extremity] as a separate-day combination because one requires an empty stomach while the other requires a full stomach."})]})]})})]})};jf.propTypes={formikProps:A.object.isRequired,clinicId:A.string,editingCalendar:A.object,viewOnly:A.bool};const Cf=({formikProps:t,viewOnly:n=!1})=>{const r=e.useRef(!1),a=["name","email","phone","dateOfBirth","gender"];e.useEffect(()=>{const e=t.values.patientFormSettings||{},n=a.some(t=>{var n,r;return!0!==(null==(n=e[t])?void 0:n.enabled)||!0!==(null==(r=e[t])?void 0:r.required)});if(!t.values.patientFormSettings||n){const n={...e,name:{enabled:!0,required:!0},email:{enabled:!0,required:!0},phone:{enabled:!0,required:!0},gender:{enabled:!0,required:!0},dateOfBirth:{enabled:!0,required:!0}};e.identifyAs||(n.identifyAs={enabled:!1,required:!1}),e.allergies||(n.allergies={enabled:!1,required:!1}),e.medicalNotes||(n.medicalNotes={enabled:!1,required:!1}),e.healthCardNumber||(n.healthCardNumber={enabled:!0,required:!1}),e.healthCardProvince||(n.healthCardProvince={enabled:!1,required:!1}),t.setFieldValue("patientFormSettings",n),r.current=!0}},[t.values.patientFormSettings]);const i=(e,n,r)=>{if(a.includes(e))return;const i=t.values.patientFormSettings||{},o=i[e]||{enabled:!1,required:!1},l={...i,[e]:{...o,[n]:r,..."enabled"!==n||r?{}:{required:!1}}};t.setFieldValue("patientFormSettings",l)},o=(e,n)=>{var r,i;return!!a.includes(e)||((null==(i=null==(r=t.values.patientFormSettings)?void 0:r[e])?void 0:i[n])||!1)};return R.jsxs(M,{children:[R.jsx(Pt,{icon:ue,title:"Patient Form Fields"}),R.jsx(_,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Configure which patient information fields to collect during appointment booking."}),R.jsx(M,{sx:{display:"flex",flexDirection:"column",gap:2},children:[{key:"name",label:"Name",enabled:!0,required:!0,locked:!0},{key:"email",label:"Email",enabled:!0,required:!0,locked:!0},{key:"phone",label:"Phone",enabled:!0,required:!0,locked:!0},{key:"gender",label:"Gender at Birth",enabled:!0,required:!0,locked:!0},{key:"identifyAs",label:"Identify as",enabled:!1,required:!1},{key:"allergies",label:"Allergies",enabled:!1,required:!1},{key:"dateOfBirth",label:"Date of Birth",enabled:!0,required:!0,locked:!0},{key:"medicalNotes",label:"Medical Notes",enabled:!1,required:!1},{key:"healthCardNumber",label:"Health Card Number / UCI Number",enabled:!0,required:!1},{key:"healthCardProvince",label:"Health Card Province",enabled:!1,required:!1}].map(e=>{const t=o(e.key,"enabled"),r=o(e.key,"required"),a=e.locked||!1;return R.jsxs(M,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",py:2,px:3,borderRadius:2,backgroundColor:a?"#f0f9ff":"#f8fafc",border:a?"1px solid #0ea5e9":"1px solid #e2e8f0"},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1,minWidth:{xs:"auto",sm:200},mb:{xs:1,sm:0}},children:[R.jsx(_,{variant:"body1",sx:{fontWeight:500},children:e.label}),a&&R.jsx(_,{variant:"caption",sx:{color:"#0ea5e9",backgroundColor:"#e0f2fe",px:1,py:.25,borderRadius:1,fontSize:"0.7rem",fontWeight:500},children:"Necessary"})]}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:3,width:{xs:"100%",sm:"auto"},justifyContent:{xs:"space-between",sm:"flex-end"}},children:[R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[R.jsx(J,{checked:t,disabled:n||a,onChange:t=>i(e.key,"enabled",t.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#3b82f6","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.04)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#3b82f6"}}}),R.jsx(_,{variant:"body2",color:t?"primary.main":"text.secondary",children:"Enabled"})]}),R.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[R.jsx(J,{checked:r,disabled:n||!t||a,onChange:t=>i(e.key,"required",t.target.checked),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#3b82f6","&:hover":{backgroundColor:"rgba(59, 130, 246, 0.04)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#3b82f6"}}}),R.jsx(_,{variant:"body2",color:t&&r?"primary.main":"text.secondary",children:"Required"})]})]})]},e.key)})})]})};Cf.propTypes={formikProps:A.object.isRequired,viewOnly:A.bool};const Ef=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}],kf=({formikProps:e,viewOnly:t=!1})=>{const{values:n,setFieldValue:r}=e,a=((e,t)=>{if(!e.workingHours||!Array.isArray(e.workingHours)||7!==e.workingHours.length){const e=Ef.map((e,t)=>({day:e.key,label:e.label,enabled:t<5,start:"09:00",end:"17:00"}));return t("workingHours",e),e}return e.workingHours})(n,r);return R.jsxs(M,{children:[R.jsx(Pt,{icon:pe,title:"Working Hours",subtitle:"Set the working hours for this calendar. These will determine when appointments can be booked."}),R.jsx(M,{sx:{mt:2},children:R.jsx(We,{workingHours:a,onToggle:(e,t)=>{const n=[...a];n[e]={...n[e],enabled:t.target.checked},r("workingHours",n)},onTimeChange:(e,t,n)=>{const i=[...a];i[e]={...i[e],[t]:n.target.value},r("workingHours",i)},variant:"grid",viewOnly:t})})]})};kf.propTypes={formikProps:A.object.isRequired,viewOnly:A.bool};const Rf=({icon:e,isActive:t,isCompleted:n,stepNumber:r})=>{let a="#e5e7eb",i="#6b7280";return t?(a="#3b82f6",i="#ffffff"):n&&(a="#10b981",i="#ffffff"),R.jsx(M,{className:"calendar-step-icon",sx:{width:{xs:32,sm:48},height:{xs:32,sm:48},borderRadius:"50%",backgroundColor:a,color:i,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",fontSize:{xs:16,sm:20}},children:R.jsx(e,{size:20,style:{fontSize:"inherit"}})})},Bf=({steps:e,currentStep:t})=>R.jsx(M,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:4,px:2},children:e.map((n,r)=>R.jsxs(M,{sx:{display:"flex",alignItems:"center"},children:[R.jsx(Rf,{icon:n.icon,isActive:t===r,isCompleted:t>r,stepNumber:r+1}),r<e.length-1&&R.jsx(M,{className:"calendar-step-connector",sx:{width:{xs:2,sm:60},height:2,backgroundColor:t>r?"#10b981":"#e5e7eb",mx:{xs:.5,sm:2},transition:"background-color 0.3s ease"}})]},n.id))}),Mf=ge({calendarName:xe().required("Calendar name is required")}),_f=e.forwardRef(({open:t,onClose:n,onSave:r,clinicId:a,editingCalendar:i,clinicServices:o=[],clinicServicesLoading:l=!1,viewOnly:s=!1},c)=>{const[d,u]=e.useState(0),[p,f]=e.useState(!1),h=["name","email","phone","gender","dateOfBirth"],b=(e={})=>{const t={...e||{}};return h.forEach(e=>{t[e]={enabled:!0,required:!0}}),t},[g,x]=e.useState({calendarName:"",description:"",welcomeMessage:"Welcome! Please select your preferred appointment time.",thankYouMessage:"Thank you for booking with us. We look forward to seeing you!",logo:null,logoUrl:null,primaryColor:"#3b82f6",secondaryColor:"#1e40af",selectedScanTypeIds:[],logicEngine:{separateByService:!1,incompatibleSubServices:[],seqEnabled:!1,seqPrimary:"",seqSecondary:[],seqMinWait:0,efficiencyEnabled:!1,efficiencyBonus:0,sameDayPriority:!1,sameDayRules:[],dailyLimitsEnabled:!1,genderMatchingEnabled:!1,dedicatedAssignmentsEnabled:!1,dedicatedAssignments:{},preventBackToBack:!1,gapAfterLong:15,thresholdLong:60,preventBackToBackApplyTo:[],slotRangeEnabled:!1,slotDisplayRangeDays:30,variableRescheduleEnabled:!1,variableRescheduleHours:0,technicianBufferEnabled:!1,technicianBufferGlobalMinutes:0,patientCooldownEnabled:!1,patientCooldownGlobalMinutes:0,separateByServicesEnabled:!1,separateByServicesRules:[],seqRules:[],efficiencyRules:[],defaultSameServiceEfficiencyBonus:0,patientCooldownRules:[],dailyLimits:[],preventBackToBackRules:[],separateCombinationEnabled:!1,separateCombinations:[],separateByServiceRules:[]},patientFormSettings:b({name:{enabled:!0,required:!0},email:{enabled:!0,required:!0},phone:{enabled:!0,required:!0},gender:{enabled:!0,required:!0},allergies:{enabled:!1,required:!1},dateOfBirth:{enabled:!0,required:!0},medicalNotes:{enabled:!1,required:!1},healthCardNumber:{enabled:!0,required:!1},healthCardProvince:{enabled:!1,required:!1}})}),m=("undefined"!=typeof window?localStorage.getItem("userRole"):null)===be.GLOBAL_ADMIN,v=[{id:"basic",title:"Basic Information",icon:F},{id:"design",title:"Design & Branding",icon:K},{id:"services",title:"Available Services",icon:O},{id:"hours",title:"Working Hours",icon:pe},{id:"logic",title:"Logic Engine Configuration",icon:ne},{id:"patient",title:"Patient Form Fields",icon:ue}],y=m?v:v.filter(e=>"logic"!==e.id);e.useEffect(()=>{d>=y.length&&u(Math.max(0,y.length-1))},[y.length,d]),e.useEffect(()=>{t&&w()},[i,t]);const w=()=>{if(u(0),f(!1),i){const e=[];i.availableServices&&Array.isArray(i.availableServices)&&i.availableServices.forEach(t=>{t.scanTypeIds&&Array.isArray(t.scanTypeIds)&&e.push(...t.scanTypeIds)});const t=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}].map(e=>{var t;const n=null==(t=i.workingHours)?void 0:t.find(t=>({0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}[t.dayOfWeek]===e.key));return n?{day:e.key,label:e.label,enabled:n.isAvailable,start:n.startTime?n.startTime.substring(0,5):"09:00",end:n.endTime?n.endTime.substring(0,5):"17:00"}:{day:e.key,label:e.label,enabled:!1,start:"09:00",end:"17:00"}}),n={separateByService:!1,incompatibleSubServices:[],seqEnabled:!1,seqPrimary:"",seqSecondary:[],seqMinWait:0,efficiencyEnabled:!1,efficiencyBonus:0,sameDayPriority:!1,sameDayRules:[],dailyLimitsEnabled:!1,genderMatchingEnabled:!1,dedicatedAssignmentsEnabled:!1,dedicatedAssignments:{},preventBackToBack:!1,gapAfterLong:15,thresholdLong:60,preventBackToBackApplyTo:[],slotRangeEnabled:!1,slotDisplayRangeDays:30,variableRescheduleEnabled:!1,variableRescheduleHours:0,technicianBufferEnabled:!1,technicianBufferGlobalMinutes:0,patientCooldownEnabled:!1,patientCooldownGlobalMinutes:0,separateByServicesEnabled:!1,separateByServicesRules:[],seqRules:[],efficiencyRules:[],defaultSameServiceEfficiencyBonus:0,patientCooldownRules:[],dailyLimits:[],preventBackToBackRules:[],separateCombinationEnabled:!1,separateCombinations:[],separateByServiceRules:[]};if(i.rules&&Array.isArray(i.rules)&&i.rules.forEach(e=>{try{const t="string"==typeof e.config?JSON.parse(e.config):e.config;switch(e.ruleCode){case"SAS":n.separateByServicesEnabled=!0,n.separateByServicesRules||(n.separateByServicesRules=[]),t.service1&&t.service2&&n.separateByServicesRules.push({id:Date.now()+Math.random(),service1:t.service1,service2:t.service2});break;case"SSO":n.seqEnabled=!0,n.seqRules||(n.seqRules=[]),t.primary&&t.secondary&&n.seqRules.push({id:Date.now()+Math.random(),primary:t.primary,secondary:t.secondary,enabled:!0,minWait:t.minWait||0});break;case"MEB":n.efficiencyEnabled=!0,"same-service"===t.type?n.defaultSameServiceEfficiencyBonus=t.minutes??0:t.leftServiceId&&t.rightServiceId&&(n.efficiencyRules||(n.efficiencyRules=[]),n.efficiencyRules.push({id:Date.now()+Math.random(),leftServiceId:t.leftServiceId,rightServiceId:t.rightServiceId,minutes:t.minutes||0}));break;case"TBT":n.technicianBufferEnabled=!0,n.technicianBufferGlobalMinutes=void 0!==t.globalMinutes&&null!==t.globalMinutes?t.globalMinutes:0;break;case"PCT":n.patientCooldownEnabled=!0,"global"===t.type?n.patientCooldownGlobalMinutes=t.minutes||0:t.leftScanId&&t.rightScanId&&(n.patientCooldownRules||(n.patientCooldownRules=[]),n.patientCooldownRules.push({id:Date.now()+Math.random(),leftScanId:t.leftScanId,rightScanId:t.rightScanId,minutes:t.minutes||0}));break;case"PSB":n.sameDayPriority=!0,!0===t.isException?(n.sameDayExceptions||(n.sameDayExceptions=[]),t.subServiceIds&&t.subServiceIds.length>=2&&n.sameDayExceptions.push({id:Date.now()+Math.random(),leftScanId:t.subServiceIds[0],rightScanId:t.subServiceIds[1]})):(n.sameDayRules||(n.sameDayRules=[]),t.subServiceIds&&n.sameDayRules.push({id:Date.now()+Math.random(),subServiceIds:t.subServiceIds}));break;case"DCL":n.dailyLimitsEnabled=!0,n.dailyLimits||(n.dailyLimits=[]),t.subServiceIds&&t.maxPerDay&&n.dailyLimits.push({id:Date.now()+Math.random(),subServiceIds:t.subServiceIds,max:t.maxPerDay,enabled:!0});break;case"AGM":n.genderMatchingEnabled=t.enabled||!1;break;case"DTS":n.dedicatedAssignmentsEnabled=t.enabled||!1,t.assignments&&(n.dedicatedAssignments=t.assignments);break;case"PBC":n.preventBackToBack=!0,n._rawPbc||(n._rawPbc=[]),t.leftScanId&&t.rightScanId&&t.minutes>0&&n._rawPbc.push({leftScanId:t.leftScanId,rightScanId:t.rightScanId,minutes:t.minutes}),void 0!==t.gapAfterLong&&(n.gapAfterLong=t.gapAfterLong),void 0!==t.thresholdLong&&(n.thresholdLong=t.thresholdLong),t.applyTo&&Array.isArray(t.applyTo)&&(n.preventBackToBackApplyTo=t.applyTo);break;case"SDR":n.slotRangeEnabled=t.enabled||!1,void 0!==t.days&&(n.slotDisplayRangeDays=t.days);break;case"VTRC":n.variableRescheduleEnabled=t.enabled||!1,void 0!==t.hours&&(n.variableRescheduleHours=t.hours);break;case"SDCC":if(n.separateCombinationEnabled=!0,n.separateCombinations||(n.separateCombinations=[]),t.leftScanId&&t.rightScanId)n.separateCombinations.push({id:Date.now()+Math.random(),leftScanId:t.leftScanId,rightScanId:t.rightScanId,enabled:void 0===t.enabled||t.enabled});else if(t.scans&&Array.isArray(t.scans)){const e=t.scans.filter(e=>null!=e);for(let r=0;r<e.length;r++)for(let a=r+1;a<e.length;a++){const i=e[r],o=e[a];i&&o&&n.separateCombinations.push({id:Date.now()+Math.random(),leftScanId:i,rightScanId:o,enabled:void 0===t.enabled||t.enabled})}}}}catch(t){}}),n._rawPbc&&Array.isArray(n._rawPbc)&&n._rawPbc.length>0){const e=new Map;n._rawPbc.forEach(t=>{const n=`${t.leftScanId}::${t.minutes}`;e.has(n)||e.set(n,{leftScanId:t.leftScanId,minutes:t.minutes,rightScanIds:[]});const r=e.get(n);r.rightScanIds.includes(t.rightScanId)||r.rightScanIds.push(t.rightScanId)}),n.preventBackToBackRules=Array.from(e.values()).map(e=>({id:Date.now()+Math.random(),leftScanId:e.leftScanId,rightScanIds:e.rightScanIds,rightScanId:e.rightScanIds[0]||"",minutes:e.minutes})),delete n._rawPbc}const r=i.patientFormFields?i.patientFormFields.reduce((e,t)=>{const n=t.fieldName||t.FieldName,r=void 0!==t.enabled?t.enabled:t.Enabled,a=void 0!==t.required?t.required:t.Required;return e[n]={enabled:r,required:a},e},{name:{enabled:!0,required:!0},email:{enabled:!0,required:!0},phone:{enabled:!0,required:!0},gender:{enabled:!0,required:!0},allergies:{enabled:!1,required:!1},dateOfBirth:{enabled:!0,required:!0},medicalNotes:{enabled:!1,required:!1},healthCardNumber:{enabled:!0,required:!1},healthCardProvince:{enabled:!1,required:!1}}):{name:{enabled:!0,required:!0},email:{enabled:!0,required:!0},phone:{enabled:!0,required:!0},gender:{enabled:!0,required:!0},allergies:{enabled:!1,required:!1},dateOfBirth:{enabled:!0,required:!0},medicalNotes:{enabled:!1,required:!1},healthCardNumber:{enabled:!0,required:!1},healthCardProvince:{enabled:!1,required:!1}};x({calendarName:i.title||"",description:i.description||"",welcomeMessage:i.welcomeMessage||"Welcome! Please select your preferred appointment time.",thankYouMessage:i.thankyouMessage||"Thank you for booking with us. We look forward to seeing you!",logo:null,logoUrl:i.logoUrl||null,primaryColor:i.color||"#3b82f6",secondaryColor:i.secondaryColor||"#1e40af",selectedScanTypeIds:e,workingHours:t,logicEngine:n,patientFormSettings:b(r)})}else x({calendarName:"",description:"",welcomeMessage:"Welcome! Please select your preferred appointment time.",thankYouMessage:"Thank you for booking with us. We look forward to seeing you!",logo:null,logoUrl:null,primaryColor:"#3b82f6",secondaryColor:"#1e40af",selectedScanTypeIds:[],logicEngine:{separateByServicesEnabled:!1,seqEnabled:!1,efficiencyEnabled:!1,sameDayPriority:!1,dailyLimitsEnabled:!1,genderMatchingEnabled:!1,dedicatedAssignmentsEnabled:!1,preventBackToBack:!1,slotRangeEnabled:!1,variableRescheduleEnabled:!1,separateCombinationEnabled:!1,technicianBufferEnabled:!1,patientCooldownEnabled:!1,slotDisplayRangeDays:30,variableRescheduleHours:0,technicianBufferGlobalMinutes:0,patientCooldownGlobalMinutes:0,dedicatedAssignments:{},separateByServicesRules:[],seqRules:[],efficiencyRules:[],defaultSameServiceEfficiencyBonus:0,patientCooldownRules:[],sameDayRules:[],dailyLimits:[],preventBackToBackRules:[],separateCombinations:[]},patientFormSettings:b({name:{enabled:!0,required:!0},email:{enabled:!0,required:!0},phone:{enabled:!0,required:!0},gender:{enabled:!0,required:!0},allergies:{enabled:!1,required:!1},dateOfBirth:{enabled:!0,required:!0},medicalNotes:{enabled:!1,required:!1},healthCardNumber:{enabled:!0,required:!1},healthCardProvince:{enabled:!1,required:!1}})})},S=()=>{w(),n()},j=()=>{d>0&&u(e=>e-1)},C=()=>"basic"===(y[d]&&y[d].id)?Mf:null,E=e=>{switch(y[d]&&y[d].id){case"basic":return R.jsx(zt,{formikProps:e,viewOnly:s});case"design":return R.jsx(pf,{formikProps:e,viewOnly:s});case"services":return R.jsx(Nt,{formikProps:e,clinicId:a,services:o,loading:l,error:!(!l&&a&&0===o.length)&&null,viewOnly:s});case"hours":return R.jsx(kf,{formikProps:e,viewOnly:s});case"logic":return R.jsx(jf,{formikProps:e,clinicId:a,editingCalendar:i,viewOnly:s});case"patient":return R.jsx(Cf,{formikProps:e,viewOnly:s});default:return null}},k=e=>R.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",width:"100%",mt:3},children:[R.jsx(q,{onClick:0===d?S:j,sx:{textTransform:"none",color:"#6b7280",borderRadius:"8px",px:3,py:1.5,"&:hover":{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#2563eb"}},children:0===d?"Cancel":"Previous"}),s&&d===y.length-1?R.jsx(q,{onClick:S,sx:{textTransform:"none",color:"#6b7280",borderRadius:"8px",px:3,py:1.5,"&:hover":{backgroundColor:"rgba(59, 130, 246, 0.1)",color:"#2563eb"}},children:"Close"}):R.jsx(q,{variant:"contained",disabled:!(!s||d!==y.length-1)||p,onClick:()=>{d===y.length-1?s||(async e=>{if(!p){f(!0);try{const t={...g,...e.values},n=b(t.patientFormSettings||{}),o={...t,patientFormSettings:n,clinicId:a};if(i){const e={...o,calendarId:i.calendarId};await Ie.updateCalendar(i.calendarId,e),me.success("Calendar updated successfully!")}else await Ie.createCalendar(o),me.success("Calendar created successfully!");r&&r(),S()}catch(t){me.error(t.message||"Failed to save calendar. Please try again.")}finally{f(!1)}}})(e):(e=>{var t,n;if("services"===(null==(t=y[d])?void 0:t.id)){const t=e.values.selectedScanTypeIds||[];if(!Array.isArray(t)||0===t.length)return me.error("Please select at least one scan type."),e.setTouched({...e.touched,selectedScanTypeIds:!0}),void e.setErrors({...e.errors,selectedScanTypeIds:"Select at least one scan type"})}if("logic"===(null==(n=y[d])?void 0:n.id))try{const t=e.values.logicEngine||{},n=gf(t);if(n&&Object.keys(n).length>0){me.error("Some logic rules contain incomplete or invalid data. Please fix them before proceeding.");const t={...e.errors||{}};return t.logicEngine=t.logicEngine||{},Object.entries(n).forEach(([e,n])=>{Array.isArray(n)?(t.logicEngine[e]=[],(n||[]).forEach(n=>{const r=null!=n.ruleIndex?n.ruleIndex:0;t.logicEngine[e][r]=n.message})):"string"==typeof n&&(t.logicEngine[e]=n)}),e.setErrors(t),void e.setTouched({...e.touched||{},logicEngine:!0})}}catch(a){}const r=C();r?r.validate(e.values,{abortEarly:!1}).then(()=>{x(t=>({...t,...e.values})),d<y.length-1&&u(e=>e+1)}).catch(t=>{if(t.inner){const n={},r={},a=(e,t)=>{const n=t.split(".");let r=e;for(let a=0;a<n.length-1;a++){const e=n[a];r[e]||(r[e]={}),r=r[e]}r[n[n.length-1]]=!0};t.inner.forEach(e=>{n[e.path]=e.message,a(r,e.path)}),e.setErrors(n),e.setTouched({...e.touched,...r})}}):(x(t=>({...t,...e.values})),d<y.length-1&&u(e=>e+1))})(e)},sx:{textTransform:"none",borderRadius:"8px",px:3,py:1.5,backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},"&.Mui-disabled":{backgroundColor:"#9ca3af",color:"#ffffff"}},children:p?i?"Updating...":"Creating...":d===y.length-1?i?"Update Calendar":"Create Calendar":"Next"})]});return e.useImperativeHandle(c,()=>({resetForm:w})),R.jsx(fe,{open:t,onClose:S,title:s?"View Calendar":i?"Edit Calendar":"Create New Calendar",maxWidth:"md",customWidth:"920px",PaperProps:{sx:{marginX:"auto"}},showActions:!1,customActions:null,children:R.jsx(he,{initialValues:g,validationSchema:C(),onSubmit:()=>{},enableReinitialize:!0,validate:e=>{const t=C();if(t)try{return t.validateSync(e,{abortEarly:!1}),{}}catch(n){const e={};return n.inner.forEach(t=>{t.path&&(e[t.path]=t.message)}),e}return{}},children:e=>R.jsxs(R.Fragment,{children:[R.jsx(Bf,{steps:y,currentStep:d}),R.jsx(M,{sx:{minHeight:400},children:E(e)}),k(e)]})})})});_f.propTypes={open:A.bool.isRequired,onClose:A.func.isRequired,onSave:A.func,clinicId:A.string,editingCalendar:A.object,clinicServices:A.array,clinicServicesLoading:A.bool,viewOnly:A.bool},Rf.propTypes={icon:A.elementType.isRequired,isActive:A.bool.isRequired,isCompleted:A.bool.isRequired,stepNumber:A.number.isRequired},Bf.propTypes={steps:A.array.isRequired,currentStep:A.number.isRequired};const If=({open:t,loading:n=!1,error:r=null,data:a=null,onClose:i,onCopyLink:o})=>{const[l,s]=e.useState(!1);e.useEffect(()=>{t||s(!1)},[t]);const c=async()=>{if(!(null==a?void 0:a.link)||!o)return;await o(a.link)&&s(!0)},d=Boolean(null==a?void 0:a.link)&&!n&&!(null==a?void 0:a.isExpired)&&Boolean(o);return R.jsxs(ve,{open:t,onClose:i,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[R.jsx(ye,{children:"Share Booking Link"}),R.jsx(we,{children:n?R.jsx(M,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:160,children:R.jsx(T,{size:28})}):R.jsxs(B,{spacing:2,children:[r&&R.jsx(Se,{severity:"error",children:r}),a&&R.jsxs(R.Fragment,{children:[R.jsxs(M,{children:[R.jsx(_,{variant:"subtitle2",color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:.5},children:"Clinic"}),R.jsx(_,{variant:"body1",fontWeight:600,color:"text.primary",children:a.clinicName||"Clinic"})]}),R.jsx(z,{label:"Booking Link",value:a.link||"",fullWidth:!0,InputProps:{readOnly:!0,sx:{fontFamily:"monospace"},endAdornment:R.jsx(Ge,{position:"end",children:R.jsx(I,{size:"small",onClick:c,disabled:!d,children:R.jsx(Tt,{fontSize:"small"})})})}}),a.isExpired?R.jsx(Se,{severity:"warning",children:"This link has expired. Please generate a new link from support."}):a.expirationText?R.jsxs(_,{variant:"body2",color:"text.secondary",children:["Link expires in ",a.expirationText,"."]}):null,l&&R.jsx(Se,{severity:"success",children:"Link copied to clipboard."})]}),!a&&!r&&R.jsx(_,{variant:"body2",color:"text.secondary",children:"No booking link is available for this clinic."})]})}),R.jsxs(Ve,{sx:{px:3,pb:3},children:[R.jsx(q,{onClick:i,disabled:n,color:"inherit",children:"Close"}),(null==a?void 0:a.link)&&R.jsx(q,{onClick:c,variant:"contained",disabled:!d,children:l?"Copied":"Copy Link"})]})]})};If.propTypes={open:A.bool.isRequired,loading:A.bool,error:A.string,data:A.shape({link:A.string,clinicName:A.string,expirationText:A.string,expiresAt:A.oneOfType([A.string,A.instanceOf(Date)]),isExpired:A.bool}),onClose:A.func.isRequired,onCopyLink:A.func};const Af=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTime()-Date.now();if(n<=0)return"";const r=n/36e5;if(r>24){const e=Math.max(1,Math.round(r/24));return 1===e?"1 day":`${e} days`}const a=Math.max(1,Math.round(r));return 1===a?"1 hour":`${a} hours`},Of=()=>{const{selectedClinicId:t,clinicList:n,loadingClinics:r,clinicError:a}=_e(),[i,o]=e.useState(!1),[l,s]=e.useState([]),[c,d]=e.useState({}),[u,p]=e.useState(!1),[f,h]=e.useState(null),[b,g]=e.useState(null),[x,m]=e.useState(!1),[v,y]=e.useState(!1),[w,S]=e.useState(new Set),[j,C]=e.useState(new Set),E=e.useRef(),[k,B]=e.useState({}),[M,_]=e.useState({}),I=e.useRef(new Set),[A,O]=e.useState(!1),[T,D]=e.useState(null),[P,F]=e.useState(!1),[N,z]=e.useState(null);e.useEffect(()=>{n.length>0&&n.forEach(e=>{H(e.id||e.clinicId)})},[n]),e.useEffect(()=>{(async()=>{if(!t)return s([]),void y(!1);p(!0),h(null),y(!1);try{const e=await Ie.getCalendarSummaries(t),n=(Array.isArray(e)?e:[]).map(e=>({calendarId:e.calendarId,title:e.title,createdOn:e.createdOn,availableServices:e.enabledServices||[],rules:e.enabledLogicModules?e.enabledLogicModules.map(e=>({ruleName:e,ruleCode:e,config:{enabled:!0}})):[],isLightweight:!0}));if(s(n),p(!1),y(!0),n.length>0){const e=n.map(e=>e.calendarId);C(new Set(e)),S(new Set),Ie.getCalendars(t).then(e=>{const t=Array.isArray(e)?e:[];if(t.length>0){const e={};t.forEach(t=>{e[t.calendarId]=t}),d(e);const n=t.map(e=>e.calendarId);S(new Set(n)),C(new Set)}}).catch(e=>{C(new Set)})}}catch(e){h("Failed to load calendars"),s([]),p(!1),y(!1)}})()},[t]);const q=async e=>{if(e&&!k[e]&&!I.current.has(e)){I.current.add(e);try{const t=await de.get(`https://healthco.clinic/api/api/services/clinic/${e}`),n=Array.isArray(t.data)?t.data:[],r={};n.forEach(e=>{const t=e.serviceId??e.ServiceId??e.id??e.ServiceID??e.ServiceId,n=e.serviceName??e.ServiceName??e.name??e.Name??e.title;null!=t&&(r[String(t)]=n||`Service ${t}`)}),B(t=>({...t,[e]:r})),_(t=>({...t,[e]:n}))}catch(t){B(t=>({...t,[e]:{}}))}finally{I.current.delete(e)}}},H=e=>{q(e)};e.useEffect(()=>{t&&q(t)},[t]);const L=e=>{if(!w.has(e.calendarId))return;const t=c[e.calendarId];t&&(g(t),m(!1),o(!0))},W=async()=>{var e,n;if(t){O(!0),F(!0),z(null),D(null);try{const e=(await de.get(`https://healthco.clinic/api/api/oauth-clients/${t}/latest-link`)).data||{},n=e.link||e.Link,r=e.clinicName||e.ClinicName||"Clinic",a=e.expiresAt||e.ExpiresAt,i=Boolean(e.isExpired||e.IsExpired);if(!n)return void z("No booking link found for this clinic. Please contact support.");D({link:n,clinicName:r,expiresAt:a,expirationText:Af(a),isExpired:i}),i&&z("This booking link has expired. Please request a new one.")}catch(r){let t="Failed to generate booking link. Please try again.";if(null==(e=r.response)?void 0:e.data){const e=r.response.data;e.errors&&Array.isArray(e.errors)&&e.errors.length>0?t=e.errors[0]:e.detail?t=e.detail:e.title?t=e.title:"string"==typeof e&&(t=e)}else 404===(null==(n=r.response)?void 0:n.status)?t="No booking link found for this clinic. Please contact support to set up a booking link.":r.message&&(t=`Failed to generate booking link: ${r.message}`);z(t)}finally{F(!1)}}else me.error("Select a clinic first.")},G=e=>{if(!w.has(e.calendarId))return;const t=c[e.calendarId];t&&(g(t),m(!0),o(!0))},V=()=>{o(!1),g(null),m(!1)},$=!!t&&v&&0===l.length;return R.jsxs("div",{children:[R.jsx(Me,{icon:je.Calendar,title:"Calendar Management",description:"Create stunning, customizable booking calendars with intelligent logic engines",clinics:n,selectedClinicId:t,addButtonLabel:"Add Calendar",addButtonDisabled:!$,onAdd:()=>{t&&(l.length>=1||(g(null),o(!0)))},loadingClinics:r,clinicError:a}),u&&R.jsx(Ce,{}),f&&R.jsx("div",{style:{textAlign:"center",marginTop:"2rem",color:"red"},children:R.jsxs("p",{children:["Error: ",f]})}),!u&&v&&!f&&t&&0===l.length&&R.jsx(Ee,{message:"No calendars found for this clinic. Click 'Add Calendar' to create your first calendar."}),R.jsx(Be,{children:!u&&!f&&l.length>0&&R.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:l.map(e=>R.jsx(Dt,{calendar:e,onEdit:L,onShare:W,onPreview:G,serviceMap:k[t]||{},servicesLoading:!!t&&!M[t],isFullDataLoaded:w.has(e.calendarId),isLoadingFullData:j.has(e.calendarId)},e.calendarId))})}),R.jsx(_f,{ref:E,open:i,onClose:V,onSave:()=>{(async()=>{if(t){p(!0),y(!1);try{const e=await Ie.getCalendarSummaries(t),n=(Array.isArray(e)?e:[]).map(e=>({calendarId:e.calendarId,title:e.title,createdOn:e.createdOn,availableServices:e.enabledServices||[],rules:e.enabledLogicModules?e.enabledLogicModules.map(e=>({ruleName:e,ruleCode:e,config:{enabled:!0}})):[],isLightweight:!0}));if(s(n),p(!1),y(!0),n.length>0){const e=n.map(e=>e.calendarId);C(new Set(e)),S(new Set),Ie.getCalendars(t).then(e=>{const t=Array.isArray(e)?e:[];if(t.length>0){const e={};t.forEach(t=>{e[t.calendarId]=t}),d(e);const n=t.map(e=>e.calendarId);S(new Set(n)),C(new Set)}}).catch(e=>{C(new Set)})}}catch(e){h("Failed to refresh calendars"),p(!1),y(!1)}}})(),V()},clinicId:t,clinicServices:M[t]||[],clinicServicesLoading:!!t&&!M[t],editingCalendar:b,viewOnly:x}),R.jsx(If,{open:A,loading:P,error:N,data:T,onClose:()=>{O(!1),D(null),z(null)},onCopyLink:async e=>{if(!e)return!1;return await(async e=>{if(!e)return!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(e),!0}catch(t){}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.zIndex="-1",t.setAttribute("readonly","");let n=document.body;if(document.activeElement&&document.activeElement.closest){const e=document.activeElement.closest("div");e&&(n=e)}n.appendChild(t);const r=navigator.userAgent.match(/ipad|ipod|iphone/i);if(r&&(t.contentEditable="true",t.readOnly=!1),t.focus(),t.select(),r){const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e),t.setSelectionRange(0,999999)}const a=document.execCommand("copy");return n.removeChild(t),a}catch(t){return!1}})(e)?(me.success("Booking link copied to clipboard."),!0):(me.error("Unable to copy the booking link. Please try again manually."),!1)}})]})};export{Of as default};
