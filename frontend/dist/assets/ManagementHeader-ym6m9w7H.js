import{aG as i,j as n,V as e,r as t,aL as c,X as l,p as a,S as s,T as d,o as r,I as o,ad as h,ae as x,k as u,B as p,U as g,y as m}from"./index-DyR0ftVW.js";const v=i(n.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),j=({icon:i,title:j,description:b,clinics:I=[],selectedClinicId:C,onClinicChange:w,addButtonLabel:S,onAdd:f,addButtonDisabled:A=!1,loadingClinics:y=!1,clinicError:B=null,hideClinicDropdown:M=!1,hideAddButton:N=!1,extraActions:W=null})=>{const E=e(),[L,k]=t.useState(!1),z=c(),D=(null==z?void 0:z.role)===g.GLOBAL_ADMIN||(null==z?void 0:z.isGlobalAdmin),G=l(E.breakpoints.down("sm")),O=l(E.breakpoints.down("md")),R=I.find(i=>{const n=i.clinicId||i.id;return String(n)===String(C)}),T=(null==R?void 0:R.clinicName)||(null==R?void 0:R.name)||"No Clinic Selected";return n.jsx(a,{mb:3,children:n.jsxs(s,{direction:O?"column":"row",spacing:2,alignItems:O?"stretch":"center",justifyContent:O?"flex-start":"space-between",children:[n.jsxs(s,{direction:"row",alignItems:"center",spacing:2,children:[i&&n.jsx(i,{size:32}),n.jsxs(a,{children:[n.jsx(d,{variant:G?"h5":"h4",sx:{fontWeight:700},children:j}),b&&n.jsx(d,{variant:"body2",color:"text.secondary",children:b})]})]}),n.jsxs(s,{direction:O?"column":"row",spacing:1,alignItems:O?"stretch":"center",children:[M?null:y?n.jsx(d,{variant:"caption",color:"text.secondary",children:"Loading clinics..."}):B?n.jsx(d,{variant:"caption",color:"error",children:B}):D?n.jsxs(r,{size:"small",sx:{minWidth:200,width:O?"100%":void 0},disabled:L,children:[n.jsx(o,{id:"clinic-selector-label",sx:{top:"4px"},children:"Active Clinic"}),n.jsx(h,{labelId:"clinic-selector-label",id:"clinic-selector",value:C||"",label:"Active Clinic",onChange:i=>{const n=i.target.value;if(n!==C&&!L){k(!0);try{const i=I.find(i=>{const e=i.clinicId||i.id;return String(e)===String(n)});if(!i)return m.error("Selected clinic not found"),void k(!1);localStorage.setItem("activeClinicId",String(n)),localStorage.setItem("activeClinicName",i.clinicName||i.name||""),localStorage.setItem("activeClinicEmail",i.clinicEmail||i.email||"");const e=new CustomEvent("clinicChanged",{detail:{clinicId:String(n)}});window.dispatchEvent(e),k(!1)}catch(e){m.error("An error occurred while switching clinic"),k(!1)}}},sx:{borderRadius:2,padding:"4px 10px","& .MuiSelect-select":{padding:"6px 0",fontWeight:500}},children:I.map(i=>{const e=i.clinicId||i.id,t=i.clinicName||i.name;return n.jsx(x,{value:e,children:t},e)})})]}):n.jsx(u,{value:T,label:"Active Clinic",disabled:!0,size:"small",sx:{minWidth:200,width:O?"100%":void 0,"& .MuiOutlinedInput-root":{borderRadius:2,padding:"4px 10px"},"& .MuiInputBase-input":{padding:"6px 0",fontWeight:500}},InputProps:{readOnly:!0}}),!N&&n.jsx(p,{variant:"contained",disabled:M?A:A||!C,onClick:f,startIcon:n.jsx(v,{}),sx:{width:O?"100%":void 0,borderRadius:2,padding:"8px 16px",textTransform:"none",fontWeight:600},children:S}),W]})]})})};export{j as M};
