import{r as i,cB as c,cC as n}from"./index-DyR0ftVW.js";const e=()=>{const[e,t]=i.useState(""),[l,d]=i.useState([]),[s,a]=i.useState(!0),[o,r]=i.useState(null);return i.useEffect(()=>{(async()=>{try{a(!0);const i=c();if(i&&i.length>0){const c=i.filter(i=>i.isActive).map(i=>({id:i.clinicId,name:i.clinicName,clinicId:i.clinicId,clinicName:i.clinicName}));d(c);const e=n();e?t(e.toString()):1===c.length&&t(c[0].id.toString())}else d([])}catch(i){r("Failed to load clinics")}finally{a(!1)}})();const i=i=>{var c;const n=null==(c=i.detail)?void 0:c.clinicId;n&&t(n.toString())},e=i=>{var c;const n=null==(c=i.detail)?void 0:c.clinics;if(n&&n.length>0){const i=n.filter(i=>i.isActive).map(i=>({id:i.clinicId,name:i.clinicName,clinicId:i.clinicId,clinicName:i.clinicName}));d(i)}};return window.addEventListener("clinicChanged",i),window.addEventListener("clinicsUpdated",e),()=>{window.removeEventListener("clinicChanged",i),window.removeEventListener("clinicsUpdated",e)}},[]),{selectedClinicId:e,setSelectedClinicId:t,clinicList:l,loadingClinics:s,clinicError:o}};export{e as u};
