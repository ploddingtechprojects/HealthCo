const e=()=>{const e=localStorage.getItem("token");return e?{Authorization:`Bearer ${e}`}:{}},t=async t=>{try{const r=await fetch(`https://healthco.clinic/api/fhir/Calendar/ClinicDetails/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",...e()}});if(!r.ok)throw new Error(`Calendar rules fetch failed: ${r.status}`);const n=(await r.json()).rules||[];return n.map(e=>({ruleCode:e.ruleCode,ruleName:e.ruleName,isEnabled:e.isEnabled,configJson:e.config||"{}",calendarRuleMasterId:e.calendarRuleMasterId}))}catch(r){throw r}},r=(e,t={})=>{try{const r=JSON.parse(e||"{}");return{...t,...r}}catch(r){return t}},n=(e,t)=>{const n=e.find(e=>e.ruleCode===t&&e.isEnabled);if(!n){e.find(e=>e.ruleCode===t);return null}const a=r(n.configJson);return{ruleCode:n.ruleCode,config:a}};export{t as fetchCalendarRules,n as getEnabledRule,r as parseRuleConfig};
