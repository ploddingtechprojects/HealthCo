import{r as i,j as t,p as n,al as e,C as s,A as o}from"./index-DyR0ftVW.js";import{M as a}from"./ManagementHeader-ym6m9w7H.js";import{u as r}from"./useClinicSync-pPWROp7F.js";import{V as l,f as p,d as c,h as d}from"./ViewCalendarModal-BHjHQ6rY.js";import{s as m}from"./bookingSubmission-DyCoRkv0.js";import{fetchAndSetClinicTimezone as j,getCurrentClinicTime as u}from"./appointmentLogic-ihgp36Gl.js";import{B as x}from"./BookAppointmentForm-BgtXT8oZ.js";import"./technician-CQyKWYBS.js";import"./displayDate-BRGhvOnj.js";import"./Tooltip-Cof9Jr1h.js";import"./DateOfBirthField-8J2568o0.js";import"./InputAdornment-BBfdgTpM.js";import"./DialogActions-BmwBtQrJ.js";import"./ListItem-BPokTJtf.js";import"./calendarService-uG1S5kl9.js";import"./bookingRules-DFQhlYAe.js";import"./calendarRulesService-tdjIi356.js";import"./CommonCheckbox-aJ2wZ0C8.js";import"./useProvinces-BxWqgMCH.js";import"./TruncateTooltip-BVddiBa5.js";const h=()=>{const{selectedClinicId:h,clinicList:f,loadingClinics:g,clinicError:A}=r(),[C,S]=i.useState(null),[w,I]=i.useState(null),[y,D]=i.useState(!1),[E,V]=i.useState(0),[b,B]=i.useState({isEdit:!1,appointmentId:null,appointmentData:null,loading:!1});i.useEffect(()=>{if(h){(async()=>{await j(h);const{rescheduleRule:i}=await d(h);I(i)})()}},[h]);const M=c(B,D,w,u);return g?t.jsxs(n,{children:[t.jsx(a,{icon:e.Appointments,title:"Appointments",description:"View and manage clinic appointments",hideAddButton:!0}),t.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:t.jsx(s,{})})]}):A?t.jsxs(n,{children:[t.jsx(a,{icon:e.Appointments,title:"Appointments",description:"View and manage clinic appointments",hideAddButton:!0}),t.jsx(o,{severity:"error",sx:{mt:2},children:A})]}):t.jsxs(n,{children:[t.jsx(a,{icon:e.Appointments,title:"Calendar View",description:"View and manage clinic appointments",hideAddButton:!0,clinics:f,selectedClinicId:h,hideClinicDropdown:f.length<=1,loadingClinics:g,clinicError:A}),h&&t.jsx(n,{sx:{mt:3},children:t.jsx(l,{clinicId:h,asModal:!1,showTitle:!1,onEdit:M,canModifyAppointment:i=>p(i,w,u())},E)}),y&&t.jsx(x,{open:y,onClose:()=>{D(!1),B({isEdit:!1,appointmentId:null,appointmentData:null,loading:!1})},clinicId:h,editState:b,onSubmit:async(i,t)=>{const n=await m({bookingData:i,updateType:t,clinicId:h,editState:b});return n&&V(i=>i+1),n}})]})};export{h as default};
