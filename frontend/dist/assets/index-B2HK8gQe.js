import{aG as e,j as i,m as s,r as n,y as a,p as t,C as c,A as r,T as l,an as d,ao as o,a3 as h,ay as x,az as j,aA as m,af as v,ag as y,ah as f,ai as p,aj as u}from"./index-DyR0ftVW.js";import{u as g}from"./useClinicSync-pPWROp7F.js";import{T as A}from"./Tooltip-Cof9Jr1h.js";const b=e(i.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),M=e(i.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"})),w=e(i.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),C=async e=>{try{return(await s.get(`/api/clinic-admins/${e}`)).data}catch(i){throw i}},N=async(e,i)=>{try{return(await s.patch(`/api/clinic-admins/${e}/toggle-status`,{isActive:i})).data}catch(n){throw n}},I=()=>{const{selectedClinicId:e,loadingClinics:s}=g(),[I,S]=n.useState([]),[T,$]=n.useState(!0),[z,L]=n.useState(null),[P,E]=n.useState([]);n.useEffect(()=>{e?F():s||$(!1)},[e,s]);const F=async()=>{if(e){$(!0);try{const i=await C(e);S(i);const s=i.find(e=>e.isMasterAdmin),n=i.filter(e=>!e.isMasterAdmin);L(s),E(n)}catch(i){a.error("Failed to fetch clinic admins")}finally{$(!1)}}};return T?i.jsx(t,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:i.jsx(c,{})}):e?i.jsxs(t,{children:[i.jsx(l,{variant:"h4",gutterBottom:!0,children:"Clinic Administrators"}),z&&i.jsx(d,{sx:{mb:3,borderLeft:"4px solid #1976d2"},children:i.jsxs(o,{children:[i.jsxs(t,{display:"flex",alignItems:"center",gap:1,mb:2,children:[i.jsx(w,{sx:{color:"#ffc107"}}),i.jsx(l,{variant:"h6",children:"Master Admin (Clinic Owner)"})]}),i.jsxs(t,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsxs(t,{children:[i.jsx(l,{variant:"body1",fontWeight:"bold",children:z.fullName}),i.jsx(l,{variant:"body2",color:"text.secondary",children:z.email}),z.phoneNumber&&i.jsx(l,{variant:"body2",color:"text.secondary",children:z.phoneNumber}),z.position&&i.jsxs(l,{variant:"body2",color:"text.secondary",children:["Position: ",z.position]})]}),i.jsx(h,{icon:i.jsx(M,{}),label:"Master Admin",color:"primary",variant:"filled"})]}),i.jsx(r,{severity:"info",sx:{mt:2},children:"The Master Admin cannot be deactivated or removed. They have full control over the clinic."})]})}),i.jsx(d,{children:i.jsxs(o,{children:[i.jsx(t,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:i.jsxs(l,{variant:"h6",children:["Regular Clinic Admins (",P.length,")"]})}),0===P.length?i.jsx(r,{severity:"info",children:"No regular clinic admins found. The Master Admin can create additional admins via the Clinic Members page."}):i.jsx(x,{component:j,children:i.jsxs(m,{children:[i.jsx(v,{children:i.jsxs(y,{children:[i.jsx(f,{children:"Name"}),i.jsx(f,{children:"Email"}),i.jsx(f,{children:"Phone"}),i.jsx(f,{children:"Position"}),i.jsx(f,{children:"Status"}),i.jsx(f,{align:"center",children:"Actions"})]})}),i.jsx(p,{children:P.map(e=>i.jsxs(y,{children:[i.jsx(f,{children:i.jsxs(t,{display:"flex",alignItems:"center",gap:1,children:[i.jsx(b,{}),e.fullName]})}),i.jsx(f,{children:e.email}),i.jsx(f,{children:e.phoneNumber||"N/A"}),i.jsx(f,{children:e.position||"N/A"}),i.jsx(f,{children:i.jsx(h,{label:e.isActive?"Active":"Inactive",color:e.isActive?"success":"default",size:"small"})}),i.jsx(f,{align:"center",children:i.jsx(A,{title:e.isActive?"Deactivate Admin":"Activate Admin",children:i.jsx(u,{checked:e.isActive,onChange:()=>(async(e,i,s)=>{const n=!i,t=n?"activate":"deactivate";try{await N(e,n),a.success(`${s} ${t}d successfully`),F()}catch(c){a.error(`Failed to ${t} admin`)}})(e.clinicMemberId,e.isActive,e.fullName),color:"primary"})})})]},e.clinicMemberId))})]})}),i.jsxs(r,{severity:"warning",sx:{mt:2},children:[i.jsx("strong",{children:"Note:"})," Only the Master Admin can activate or deactivate regular clinic admins. Inactive admins cannot log in or access the clinic."]})]})})]}):i.jsx(r,{severity:"warning",children:"Please select a clinic to view administrators"})};export{I as default};
