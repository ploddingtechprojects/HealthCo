import{r as e,j as a,p as t,S as r,T as s,k as o,P as n,ay as l,az as i,aA as c,aH as h}from"./index-DyR0ftVW.js";import{I as u}from"./InputAdornment-BBfdgTpM.js";import{I as d}from"./AntdIcon-2OxomVw-.js";var g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},p.apply(this,arguments)}const m=(a,t)=>e.createElement(d,p({},a,{ref:t,icon:g})),P=e.forwardRef(m),f=({searchValue:e,onSearchChange:n,placeholder:l="Search...",showTotalCount:i=!1,totalCount:c=0,totalLabel:h="Total Items"})=>a.jsx(t,{sx:{pb:0},children:a.jsxs(r,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},spacing:{xs:1,sm:2},children:[i&&a.jsxs(s,{component:"h2",sx:{fontSize:{xs:"1rem",sm:void 0},mb:{xs:.5,sm:0}},children:[h,": ",c]}),a.jsx(o,{placeholder:l,value:e,onChange:e=>n(e.target.value),size:"small",fullWidth:!0,sx:{minWidth:{sm:300},maxWidth:{sm:600}},slotProps:{input:{startAdornment:a.jsx(u,{position:"start",children:a.jsx(P,{})})}},inputProps:{autoComplete:"new-password","aria-autocomplete":"none",role:"presentation"}})]})});f.propTypes={searchValue:n.string.isRequired,onSearchChange:n.func.isRequired,placeholder:n.string,showTotalCount:n.bool,totalCount:n.number,totalLabel:n.string};const C=({data:r=[],searchFields:s=[],customFilter:o,searchPlaceholder:n="Search...",showTotalCount:u=!0,totalLabel:d="Total Items",defaultRowsPerPage:g=10,rowsPerPageOptions:p=[5,10,25,50],children:m,tableProps:P={},...C})=>{const{searchQuery:w,setSearchQuery:x,filteredData:b}=((a=[],t=[],r)=>{const[s,o]=e.useState(""),n=e.useMemo(()=>{if(!s.trim())return a;const e=s.toLowerCase();return a.filter(a=>r?r(a,e):t.some(t=>{const r=t.split(".").reduce((e,a)=>null==e?void 0:e[a],a);return null==r?void 0:r.toString().toLowerCase().includes(e)}))},[a,s,t,r]);return{searchQuery:s,setSearchQuery:o,filteredData:n,clearSearch:()=>{o("")},hasActiveSearch:!!s.trim()}})(r,s,o),{page:j,rowsPerPage:y,paginatedData:v,handleChangePage:S,handleChangeRowsPerPage:T,resetPagination:O}=((a=[],t=10)=>{const[r,s]=e.useState(0),[o,n]=e.useState(t),l=e.useMemo(()=>a.slice(r*o,r*o+o),[a,r,o]);return e.useEffect(()=>{const e=Math.max(0,Math.ceil(a.length/o)-1);r>e&&s(e)},[a.length,o]),{page:r,rowsPerPage:o,paginatedData:l,handleChangePage:(e,a)=>{s(a)},handleChangeRowsPerPage:e=>{n(parseInt(e.target.value,10)),s(0)},resetPagination:()=>{s(0)},totalCount:a.length,totalPages:Math.ceil(a.length/o)}})(b,g);return e.useEffect(()=>{O()},[w]),a.jsxs(t,{sx:{width:"100%"},...C,children:[a.jsx(f,{searchValue:w,onSearchChange:x,placeholder:n,showTotalCount:u,totalCount:b.length,totalLabel:d}),a.jsx(l,{component:i,sx:{width:"100%",overflow:"auto",mt:3},children:a.jsx(c,{sx:{minWidth:800},...P,children:"function"==typeof m?m({paginatedData:v,filteredData:b,searchQuery:w,page:j,rowsPerPage:y}):m})}),a.jsx(h,{rowsPerPageOptions:p,component:"div",count:b.length,rowsPerPage:y,page:j,onPageChange:S,onRowsPerPageChange:T,sx:{borderTop:"1px solid",borderColor:"divider"}})]})};C.propTypes={data:n.array.isRequired,searchFields:n.arrayOf(n.string),customFilter:n.func,searchPlaceholder:n.string,showTotalCount:n.bool,totalLabel:n.string,defaultRowsPerPage:n.number,rowsPerPageOptions:n.arrayOf(n.number),children:n.oneOfType([n.node,n.func]).isRequired,tableProps:n.object};export{C as T};
